/*! For license information please see main.ae6ad6b4.js.LICENSE.txt */
(()=>{"use strict";var e={730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case T:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function $(e,t){X(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function se(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,Ie=null;function Te(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function ke(e){Se?Ie?Ie.push(e):Ie=[e]:Se=e}function Ce(){if(Se){var e=Se,t=Ie;if(Ie=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return xe(e,t,n)}finally{Ae=!1,(null!==Se||null!==Ie)&&(Ne(),Ce())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Pe=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,St,It,Tt,kt=!1,Ct=[],xt=null,Nt=null,At=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){kt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(jt),Dt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Bt(xt,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Gt=!0;function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Kt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Kt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Kt(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Mt(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Gr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),vn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return In}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(kn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Rn),Pn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){ke(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Qn(e){Ur(e,0)}function Yn(e){if(K(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Hn(t,Kn,e,_e(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},Ir={};function Tr(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return Sr[e]=n[t];return e}u&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Tr("animationend"),Cr=Tr("animationiteration"),xr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),l(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(kr,"onAnimationEnd"),Dr(Cr,"onAnimationIteration"),Dr(xr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Ht;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case kr:case Cr:case xr:l=vn;break;case Nr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=De(p,d))&&u.push(Hr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=d;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Kr(u),d=Kr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jn;else if(Gn(a))if(Xn)g=or;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(y=en()):($t="value"in(Xt=i)?Xt.value:Xt.textContent,zn=!0)),0<(v=Wr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=Bn(n))&&(w.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=$t=Xt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=De(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=De(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=De(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ei=[],Si=-1;function Ii(e){return{current:e}}function Ti(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function ki(e,t){Si++,Ei[Si]=e.current,e.current=t}var Ci={},xi=Ii(Ci),Ni=Ii(!1),Ai=Ci;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ti(Ni),Ti(xi)}function Oi(e,t,n){if(xi.current!==Ci)throw Error(s(168));ki(xi,t),ki(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=xi.current,ki(xi,e),ki(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(xi),ki(xi,e)):Ti(Ni),ki(Ni,n)}var Ui=null,ji=!1,Vi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke(Ze,zi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Gi=0,Hi=null,Wi=0,Ki=[],Qi=0,Yi=null,Ji=1,Xi="";function $i(e,t){qi[Gi++]=Wi,qi[Gi++]=Hi,Hi=e,Wi=t}function Zi(e,t,n){Ki[Qi++]=Ji,Ki[Qi++]=Xi,Ki[Qi++]=Yi,Yi=e;var r=Ji;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,Xi=s+e}else Ji=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=qi[--Gi],qi[Gi]=null,Wi=qi[--Gi],qi[Gi]=null;for(;e===Yi;)Yi=Ki[--Qi],Ki[Qi]=null,Xi=Ki[--Qi],Ki[Qi]=null,Ji=Ki[--Qi],Ki[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=Ii(null),ys=null,ws=null,bs=null;function _s(){bs=ws=ys=null}function Es(e){var t=vs.current;Ti(vs),e._currentValue=t}function Ss(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){ys=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===ys)throw Error(s(308));ws=e,ys.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var ks=null;function Cs(e){null===ks?ks=[e]:ks.push(e)}function xs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Cs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ds(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ps(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Cs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var js=(new r.Component).refs;function Vs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ps(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ps(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ps(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(rc(t,e,r,n),Ls(t,e,r))}};function zs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Di(t)?Ai:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Gs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Hs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=js,Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Di(t)?Ai:xi.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ws(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===js&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ks(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Ws(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ws(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ws(e,null,t),n.return=e,n;case E:return(t=jc(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ks(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ks(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ks(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),is&&$i(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&$i(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&$i(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,c);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),is&&$i(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return is&&$i(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),is&&$i(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Ws(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Mc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lc(o.type,o.key,o.props,null,r.mode,l)).ref=Ws(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jc(o,r.mode,l)).return=r,r=s}return a(r);case D:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);Ks(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Js=Ys(!0),Xs=Ys(!1),$s={},Zs=Ii($s),eo=Ii($s),to=Ii($s);function no(e){if(e===$s)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,$s),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Zs),ki(Zs,t)}function io(){Ti(Zs),Ti(eo),Ti(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(Ti(Zs),Ti(eo))}var ao=Ii(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,vo=null,yo=!1,wo=!1,bo=0,_o=0;function Eo(){throw Error(s(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,vo=go=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,vo=go=mo=null,yo=!1,t)throw Error(s(300));return e}function To(){var e=0!==bo;return bo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?mo.memoizedState=vo=e:vo=vo.next=e,vo}function Co(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===vo?mo.memoizedState:vo.next;if(null!==t)vo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===vo?mo.memoizedState=vo=e:vo=vo.next=e}return vo}function xo(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,mo.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Do(e,t){var n=mo,r=Co(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=Ns(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Co().memoizedState}function Bo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Co();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=jo(t,n,s,r))}mo.flags|=e,i.memoizedState=jo(1|t,n,s,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Go(e,t){return zo(2048,8,e,t)}function Ho(e,t){return zo(4,2,e,t)}function Wo(e,t){return zo(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ko.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return Co().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=xs(e,t,n,r))){rc(n,e,r,tc()),sa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Cs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=xs(e,t,i,r))&&(rc(n,e,r,i=tc()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var oa={readContext:Ts,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},aa={readContext:Ts,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Al.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Ts,useCallback:Jo,useContext:Ts,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Wo,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(xo)},useDebugValue:Yo,useDeferredValue:function(e){return $o(Co(),go.memoizedState,e)},useTransition:function(){return[No(xo)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Ts,useCallback:Jo,useContext:Ts,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Wo,useMemo:Xo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(xo)},useDebugValue:Yo,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:$o(t,go.memoizedState,e)},useTransition:function(){return[Ao(xo)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ps(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),da(0,t)},n}function ma(e,t,n){(n=Ps(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ps(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Xs(t,null,n,r):Js(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=Io(e,t,n,r,s,i),n=To(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ia(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ca(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Ol,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Ol,Pl),Pl|=r;return _a(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Di(n)?Ai:xi.current;return s=Ri(t,s),Is(t,i),n=Io(e,t,n,r,s,i),r=To(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function xa(e,t,n,r,i){if(Di(n)){var s=!0;Mi(t)}else s=!1;if(Is(t,i),null===t.stateNode)Ga(e,t),qs(t,n,r),Hs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ts(c):c=Ri(t,c=Di(n)?Ai:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Gs(t,o,r,c),As=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ni.current||As?("function"===typeof u&&(Vs(t,n,u,r),l=t.memoizedState),(a=As||zs(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ds(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:gs(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ts(l):l=Ri(t,l=Di(n)?Ai:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Gs(t,o,r,l),As=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||As?("function"===typeof f&&(Vs(t,n,f,r),p=t.memoizedState),(c=As||zs(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ha(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Js(t,e.child,null,s),t.child=Js(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ra(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Da,Pa,Oa,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Js(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),rc(r,e,i,-1))}return gc(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Qi++]=Ji,Ki[Qi++]=Xi,Ki[Qi++]=Yi,Ji=e.id,Xi=e.overflow,Yi=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&ps(r),Js(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ss(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Di(t.type)&&Pi(),Ka(t),null;case 3:return r=t.stateNode,io(),Ti(Ni),Ti(xi),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Pa(e,t),Ka(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":J(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Da(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jr("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ka(t),null;case 13:if(Ti(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return io(),Pa(e,t),null===e&&zr(t.stateNode.containerInfo),Ka(t),null;case 10:return Es(t.type._context),Ka(t),null;case 19:if(Ti(ao),null===(o=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Wa(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Wa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>ql&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ka(t),null}else 2*Xe()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Di(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ni),Ti(xi),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ao),null;case 4:return io(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Da=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&jr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ja=!1,Xa=!1,$a="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Xa&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,fl(e,t,n),Xa=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $a),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Tc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":$(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Tc(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Tc(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Xe())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(u=Xa)||h,gl(t,e),Xa=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){El(d);continue}}null!==p?(p.return=f,Za=p):El(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Tc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Tc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ja;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Ja;var c=Xa;if(Ja=o,(Xa=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?Sl(i):null!==l?(l.return=o,Za=l):Sl(i);for(;null!==s;)Za=s,bl(s,t,n),s=s.sibling;Za=i,Ja=a,Xa=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_l(e)}}function _l(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}Xa||512&t.flags&&sl(t)}catch(f){Tc(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function El(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Sl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Tc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Tc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Tc(t,o,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Il,Tl=Math.ceil,kl=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,xl=b.ReactCurrentBatchConfig,Nl=0,Al=null,Rl=null,Dl=0,Pl=0,Ol=Ii(0),Ll=0,Ml=null,Fl=0,Ul=0,jl=0,Vl=null,Bl=null,zl=0,ql=1/0,Gl=null,Hl=!1,Wl=null,Kl=null,Ql=!1,Yl=null,Jl=0,Xl=0,$l=null,Zl=-1,ec=0;function tc(){return 0!==(6&Nl)?Xe():-1!==Zl?Zl:Zl=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Dl?Dl&-Dl:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rc(e,t,n,r){if(50<Xl)throw Xl=0,$l=null,Error(s(185));vt(e,n,r),0!==(2&Nl)&&e===Al||(e===Al&&(0===(2&Nl)&&(Ul|=n),4===Ll&&lc(e,Dl)),ic(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(ql=Xe()+500,ji&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Al?Dl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&Nl)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Nl;Nl|=2;var o=mc();for(Al===e&&Dl===t||(Gl=null,ql=Xe()+500,fc(e,t));;)try{wc();break}catch(l){pc(e,l)}_s(),kl.current=o,Nl=i,null!==Rl?t=0:(Al=null,Dl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ml,fc(e,0),lc(e,r),ic(e,Xe()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ml,fc(e,0),lc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Ec(e,Bl,Gl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=zl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Ec.bind(null,e,Bl,Gl),t);break}Ec(e,Bl,Gl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(Ec.bind(null,e,Bl,Gl),r);break}Ec(e,Bl,Gl);break;default:throw Error(s(329))}}}return ic(e,Xe()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lc(e,t){for(t&=~jl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nl))throw Error(s(327));Sc();var t=dt(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,fc(e,0),lc(e,t),ic(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,Bl,Gl),ic(e,Xe()),null}function uc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(ql=Xe()+500,ji&&zi())}}function hc(e){null!==Yl&&0===Yl.tag&&0===(6&Nl)&&Sc();var t=Nl;Nl|=1;var n=xl.transition,r=wt;try{if(xl.transition=null,wt=1,e)return e()}finally{wt=r,xl.transition=n,0===(6&(Nl=t))&&zi()}}function dc(){Pl=Ol.current,Ti(Ol)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ti(Ni),Ti(xi),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(ao);break;case 10:Es(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Al=e,Rl=e=Oc(e.current,null),Dl=Pl=t,Ll=0,Ml=null,jl=Ul=Fl=0,Bl=Vl=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(_s(),ho.current=oa,yo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,vo=go=mo=null,wo=!1,bo=0,Cl.current=null,null===n||null===n.return){Ll=1,Ml=t,Rl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Ll&&(Ll=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,c,t));break e;case 1:l=c;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Kl||!Kl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(b){t=b,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function mc(){var e=kl.current;return kl.current=oa,null===e?oa:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Al||0===(268435455&Fl)&&0===(268435455&Ul)||lc(Al,Dl)}function vc(e,t){var n=Nl;Nl|=2;var r=mc();for(Al===e&&Dl===t||(Gl=null,fc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(_s(),Nl=n,kl.current=r,null!==Rl)throw Error(s(261));return Al=null,Dl=0,Ll}function yc(){for(;null!==Rl;)bc(Rl)}function wc(){for(;null!==Rl&&!Ye();)bc(Rl)}function bc(e){var t=Il(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?_c(e):Rl=t,Cl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Pl)))return void(Rl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ll=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Ec(e,t,n){var r=wt,i=xl.transition;try{xl.transition=null,wt=1,function(e,t,n,r){do{Sc()}while(null!==Yl);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Al&&(Rl=Al=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Ac(tt,(function(){return Sc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=xl.transition,xl.transition=null;var a=wt;wt=1;var l=Nl;Nl|=4,Cl.current=null,function(e,t){if(ei=Gt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Tc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nl,nl=!1}(e,n),vl(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),Je(),Nl=l,wt=a,xl.transition=o}else e.current=n;if(Ql&&(Ql=!1,Yl=e,Jl=i),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Jl)&&0!==e.tag&&Sc(),o=e.pendingLanes,0!==(1&o)?e===$l?Xl++:(Xl=0,$l=e):Xl=0,zi()}(e,t,n,r)}finally{xl.transition=i,wt=r}return null}function Sc(){if(null!==Yl){var e=bt(Jl),t=xl.transition,n=wt;try{if(xl.transition=null,wt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Jl=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Za=y;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(E){Tc(l,l.return,E)}if(l===a){Za=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break e}Za=l.return}}if(Nl=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,xl.transition=t}}return!1}function Ic(e,t,n){e=Os(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function Tc(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Os(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Dl&n)===n&&(4===Ll||3===Ll&&(130023424&Dl)===Dl&&500>Xe()-zl?fc(e,0):jl|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ns(e,t))&&(vt(e,t,n),ic(e,n))}function xc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cc(e,n)}function Ac(e,t){return Ke(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Rc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Pc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Mc(n.children,i,o,t);case I:a=8,i|=8;break;case T:return(e=Dc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Dc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Dc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case x:a=11;break e;case R:a=14;break e;case D:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Dc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,o,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Dc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function zc(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,s,o,a,l){return(e=Bc(n,r,!0,e,0,s,0,a,l)).context=zc(null),n=e.current,(s=Ps(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ps(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(rc(e,i,o,s),Ls(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Il=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:so(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(vs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(ki(ao,1&ao.current),null!==(e=Ha(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Ha(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ga(e,t),e=t.pendingProps;var i=Ri(t,xi.current);Is(t,n),i=Io(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Rs(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,Hs(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ga(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===R)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ds(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ha(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Js(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(vs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ps(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ss(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ss(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=Ts(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Sa(e,t,r,i=gs(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ga(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Is(t,n),qs(t,r,i),Hs(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hc(o);a.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(o);s.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),hc((function(){Gc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(o)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Gc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Gc(null,e,null,null)})),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Xe()),0===(6&Nl)&&(ql=Xe()+500,zi()))}break;case 13:hc((function(){var t=Ns(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Kc(e,1)}},Et=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},St=function(e){if(13===e.tag){var t=nc(e),n=Ns(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},It=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));K(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=uc,Ne=hc;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Ce,uc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!I.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+x(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+x(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+x(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{e.exports=n(202)},579:(e,t,n)=>{e.exports=n(153)},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,P(E);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,I=!1,T=null,k=-1,C=5,x=-1;function N(){return!(t.unstable_now()-x<C)}function A(){if(null!==T){var e=t.unstable_now();x=e;var n=!0;try{n=T(!0,e)}finally{n?S():(I=!1,T=null)}}else I=!1}if("function"===typeof w)S=function(){w(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,S=function(){D.postMessage(null)}}else S=function(){v(A,0)};function P(e){T=e,I||(I=!0,S())}function O(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(k),k=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,P(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{e.exports=n(234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Cedre/",(()=>{var e={};n.r(e),n.d(e,{FirebaseError:()=>Xt,SDK_VERSION:()=>sr,_DEFAULT_ENTRY_NAME:()=>qn,_addComponent:()=>Qn,_addOrOverwriteComponent:()=>Yn,_apps:()=>Hn,_clearComponents:()=>tr,_components:()=>Kn,_getProvider:()=>Xn,_isFirebaseApp:()=>Zn,_isFirebaseServerApp:()=>er,_registerComponent:()=>Jn,_removeServiceInstance:()=>$n,_serverApps:()=>Wn,deleteApp:()=>ur,getApp:()=>lr,getApps:()=>cr,initializeApp:()=>or,initializeServerApp:()=>ar,onLog:()=>dr,registerVersion:()=>hr,setLogLevel:()=>fr});var t,r=n(43),i=n.t(r,2),s=n(391),o=n(950),a=n.t(o,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,h=t.Pop,m=null,g=v();function v(){return(a.state||{idx:null}).idx}function y(){h=t.Pop;let e=v(),n=null==e?null:e-g;g=e,m&&m({action:h,location:b.location,delta:n})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let b={get action(){return h},get location(){return e(s,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(c,y),m=e,()=>{s.removeEventListener(c,y),m=null}},createHref:e=>n(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;let i=f(b.location,e,n);r&&r(i,e),g=v()+1;let l=d(i,g),c=b.createHref(i);try{a.pushState(l,"",c)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(c)}o&&m&&m({action:h,location:b.location,delta:1})},replace:function(e,n){h=t.Replace;let i=f(b.location,e,n);r&&r(i,e),g=v();let s=d(i,g),l=b.createHref(i);a.replaceState(s,"",l),o&&m&&m({action:h,location:b.location,delta:0})},go:e=>a.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));const y=new Set(["lazy","caseSensitive","path","id","index","children"]);function w(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),e.map(((e,i)=>{let s=[...n,i],o="string"===typeof e.id?e.id:s.join("-");if(u(!0!==e.index||!e.children,"Cannot specify children on an index route"),u(!r[o],'Found a route id collision on id "'+o+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){let n=l({},e,t(e),{id:o});return r[o]=n,n}{let n=l({},e,t(e),{id:o,children:void 0});return r[o]=n,e.children&&(n.children=w(e.children,t,s,r)),n}}))}function b(e,t,n){void 0===n&&(n="/");let r=O(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=_(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=P(r);s=R(i[o],e)}return s}function _(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=j([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),_(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:A(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of E(e.path))i(e,t,r);else i(e,t)})),t}function E(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=E(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const S=/^:[\w-]+$/,I=3,T=2,k=1,C=10,x=-2,N=e=>"*"===e;function A(e,t){let n=e.split("/"),r=n.length;return n.some(N)&&(r+=x),t&&(r+=T),n.filter((e=>!N(e))).reduce(((e,t)=>e+(S.test(t)?I:""===t?k:C)),r)}function R(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:j([i,c.pathname]),pathnameBase:V(j([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=j([i,c.pathnameBase]))}return s}function D(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function P(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function F(e,t){let n=M(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function U(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),L("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),L("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),L("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:B(r),hash:z(i)}}(i,s),h=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const j=e=>e.join("/").replace(/\/\/+/g,"/"),V=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;class q{constructor(e,t,n,r){void 0===r&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function G(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],W=new Set(H),K=["get",...H],Q=new Set(K),Y=new Set([301,302,303,307,308]),J=new Set([307,308]),X={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Z={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,te=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),ne="remix-router-transitions";function re(e){const n=e.window?e.window:"undefined"!==typeof window?window:void 0,r="undefined"!==typeof n&&"undefined"!==typeof n.document&&"undefined"!==typeof n.document.createElement,i=!r;let s;if(u(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)s=e.mapRouteProperties;else if(e.detectErrorBoundary){let t=e.detectErrorBoundary;s=e=>({hasErrorBoundary:t(e)})}else s=te;let o,a,c={},d=w(e.routes,s,void 0,c),p=e.basename||"/",m=l({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),g=null,y=new Set,_=null,E=null,S=null,I=null!=e.hydrationData,T=b(d,e.history.location,p),k=null;if(null==T){let t=be(404,{pathname:e.history.location.pathname}),{matches:n,route:r}=we(d);T=n,k={[r.id]:t}}let C,x=T.some((e=>e.route.lazy)),N=T.some((e=>e.route.loader));if(x)a=!1;else if(N)if(m.v7_partialHydration){let t=e.hydrationData?e.hydrationData.loaderData:null,n=e.hydrationData?e.hydrationData.errors:null,r=e=>!e.route.loader||!0!==e.route.loader.hydrate&&(t&&void 0!==t[e.route.id]||n&&void 0!==n[e.route.id]);if(n){let e=T.findIndex((e=>void 0!==n[e.route.id]));a=T.slice(0,e+1).every(r)}else a=T.every(r)}else a=null!=e.hydrationData;else a=!0;let A,R={historyAction:e.history.action,location:e.history.location,matches:T,initialized:a,navigation:X,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||k,fetchers:new Map,blockers:new Map},D=t.Pop,P=!1,L=!1,M=new Map,F=null,U=!1,j=!1,V=[],B=[],z=new Map,q=0,G=-1,H=new Map,W=new Set,K=new Map,Q=new Map,Y=new Set,re=new Map,oe=new Map,le=!1;function ce(e,t){void 0===t&&(t={}),R=l({},R,e);let n=[],r=[];m.v7_fetcherPersist&&R.fetchers.forEach(((e,t)=>{"idle"===e.state&&(Y.has(t)?r.push(t):n.push(t))})),[...y].forEach((e=>e(R,{deletedFetchers:r,unstable_viewTransitionOpts:t.viewTransitionOpts,unstable_flushSync:!0===t.flushSync}))),m.v7_fetcherPersist&&(n.forEach((e=>R.fetchers.delete(e))),r.forEach((e=>Fe(e))))}function ue(n,r,i){var s,a;let c,{flushSync:u}=void 0===i?{}:i,h=null!=R.actionData&&null!=R.navigation.formMethod&&xe(R.navigation.formMethod)&&"loading"===R.navigation.state&&!0!==(null==(s=n.state)?void 0:s._isRedirect);c=r.actionData?Object.keys(r.actionData).length>0?r.actionData:null:h?R.actionData:null;let f=r.loaderData?ve(R.loaderData,r.loaderData,r.matches||[],r.errors):R.loaderData,p=R.blockers;p.size>0&&(p=new Map(p),p.forEach(((e,t)=>p.set(t,Z))));let m,g=!0===P||null!=R.navigation.formMethod&&xe(R.navigation.formMethod)&&!0!==(null==(a=n.state)?void 0:a._isRedirect);if(o&&(d=o,o=void 0),U||D===t.Pop||(D===t.Push?e.history.push(n,n.state):D===t.Replace&&e.history.replace(n,n.state)),D===t.Pop){let e=M.get(R.location.pathname);e&&e.has(n.pathname)?m={currentLocation:R.location,nextLocation:n}:M.has(n.pathname)&&(m={currentLocation:n,nextLocation:R.location})}else if(L){let e=M.get(R.location.pathname);e?e.add(n.pathname):(e=new Set([n.pathname]),M.set(R.location.pathname,e)),m={currentLocation:R.location,nextLocation:n}}ce(l({},r,{actionData:c,loaderData:f,historyAction:D,location:n,initialized:!0,navigation:X,revalidation:"idle",restoreScrollPosition:Ke(n,r.matches||R.matches),preventScrollReset:g,blockers:p}),{viewTransitionOpts:m,flushSync:!0===u}),D=t.Pop,P=!1,L=!1,U=!1,j=!1,V=[],B=[]}async function fe(n,r,i){A&&A.abort(),A=null,D=n,U=!0===(i&&i.startUninterruptedRevalidation),function(e,t){if(_&&S){let n=We(e,t);_[n]=S()}}(R.location,R.matches),P=!0===(i&&i.preventScrollReset),L=!0===(i&&i.enableViewTransition);let a=o||d,u=i&&i.overrideNavigation,h=b(a,r,p),f=!0===(i&&i.flushSync);if(!h){let e=be(404,{pathname:r.pathname}),{matches:t,route:n}=we(a);return He(),void ue(r,{matches:t,loaderData:{},errors:{[n.id]:e}},{flushSync:f})}if(R.initialized&&!j&&function(e,t){if(e.pathname!==t.pathname||e.search!==t.search)return!1;if(""===e.hash)return""!==t.hash;if(e.hash===t.hash)return!0;if(""!==t.hash)return!0;return!1}(R.location,r)&&!(i&&i.submission&&xe(i.submission.formMethod)))return void ue(r,{matches:h},{flushSync:f});A=new AbortController;let g,y,w=de(e.history,r,A.signal,i&&i.submission);if(i&&i.pendingError)y={[ye(h).route.id]:i.pendingError};else if(i&&i.submission&&xe(i.submission.formMethod)){let e=await async function(e,n,r,i,o){void 0===o&&(o={});Ee();let a,l=function(e,t){let n={state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text};return n}(n,r);ce({navigation:l},{flushSync:!0===o.flushSync});let u=De(i,n);if(u.route.action||u.route.lazy){if(a=await he("action",e,u,i,c,s,p,m.v7_relativeSplatPath),e.signal.aborted)return{shortCircuited:!0}}else a={type:v.error,error:be(405,{method:e.method,pathname:n.pathname,routeId:u.route.id})};if(Te(a)){let e;return e=o&&null!=o.replace?o.replace:a.location===R.location.pathname+R.location.search,await pe(R,a,{submission:r,replace:e}),{shortCircuited:!0}}if(Ie(a)){let e=ye(i,u.route.id);return!0!==(o&&o.replace)&&(D=t.Push),{pendingActionData:{},pendingActionError:{[e.route.id]:a.error}}}if(Se(a))throw be(400,{type:"defer-action"});return{pendingActionData:{[u.route.id]:a.data}}}(w,r,i.submission,h,{replace:i.replace,flushSync:f});if(e.shortCircuited)return;g=e.pendingActionData,y=e.pendingActionError,u=Oe(r,i.submission),f=!1,w=new Request(w.url,{signal:w.signal})}let{shortCircuited:E,loaderData:I,errors:T}=await async function(t,n,r,i,s,a,c,u,h,f,g){let v=i||Oe(n,s),y=s||a||Pe(v),w=o||d,[b,_]=ae(e.history,R,r,y,n,m.v7_partialHydration&&!0===u,j,V,B,Y,K,W,w,p,f,g);if(He((e=>!(r&&r.some((t=>t.route.id===e)))||b&&b.some((t=>t.route.id===e)))),G=++q,0===b.length&&0===_.length){let e=Ve();return ue(n,l({matches:r,loaderData:{},errors:g||null},f?{actionData:f}:{},e?{fetchers:new Map(R.fetchers)}:{}),{flushSync:h}),{shortCircuited:!0}}if(!U&&(!m.v7_partialHydration||!u)){_.forEach((e=>{let t=R.fetchers.get(e.key),n=Le(void 0,t?t.data:void 0);R.fetchers.set(e.key,n)}));let e=f||R.actionData;ce(l({navigation:v},e?0===Object.keys(e).length?{actionData:null}:{actionData:e}:{},_.length>0?{fetchers:new Map(R.fetchers)}:{}),{flushSync:h})}_.forEach((e=>{z.has(e.key)&&Ue(e.key),e.controller&&z.set(e.key,e.controller)}));let E=()=>_.forEach((e=>Ue(e.key)));A&&A.signal.addEventListener("abort",E);let{results:S,loaderResults:I,fetcherResults:T}=await me(R.matches,r,b,_,t);if(t.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",E);_.forEach((e=>z.delete(e.key)));let k=_e(S);if(k){if(k.idx>=b.length){let e=_[k.idx-b.length].key;W.add(e)}return await pe(R,k.result,{replace:c}),{shortCircuited:!0}}let{loaderData:C,errors:x}=ge(R,r,b,I,g,_,T,re);re.forEach(((e,t)=>{e.subscribe((n=>{(n||e.done)&&re.delete(t)}))})),m.v7_partialHydration&&u&&R.errors&&Object.entries(R.errors).filter((e=>{let[t]=e;return!b.some((e=>e.route.id===t))})).forEach((e=>{let[t,n]=e;x=Object.assign(x||{},{[t]:n})}));let N=Ve(),D=Be(G),P=N||D||_.length>0;return l({loaderData:C,errors:x},P?{fetchers:new Map(R.fetchers)}:{})}(w,r,h,u,i&&i.submission,i&&i.fetcherSubmission,i&&i.replace,i&&!0===i.initialHydration,f,g,y);E||(A=null,ue(r,l({matches:h},g?{actionData:g}:{},{loaderData:I,errors:T})))}async function pe(i,s,o){let{submission:a,fetcherSubmission:c,replace:h}=void 0===o?{}:o;s.revalidate&&(j=!0);let d=f(i.location,s.location,{_isRedirect:!0});if(u(d,"Expected a location on the redirect navigation"),r){let t=!1;if(s.reloadDocument)t=!0;else if(ee.test(s.location)){const r=e.history.createURL(s.location);t=r.origin!==n.location.origin||null==O(r.pathname,p)}if(t)return void(h?n.location.replace(s.location):n.location.assign(s.location))}A=null;let m=!0===h?t.Replace:t.Push,{formMethod:g,formAction:v,formEncType:y}=i.navigation;!a&&!c&&g&&v&&y&&(a=Pe(i.navigation));let w=a||c;if(J.has(s.status)&&w&&xe(w.formMethod))await fe(m,d,{submission:l({},w,{formAction:s.location}),preventScrollReset:P});else{let e=Oe(d,a);await fe(m,d,{overrideNavigation:e,fetcherSubmission:c,preventScrollReset:P})}}async function me(t,n,r,i,o){let a=await Promise.all([...r.map((e=>he("loader",o,e,n,c,s,p,m.v7_relativeSplatPath))),...i.map((t=>{if(t.matches&&t.match&&t.controller)return he("loader",de(e.history,t.path,t.controller.signal),t.match,t.matches,c,s,p,m.v7_relativeSplatPath);return{type:v.error,error:be(404,{pathname:t.path})}}))]),l=a.slice(0,r.length),u=a.slice(r.length);return await Promise.all([Ne(t,r,l,l.map((()=>o.signal)),!1,R.loaderData),Ne(t,i.map((e=>e.match)),u,i.map((e=>e.controller?e.controller.signal:null)),!0)]),{results:a,loaderResults:l,fetcherResults:u}}function Ee(){j=!0,V.push(...He()),K.forEach(((e,t)=>{z.has(t)&&(B.push(t),Ue(t))}))}function ke(e,t,n){void 0===n&&(n={}),R.fetchers.set(e,t),ce({fetchers:new Map(R.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function Ce(e,t,n,r){void 0===r&&(r={});let i=ye(R.matches,t);Fe(e),ce({errors:{[i.route.id]:n},fetchers:new Map(R.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function Re(e){return m.v7_fetcherPersist&&(Q.set(e,(Q.get(e)||0)+1),Y.has(e)&&Y.delete(e)),R.fetchers.get(e)||$}function Fe(e){let t=R.fetchers.get(e);!z.has(e)||t&&"loading"===t.state&&H.has(e)||Ue(e),K.delete(e),H.delete(e),W.delete(e),Y.delete(e),R.fetchers.delete(e)}function Ue(e){let t=z.get(e);u(t,"Expected fetch controller: "+e),t.abort(),z.delete(e)}function je(e){for(let t of e){let e=Me(Re(t).data);R.fetchers.set(t,e)}}function Ve(){let e=[],t=!1;for(let n of W){let r=R.fetchers.get(n);u(r,"Expected fetcher: "+n),"loading"===r.state&&(W.delete(n),e.push(n),t=!0)}return je(e),t}function Be(e){let t=[];for(let[n,r]of H)if(r<e){let e=R.fetchers.get(n);u(e,"Expected fetcher: "+n),"loading"===e.state&&(Ue(n),H.delete(n),t.push(n))}return je(t),t.length>0}function ze(e){R.blockers.delete(e),oe.delete(e)}function qe(e,t){let n=R.blockers.get(e)||Z;u("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state);let r=new Map(R.blockers);r.set(e,t),ce({blockers:r})}function Ge(e){let{currentLocation:t,nextLocation:n,historyAction:r}=e;if(0===oe.size)return;oe.size>1&&h(!1,"A router only supports one blocker at a time");let i=Array.from(oe.entries()),[s,o]=i[i.length-1],a=R.blockers.get(s);return a&&"proceeding"===a.state?void 0:o({currentLocation:t,nextLocation:n,historyAction:r})?s:void 0}function He(e){let t=[];return re.forEach(((n,r)=>{e&&!e(r)||(n.cancel(),t.push(r),re.delete(r))})),t}function We(e,t){if(E){return E(e,t.map((e=>function(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}(e,R.loaderData))))||e.key}return e.key}function Ke(e,t){if(_){let n=We(e,t),r=_[n];if("number"===typeof r)return r}return null}return C={get basename(){return p},get future(){return m},get state(){return R},get routes(){return d},get window(){return n},initialize:function(){if(g=e.history.listen((t=>{let{action:n,location:r,delta:i}=t;if(le)return void(le=!1);h(0===oe.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let s=Ge({currentLocation:R.location,nextLocation:r,historyAction:n});return s&&null!=i?(le=!0,e.history.go(-1*i),void qe(s,{state:"blocked",location:r,proceed(){qe(s,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),e.history.go(i)},reset(){let e=new Map(R.blockers);e.set(s,Z),ce({blockers:e})}})):fe(n,r)})),r){!function(e,t){try{let n=e.sessionStorage.getItem(ne);if(n){let e=JSON.parse(n);for(let[n,r]of Object.entries(e||{}))r&&Array.isArray(r)&&t.set(n,new Set(r||[]))}}catch(n){}}(n,M);let e=()=>function(e,t){if(t.size>0){let r={};for(let[e,n]of t)r[e]=[...n];try{e.sessionStorage.setItem(ne,JSON.stringify(r))}catch(n){h(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}(n,M);n.addEventListener("pagehide",e),F=()=>n.removeEventListener("pagehide",e)}return R.initialized||fe(t.Pop,R.location,{initialHydration:!0}),C},subscribe:function(e){return y.add(e),()=>y.delete(e)},enableScrollRestoration:function(e,t,n){if(_=e,S=t,E=n||null,!I&&R.navigation===X){I=!0;let e=Ke(R.location,R.matches);null!=e&&ce({restoreScrollPosition:e})}return()=>{_=null,S=null,E=null}},navigate:async function n(r,i){if("number"===typeof r)return void e.history.go(r);let s=ie(R.location,R.matches,p,m.v7_prependBasename,r,m.v7_relativeSplatPath,null==i?void 0:i.fromRouteId,null==i?void 0:i.relative),{path:o,submission:a,error:c}=se(m.v7_normalizeFormMethod,!1,s,i),u=R.location,h=f(R.location,o,i&&i.state);h=l({},h,e.history.encodeLocation(h));let d=i&&null!=i.replace?i.replace:void 0,g=t.Push;!0===d?g=t.Replace:!1===d||null!=a&&xe(a.formMethod)&&a.formAction===R.location.pathname+R.location.search&&(g=t.Replace);let v=i&&"preventScrollReset"in i?!0===i.preventScrollReset:void 0,y=!0===(i&&i.unstable_flushSync),w=Ge({currentLocation:u,nextLocation:h,historyAction:g});if(!w)return await fe(g,h,{submission:a,pendingError:c,preventScrollReset:v,replace:i&&i.replace,enableViewTransition:i&&i.unstable_viewTransition,flushSync:y});qe(w,{state:"blocked",location:h,proceed(){qe(w,{state:"proceeding",proceed:void 0,reset:void 0,location:h}),n(r,i)},reset(){let e=new Map(R.blockers);e.set(w,Z),ce({blockers:e})}})},fetch:function(t,n,r,a){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");z.has(t)&&Ue(t);let l=!0===(a&&a.unstable_flushSync),h=o||d,f=ie(R.location,R.matches,p,m.v7_prependBasename,r,m.v7_relativeSplatPath,n,null==a?void 0:a.relative),g=b(h,f,p);if(!g)return void Ce(t,n,be(404,{pathname:f}),{flushSync:l});let{path:v,submission:y,error:w}=se(m.v7_normalizeFormMethod,!0,f,a);if(w)return void Ce(t,n,w,{flushSync:l});let _=De(g,v);P=!0===(a&&a.preventScrollReset),y&&xe(y.formMethod)?async function(t,n,r,i,a,l,h){if(Ee(),K.delete(t),!i.route.action&&!i.route.lazy){let e=be(405,{method:h.formMethod,pathname:r,routeId:n});return void Ce(t,n,e,{flushSync:l})}let f=R.fetchers.get(t);ke(t,function(e,t){let n={state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0};return n}(h,f),{flushSync:l});let g=new AbortController,v=de(e.history,r,g.signal,h);z.set(t,g);let y=q,w=await he("action",v,i,a,c,s,p,m.v7_relativeSplatPath);if(v.signal.aborted)return void(z.get(t)===g&&z.delete(t));if(m.v7_fetcherPersist&&Y.has(t)){if(Te(w)||Ie(w))return void ke(t,Me(void 0))}else{if(Te(w))return z.delete(t),G>y?void ke(t,Me(void 0)):(W.add(t),ke(t,Le(h)),pe(R,w,{fetcherSubmission:h}));if(Ie(w))return void Ce(t,n,w.error)}if(Se(w))throw be(400,{type:"defer-action"});let _=R.navigation.location||R.location,E=de(e.history,_,g.signal),S=o||d,I="idle"!==R.navigation.state?b(S,R.navigation.location,p):R.matches;u(I,"Didn't find any matches after fetcher action");let T=++q;H.set(t,T);let k=Le(h,w.data);R.fetchers.set(t,k);let[C,x]=ae(e.history,R,I,h,_,!1,j,V,B,Y,K,W,S,p,{[i.route.id]:w.data},void 0);x.filter((e=>e.key!==t)).forEach((e=>{let t=e.key,n=R.fetchers.get(t),r=Le(void 0,n?n.data:void 0);R.fetchers.set(t,r),z.has(t)&&Ue(t),e.controller&&z.set(t,e.controller)})),ce({fetchers:new Map(R.fetchers)});let N=()=>x.forEach((e=>Ue(e.key)));g.signal.addEventListener("abort",N);let{results:P,loaderResults:O,fetcherResults:L}=await me(R.matches,I,C,x,E);if(g.signal.aborted)return;g.signal.removeEventListener("abort",N),H.delete(t),z.delete(t),x.forEach((e=>z.delete(e.key)));let M=_e(P);if(M){if(M.idx>=C.length){let e=x[M.idx-C.length].key;W.add(e)}return pe(R,M.result)}let{loaderData:F,errors:U}=ge(R,R.matches,C,O,void 0,x,L,re);if(R.fetchers.has(t)){let e=Me(w.data);R.fetchers.set(t,e)}Be(T),"loading"===R.navigation.state&&T>G?(u(D,"Expected pending action"),A&&A.abort(),ue(R.navigation.location,{matches:I,loaderData:F,errors:U,fetchers:new Map(R.fetchers)})):(ce({errors:U,loaderData:ve(R.loaderData,F,I,U),fetchers:new Map(R.fetchers)}),j=!1)}(t,n,v,_,g,l,y):(K.set(t,{routeId:n,path:v}),async function(t,n,r,i,o,a,l){let h=R.fetchers.get(t);ke(t,Le(l,h?h.data:void 0),{flushSync:a});let d=new AbortController,f=de(e.history,r,d.signal);z.set(t,d);let g=q,v=await he("loader",f,i,o,c,s,p,m.v7_relativeSplatPath);Se(v)&&(v=await Ae(v,f.signal,!0)||v);z.get(t)===d&&z.delete(t);if(f.signal.aborted)return;if(Y.has(t))return void ke(t,Me(void 0));if(Te(v))return G>g?void ke(t,Me(void 0)):(W.add(t),void await pe(R,v));if(Ie(v))return void Ce(t,n,v.error);u(!Se(v),"Unhandled fetcher deferred data"),ke(t,Me(v.data))}(t,n,v,_,g,l,y))},revalidate:function(){Ee(),ce({revalidation:"loading"}),"submitting"!==R.navigation.state&&("idle"!==R.navigation.state?fe(D||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation}):fe(R.historyAction,R.location,{startUninterruptedRevalidation:!0}))},createHref:t=>e.history.createHref(t),encodeLocation:t=>e.history.encodeLocation(t),getFetcher:Re,deleteFetcher:function(e){if(m.v7_fetcherPersist){let t=(Q.get(e)||0)-1;t<=0?(Q.delete(e),Y.add(e)):Q.set(e,t)}else Fe(e);ce({fetchers:new Map(R.fetchers)})},dispose:function(){g&&g(),F&&F(),y.clear(),A&&A.abort(),R.fetchers.forEach(((e,t)=>Fe(t))),R.blockers.forEach(((e,t)=>ze(t)))},getBlocker:function(e,t){let n=R.blockers.get(e)||Z;return oe.get(e)!==t&&oe.set(e,t),n},deleteBlocker:ze,_internalFetchControllers:z,_internalActiveDeferreds:re,_internalSetRoutes:function(e){c={},o=w(e,s,void 0,c)}},C}Symbol("deferred");function ie(e,t,n,r,i,s,o,a){let l,c;if(o){l=[];for(let e of t)if(l.push(e),e.route.id===o){c=e;break}}else l=t,c=t[t.length-1];let u=U(i||".",F(l,s),O(e.pathname,n)||e.pathname,"path"===a);return null==i&&(u.search=e.search,u.hash=e.hash),null!=i&&""!==i&&"."!==i||!c||!c.route.index||Re(u.search)||(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&"/"!==n&&(u.pathname="/"===u.pathname?n:j([n,u.pathname])),p(u)}function se(e,t,n,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:n};if(r.formMethod&&!Ce(r.formMethod))return{path:n,error:be(405,{method:r.formMethod})};let i,s,o=()=>({path:n,error:be(400,{type:"invalid-body"})}),a=r.formMethod||"get",l=e?a.toUpperCase():a.toLowerCase(),c=Ee(n);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!xe(l))return o();let e="string"===typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce(((e,t)=>{let[n,r]=t;return""+e+n+"="+r+"\n"}),""):String(r.body);return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===r.formEncType){if(!xe(l))return o();try{let e="string"===typeof r.body?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:e,text:void 0}}}catch(f){return o()}}}if(u("function"===typeof FormData,"FormData is not available in this environment"),r.formData)i=fe(r.formData),s=r.formData;else if(r.body instanceof FormData)i=fe(r.body),s=r.body;else if(r.body instanceof URLSearchParams)i=r.body,s=pe(i);else if(null==r.body)i=new URLSearchParams,s=new FormData;else try{i=new URLSearchParams(r.body),s=pe(i)}catch(f){return o()}let h={formMethod:l,formAction:c,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:s,json:void 0,text:void 0};if(xe(h.formMethod))return{path:n,submission:h};let d=m(n);return t&&d.search&&Re(d.search)&&i.append("index",""),d.search="?"+i,{path:p(d),submission:h}}function oe(e,t){let n=e;if(t){let r=e.findIndex((e=>e.route.id===t));r>=0&&(n=e.slice(0,r))}return n}function ae(e,t,n,r,i,s,o,a,c,u,h,d,f,p,m,g){let v=g?Object.values(g)[0]:m?Object.values(m)[0]:void 0,y=e.createURL(t.location),w=e.createURL(i),_=g?Object.keys(g)[0]:void 0,E=oe(n,_).filter(((e,n)=>{let{route:i}=e;if(i.lazy)return!0;if(null==i.loader)return!1;if(s)return!!i.loader.hydrate||void 0===t.loaderData[i.id]&&(!t.errors||void 0===t.errors[i.id]);if(function(e,t,n){let r=!t||n.route.id!==t.route.id,i=void 0===e[n.route.id];return r||i}(t.loaderData,t.matches[n],e)||a.some((t=>t===e.route.id)))return!0;let c=t.matches[n],u=e;return ce(e,l({currentUrl:y,currentParams:c.params,nextUrl:w,nextParams:u.params},r,{actionResult:v,defaultShouldRevalidate:o||y.pathname+y.search===w.pathname+w.search||y.search!==w.search||le(c,u)}))})),S=[];return h.forEach(((e,i)=>{if(s||!n.some((t=>t.route.id===e.routeId))||u.has(i))return;let a=b(f,e.path,p);if(!a)return void S.push({key:i,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null});let h=t.fetchers.get(i),m=De(a,e.path),g=!1;g=!d.has(i)&&(!!c.includes(i)||(h&&"idle"!==h.state&&void 0===h.data?o:ce(m,l({currentUrl:y,currentParams:t.matches[t.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:v,defaultShouldRevalidate:o})))),g&&S.push({key:i,routeId:e.routeId,path:e.path,matches:a,match:m,controller:new AbortController})})),[E,S]}function le(e,t){let n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function ce(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}async function ue(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];u(i,"No route found in manifest");let s={};for(let o in r){let e=void 0!==i[o]&&"hasErrorBoundary"!==o;h(!e,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+o+'" will be ignored.'),e||y.has(o)||(s[o]=r[o])}Object.assign(i,s),Object.assign(i,l({},t(i),{lazy:void 0}))}async function he(e,t,n,r,i,s,o,a,l){let c,h,d;void 0===l&&(l={});let f=e=>{let r,i=new Promise(((e,t)=>r=t));return d=()=>r(),t.signal.addEventListener("abort",d),Promise.race([e({request:t,params:n.params,context:l.requestContext}),i])};try{let r=n.route[e];if(n.route.lazy)if(r){let e,t=await Promise.all([f(r).catch((t=>{e=t})),ue(n.route,s,i)]);if(e)throw e;h=t[0]}else{if(await ue(n.route,s,i),r=n.route[e],!r){if("action"===e){let e=new URL(t.url),r=e.pathname+e.search;throw be(405,{method:t.method,pathname:r,routeId:n.route.id})}return{type:v.data,data:void 0}}h=await f(r)}else{if(!r){let e=new URL(t.url);throw be(404,{pathname:e.pathname+e.search})}h=await f(r)}u(void 0!==h,"You defined "+("action"===e?"an action":"a loader")+' for route "'+n.route.id+"\" but didn't return anything from your `"+e+"` function. Please return a value or `null`.")}catch(g){c=v.error,h=g}finally{d&&t.signal.removeEventListener("abort",d)}if(ke(h)){let e,i=h.status;if(Y.has(i)){let e=h.headers.get("Location");if(u(e,"Redirects returned/thrown from loaders/actions must have a Location header"),ee.test(e)){if(!l.isStaticRequest){let n=new URL(t.url),r=e.startsWith("//")?new URL(n.protocol+e):new URL(e),i=null!=O(r.pathname,o);r.origin===n.origin&&i&&(e=r.pathname+r.search+r.hash)}}else e=ie(new URL(t.url),r.slice(0,r.indexOf(n)+1),o,!0,e,a);if(l.isStaticRequest)throw h.headers.set("Location",e),h;return{type:v.redirect,status:i,location:e,revalidate:null!==h.headers.get("X-Remix-Revalidate"),reloadDocument:null!==h.headers.get("X-Remix-Reload-Document")}}if(l.isRouteRequest){throw{type:c===v.error?v.error:v.data,response:h}}try{let t=h.headers.get("Content-Type");e=t&&/\bapplication\/json\b/.test(t)?null==h.body?null:await h.json():await h.text()}catch(g){return{type:v.error,error:g}}return c===v.error?{type:c,error:new q(i,h.statusText,e),headers:h.headers}:{type:v.data,data:e,statusCode:h.status,headers:h.headers}}return c===v.error?{type:c,error:h}:function(e){let t=e;return t&&"object"===typeof t&&"object"===typeof t.data&&"function"===typeof t.subscribe&&"function"===typeof t.cancel&&"function"===typeof t.resolveData}(h)?{type:v.deferred,deferredData:h,statusCode:null==(p=h.init)?void 0:p.status,headers:(null==(m=h.init)?void 0:m.headers)&&new Headers(h.init.headers)}:{type:v.data,data:h};var p,m}function de(e,t,n,r){let i=e.createURL(Ee(t)).toString(),s={signal:n};if(r&&xe(r.formMethod)){let{formMethod:e,formEncType:t}=r;s.method=e.toUpperCase(),"application/json"===t?(s.headers=new Headers({"Content-Type":t}),s.body=JSON.stringify(r.json)):"text/plain"===t?s.body=r.text:"application/x-www-form-urlencoded"===t&&r.formData?s.body=fe(r.formData):s.body=r.formData}return new Request(i,s)}function fe(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,"string"===typeof r?r:r.name);return t}function pe(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function me(e,t,n,r,i){let s,o={},a=null,l=!1,c={};return n.forEach(((n,h)=>{let d=t[h].route.id;if(u(!Te(n),"Cannot handle redirect results in processLoaderData"),Ie(n)){let t=ye(e,d),i=n.error;r&&(i=Object.values(r)[0],r=void 0),a=a||{},null==a[t.route.id]&&(a[t.route.id]=i),o[d]=void 0,l||(l=!0,s=G(n.error)?n.error.status:500),n.headers&&(c[d]=n.headers)}else Se(n)?(i.set(d,n.deferredData),o[d]=n.deferredData.data):o[d]=n.data,null==n.statusCode||200===n.statusCode||l||(s=n.statusCode),n.headers&&(c[d]=n.headers)})),r&&(a=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:a,statusCode:s||200,loaderHeaders:c}}function ge(e,t,n,r,i,s,o,a){let{loaderData:c,errors:h}=me(t,n,r,i,a);for(let d=0;d<s.length;d++){let{key:t,match:n,controller:r}=s[d];u(void 0!==o&&void 0!==o[d],"Did not find corresponding fetcher result");let i=o[d];if(!r||!r.signal.aborted)if(Ie(i)){let r=ye(e.matches,null==n?void 0:n.route.id);h&&h[r.route.id]||(h=l({},h,{[r.route.id]:i.error})),e.fetchers.delete(t)}else if(Te(i))u(!1,"Unhandled fetcher revalidation redirect");else if(Se(i))u(!1,"Unhandled fetcher deferred data");else{let n=Me(i.data);e.fetchers.set(t,n)}}return{loaderData:c,errors:h}}function ve(e,t,n,r){let i=l({},t);for(let s of n){let n=s.route.id;if(t.hasOwnProperty(n)?void 0!==t[n]&&(i[n]=t[n]):void 0!==e[n]&&s.route.loader&&(i[n]=e[n]),r&&r.hasOwnProperty(n))break}return i}function ye(e,t){return(t?e.slice(0,e.findIndex((e=>e.route.id===t))+1):[...e]).reverse().find((e=>!0===e.route.hasErrorBoundary))||e[0]}function we(e){let t=1===e.length?e[0]:e.find((e=>e.index||!e.path||"/"===e.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function be(e,t){let{pathname:n,routeId:r,method:i,type:s}=void 0===t?{}:t,o="Unknown Server Error",a="Unknown @remix-run/router error";return 400===e?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but did not provide a `loader` for route "'+r+'", so there is no way to handle the request.':"defer-action"===s?a="defer() is not supported in actions":"invalid-body"===s&&(a="Unable to encode submission body")):403===e?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):404===e?(o="Not Found",a='No route matches URL "'+n+'"'):405===e&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but did not provide an `action` for route "'+r+'", so there is no way to handle the request.':i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new q(e||500,o,new Error(a),!0)}function _e(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(Te(n))return{result:n,idx:t}}}function Ee(e){return p(l({},"string"===typeof e?m(e):e,{hash:""}))}function Se(e){return e.type===v.deferred}function Ie(e){return e.type===v.error}function Te(e){return(e&&e.type)===v.redirect}function ke(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function Ce(e){return Q.has(e.toLowerCase())}function xe(e){return W.has(e.toLowerCase())}async function Ne(e,t,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=t[o];if(!l)continue;let c=e.find((e=>e.route.id===l.route.id)),h=null!=c&&!le(c,l)&&void 0!==(s&&s[l.route.id]);if(Se(a)&&(i||h)){let e=r[o];u(e,"Expected an AbortSignal for revalidating fetcher deferred result"),await Ae(a,e,i).then((e=>{e&&(n[o]=e||n[o])}))}}}async function Ae(e,t,n){if(void 0===n&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:v.data,data:e.deferredData.unwrappedData}}catch(r){return{type:v.error,error:r}}return{type:v.data,data:e.deferredData.data}}}function Re(e){return new URLSearchParams(e).getAll("index").some((e=>""===e))}function De(e,t){let n="string"===typeof t?m(t).search:t.search;if(e[e.length-1].route.index&&Re(n||""))return e[e.length-1];let r=M(e);return r[r.length-1]}function Pe(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:s,json:o}=e;if(t&&n&&r)return null!=i?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i}:null!=s?{formMethod:t,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0}:void 0!==o?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}:void 0}function Oe(e,t){if(t){return{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}return{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Le(e,t){if(e){return{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Me(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fe.apply(this,arguments)}const Ue=r.createContext(null);const je=r.createContext(null);const Ve=r.createContext(null);const Be=r.createContext(null);const ze=r.createContext({outlet:null,matches:[],isDataRoute:!1});const qe=r.createContext(null);function Ge(){return null!=r.useContext(Be)}function He(){return Ge()||u(!1),r.useContext(Be).location}function We(e){r.useContext(Ve).static||r.useLayoutEffect(e)}function Ke(){let{isDataRoute:e}=r.useContext(ze);return e?function(){let{router:e}=it(nt.UseNavigateStable),t=ot(rt.UseNavigateStable),n=r.useRef(!1);We((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Fe({fromRouteId:t},i)))}),[e,t]);return i}():function(){Ge()||u(!1);let e=r.useContext(Ue),{basename:t,future:n,navigator:i}=r.useContext(Ve),{matches:s}=r.useContext(ze),{pathname:o}=He(),a=JSON.stringify(F(s,n.v7_relativeSplatPath)),l=r.useRef(!1);return We((()=>{l.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=U(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:j([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e])}()}const Qe=r.createContext(null);function Ye(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(Ve),{matches:s}=r.useContext(ze),{pathname:o}=He(),a=JSON.stringify(F(s,i.v7_relativeSplatPath));return r.useMemo((()=>U(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function Je(e,n,i,s){Ge()||u(!1);let{navigator:o}=r.useContext(Ve),{matches:a}=r.useContext(ze),l=a[a.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=He();if(n){var p;let e="string"===typeof n?m(n):n;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||u(!1),d=e}else d=f;let g=d.pathname||"/",v=g;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(e,{pathname:v});let w=tt(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:j([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:j([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return n&&w?r.createElement(Be.Provider,{value:{location:Fe({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},w):w}function Xe(){let e=function(){var e;let t=r.useContext(qe),n=st(rt.UseRouteError),i=ot(rt.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=G(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const $e=r.createElement(Xe,null);class Ze extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(ze.Provider,{value:this.props.routeContext},r.createElement(qe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function et(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(Ue);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ze.Provider,{value:t},i)}function tt(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,u=!1,d=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||$e,c&&(h<0&&0===s?(p="route-fallback",!1||at[p]||(at[p]=!0),u=!0,f=null):h===s&&(u=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(et,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(Ze,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var nt=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(nt||{}),rt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(rt||{});function it(e){let t=r.useContext(Ue);return t||u(!1),t}function st(e){let t=r.useContext(je);return t||u(!1),t}function ot(e){let t=function(e){let t=r.useContext(ze);return t||u(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const at={};i.startTransition;function lt(e){return function(e){let t=r.useContext(ze).outlet;return t?r.createElement(Qe.Provider,{value:e},t):t}(e.context)}function ct(e){let{basename:n="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:l=!1,future:c}=e;Ge()&&u(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:a,static:l,future:Fe({v7_relativeSplatPath:!1},c)})),[h,c,a,l]);"string"===typeof s&&(s=m(s));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:y="default"}=s,w=r.useMemo((()=>{let e=O(f,h);return null==e?null:{location:{pathname:e,search:p,hash:g,state:v,key:y},navigationType:o}}),[h,f,p,g,v,y,o]);return null==w?null:r.createElement(Ve.Provider,{value:d},r.createElement(Be.Provider,{children:i,value:w}))}new Promise((()=>{}));r.Component;function ut(e){let t={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(t,{element:r.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:r.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:r.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}function ht(){return ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ht.apply(this,arguments)}function dt(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const ft=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],pt=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"];try{window.__reactRouterVersion="6"}catch(Rx){}function mt(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=ht({},t,{errors:gt(t.errors)})),t}function gt(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&"RouteErrorResponse"===i.__type)n[r]=new q(i.status,i.statusText,i.data,!0===i.internal);else if(i&&"Error"===i.__type){if(i.__subType){let e=window[i.__subType];if("function"===typeof e)try{let t=new e(i.message);t.stack="",n[r]=t}catch(Rx){}}if(null==n[r]){let e=new Error(i.message);e.stack="",n[r]=e}}else n[r]=i;return n}const vt=r.createContext({isTransitioning:!1});const yt=r.createContext(new Map);const wt=i.startTransition,bt=a.flushSync;i.useId;function _t(e){bt?bt(e):e()}class Et{constructor(){this.status="pending",this.promise=new Promise(((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}}))}}function St(e){let{fallbackElement:t,router:n,future:i}=e,[s,o]=r.useState(n.state),[a,l]=r.useState(),[c,u]=r.useState({isTransitioning:!1}),[h,d]=r.useState(),[f,p]=r.useState(),[m,g]=r.useState(),v=r.useRef(new Map),{v7_startTransition:y}=i||{},w=r.useCallback((e=>{y?function(e){wt?wt(e):e()}(e):e()}),[y]),b=r.useCallback(((e,t)=>{let{deletedFetchers:r,unstable_flushSync:i,unstable_viewTransitionOpts:s}=t;r.forEach((e=>v.current.delete(e))),e.fetchers.forEach(((e,t)=>{void 0!==e.data&&v.current.set(t,e.data)}));let a=null==n.window||"function"!==typeof n.window.document.startViewTransition;if(s&&!a){if(i){_t((()=>{f&&(h&&h.resolve(),f.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:s.currentLocation,nextLocation:s.nextLocation})}));let t=n.window.document.startViewTransition((()=>{_t((()=>o(e)))}));return t.finished.finally((()=>{_t((()=>{d(void 0),p(void 0),l(void 0),u({isTransitioning:!1})}))})),void _t((()=>p(t)))}f?(h&&h.resolve(),f.skipTransition(),g({state:e,currentLocation:s.currentLocation,nextLocation:s.nextLocation})):(l(e),u({isTransitioning:!0,flushSync:!1,currentLocation:s.currentLocation,nextLocation:s.nextLocation}))}else i?_t((()=>o(e))):w((()=>o(e)))}),[n.window,f,h,v,w]);r.useLayoutEffect((()=>n.subscribe(b)),[n,b]),r.useEffect((()=>{c.isTransitioning&&!c.flushSync&&d(new Et)}),[c]),r.useEffect((()=>{if(h&&a&&n.window){let e=a,t=h.promise,r=n.window.document.startViewTransition((async()=>{w((()=>o(e))),await t}));r.finished.finally((()=>{d(void 0),p(void 0),l(void 0),u({isTransitioning:!1})})),p(r)}}),[w,a,h,n.window]),r.useEffect((()=>{h&&a&&s.location.key===a.location.key&&h.resolve()}),[h,f,s.location,a]),r.useEffect((()=>{!c.isTransitioning&&m&&(l(m.state),u({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),g(void 0))}),[c.isTransitioning,m]),r.useEffect((()=>{}),[]);let _=r.useMemo((()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:e=>n.navigate(e),push:(e,t,r)=>n.navigate(e,{state:t,preventScrollReset:null==r?void 0:r.preventScrollReset}),replace:(e,t,r)=>n.navigate(e,{replace:!0,state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})})),[n]),E=n.basename||"/",S=r.useMemo((()=>({router:n,navigator:_,static:!1,basename:E})),[n,_,E]);return r.createElement(r.Fragment,null,r.createElement(Ue.Provider,{value:S},r.createElement(je.Provider,{value:s},r.createElement(yt.Provider,{value:v.current},r.createElement(vt.Provider,{value:c},r.createElement(ct,{basename:E,location:s.location,navigationType:s.historyAction,navigator:_,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},s.initialized||n.future.v7_partialHydration?r.createElement(It,{routes:n.routes,future:n.future,state:s}):t))))),null)}function It(e){let{routes:t,future:n,state:r}=e;return Je(t,void 0,r,n)}const Tt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,kt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ct=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:h,preventScrollReset:d,unstable_viewTransition:f}=e,m=dt(e,ft),{basename:g}=r.useContext(Ve),v=!1;if("string"===typeof h&&kt.test(h)&&(n=h,Tt))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=O(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(Rx){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;Ge()||u(!1);let{basename:i,navigator:s}=r.useContext(Ve),{hash:o,pathname:a,search:l}=Ye(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:j([i,a])),s.createHref({pathname:c,search:l,hash:o})}(h,{relative:s}),w=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=Ke(),u=He(),h=Ye(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:p(u)===p(h);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[u,c,h,i,s,n,e,o,a,l])}(h,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,unstable_viewTransition:f});return r.createElement("a",ht({},m,{href:n||y,onClick:v||o?i:function(e){i&&i(e),e.defaultPrevented||w(e)},ref:t,target:c}))}));const xt=r.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,unstable_viewTransition:c,children:h}=e,d=dt(e,pt),f=Ye(l,{relative:d.relative}),p=He(),m=r.useContext(je),{navigator:g,basename:v}=r.useContext(Ve),y=null!=m&&function(e,t){void 0===t&&(t={});let n=r.useContext(vt);null==n&&u(!1);let{basename:i}=Rt(Nt.useViewTransitionState),s=Ye(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=O(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=O(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=D(s.pathname,a)||null!=D(s.pathname,o)}(f)&&!0===c,w=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,b=p.pathname,_=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(b=b.toLowerCase(),_=_?_.toLowerCase():null,w=w.toLowerCase()),_&&v&&(_=O(_,v)||_);const E="/"!==w&&w.endsWith("/")?w.length-1:w.length;let S,I=b===w||!o&&b.startsWith(w)&&"/"===b.charAt(E),T=null!=_&&(_===w||!o&&_.startsWith(w)&&"/"===_.charAt(w.length)),k={isActive:I,isPending:T,isTransitioning:y},C=I?n:void 0;S="function"===typeof s?s(k):[s,I?"active":null,T?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let x="function"===typeof a?a(k):a;return r.createElement(Ct,ht({},d,{"aria-current":C,className:S,ref:t,style:x,to:l,unstable_viewTransition:c}),"function"===typeof h?h(k):h)}));var Nt,At;function Rt(e){let t=r.useContext(Ue);return t||u(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Nt||(Nt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(At||(At={}));const Dt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Pt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Dt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Ot;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ot extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lt=function(e){return function(e){const t=Dt(e);return Pt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Mt=function(e){try{return Pt.decodeString(e,!0)}catch(Rx){console.error("base64Decode failed: ",Rx)}return null};function Ft(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ft(e[n],t[n]));return e}const Ut=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,jt=()=>{try{return Ut()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Cedre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Rx){return}const t=e&&Mt(e[1]);return t&&JSON.parse(t)})()}catch(Rx){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Rx))}},Vt=()=>{var e;return null===(e=jt())||void 0===e?void 0:e.config};class Bt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function zt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Lt(JSON.stringify({alg:"none",type:"JWT"})),Lt(JSON.stringify(s)),""].join(".")}function qt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Gt(){var e;const t=null===(e=jt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Rx){return!1}}function Ht(){return"object"===typeof self&&self.self===self}function Wt(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Kt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Qt(){const e=qt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Yt(){return!Gt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jt(){try{return"object"===typeof indexedDB}catch(Rx){return!1}}class Xt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Xt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$t.prototype.create)}}class $t{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Zt,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Xt(n,s,t)}}const Zt=/\{\$([^}]+)}/g;function en(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function tn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(nn(n)&&nn(s)){if(!tn(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function nn(e){return null!==e&&"object"===typeof e}function rn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function sn(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function on(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function an(e,t){const n=new ln(e,t);return n.subscribe.bind(n)}class ln{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=cn),void 0===r.error&&(r.error=cn),void 0===r.complete&&(r.complete=cn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Rx){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Rx){"undefined"!==typeof console&&console.error&&console.error(Rx)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function cn(){}function un(e){return e&&e._delegate?e._delegate:e}class hn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const dn="[DEFAULT]";class fn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Bt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Rx){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Rx){if(r)return null;throw Rx}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:dn})}catch(Rx){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Rx){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===dn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn;return this.component?this.component.multipleInstances?e:dn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const mn=[];var gn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(gn||(gn={}));const vn={debug:gn.DEBUG,verbose:gn.VERBOSE,info:gn.INFO,warn:gn.WARN,error:gn.ERROR,silent:gn.SILENT},yn=gn.INFO,wn={[gn.DEBUG]:"log",[gn.VERBOSE]:"log",[gn.INFO]:"info",[gn.WARN]:"warn",[gn.ERROR]:"error"},bn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=wn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class _n{constructor(e){this.name=e,this._logLevel=yn,this._logHandler=bn,this._userLogHandler=null,mn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?vn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gn.DEBUG,...t),this._logHandler(this,gn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gn.VERBOSE,...t),this._logHandler(this,gn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gn.INFO,...t),this._logHandler(this,gn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gn.WARN,...t),this._logHandler(this,gn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gn.ERROR,...t),this._logHandler(this,gn.ERROR,...t)}}const En=(e,t)=>t.some((t=>e instanceof t));let Sn,In;const Tn=new WeakMap,kn=new WeakMap,Cn=new WeakMap,xn=new WeakMap,Nn=new WeakMap;let An={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return kn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Cn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Rn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(In||(In=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(On(this),n),Pn(Tn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Pn(e.apply(On(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(On(this),t,...r);return Cn.set(s,t.sort?t.sort():[t]),Pn(s)}}function Dn(e){return"function"===typeof e?Rn(e):(e instanceof IDBTransaction&&function(e){if(kn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));kn.set(e,t)}(e),En(e,Sn||(Sn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,An):e)}function Pn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Pn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Tn.set(t,e)})).catch((()=>{})),Nn.set(t,e),t}(e);if(xn.has(e))return xn.get(e);const t=Dn(e);return t!==e&&(xn.set(e,t),Nn.set(t,e)),t}const On=e=>Nn.get(e);const Ln=["get","getKey","getAll","getAllKeys","count"],Mn=["put","add","delete","clear"],Fn=new Map;function Un(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Fn.get(t))return Fn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Mn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ln.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Fn.set(t,s),s}An=(e=>({...e,get:(t,n,r)=>Un(t,n)||e.get(t,n,r),has:(t,n)=>!!Un(t,n)||e.has(t,n)}))(An);class jn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Vn="@firebase/app",Bn="0.10.1",zn=new _n("@firebase/app"),qn="[DEFAULT]",Gn={[Vn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Hn=new Map,Wn=new Map,Kn=new Map;function Qn(e,t){try{e.container.addComponent(t)}catch(Rx){zn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Rx)}}function Yn(e,t){e.container.addOrOverwriteComponent(t)}function Jn(e){const t=e.name;if(Kn.has(t))return zn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Kn.set(t,e);for(const n of Hn.values())Qn(n,e);for(const n of Wn.values())Qn(n,e);return!0}function Xn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function $n(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qn;Xn(e,t).clearInstance(n)}function Zn(e){return void 0!==e.options}function er(e){return void 0!==e.settings}function tr(){Kn.clear()}const nr=new $t("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class rr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new hn("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nr.create("app-deleted",{appName:this._name})}}class ir extends rr{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,hr(Vn,Bn,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ur(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw nr.create("server-app-deleted")}}const sr="10.11.0";function or(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:qn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw nr.create("bad-app-name",{appName:String(i)});if(n||(n=Vt()),!n)throw nr.create("no-options");const s=Hn.get(i);if(s){if(tn(n,s.options)&&tn(r,s.config))return s;throw nr.create("duplicate-app",{appName:i})}const o=new pn(i);for(const l of Kn.values())o.addComponent(l);const a=new rr(n,r,o);return Hn.set(i,a),a}function ar(e,t){if(Ht())throw nr.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=Zn(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw nr.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=Wn.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new pn(i);for(const c of Kn.values())a.addComponent(c);const l=new ir(n,t,i,a);return Wn.set(i,l),l}function lr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn;const t=Hn.get(e);if(!t&&e===qn&&Vt())return or();if(!t)throw nr.create("no-app",{appName:e});return t}function cr(){return Array.from(Hn.values())}async function ur(e){let t=!1;const n=e.name;if(Hn.has(n))t=!0,Hn.delete(n);else if(Wn.has(n)){e.decRefCount()<=0&&(Wn.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function hr(e,t,n){var r;let i=null!==(r=Gn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void zn.warn(e.join(" "))}Jn(new hn("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function dr(e,t){if(null!==e&&"function"!==typeof e)throw nr.create("invalid-log-argument");!function(e,t){for(const n of mn){let r=null;t&&t.level&&(r=vn[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:gn[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function fr(e){var t;t=e,mn.forEach((e=>{e.setLogLevel(t)}))}const pr="firebase-heartbeat-database",mr=1,gr="firebase-heartbeat-store";let vr=null;function yr(){return vr||(vr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Pn(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Pn(o.result),e.oldVersion,e.newVersion,Pn(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(pr,mr,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(gr)}catch(Rx){console.warn(Rx)}}}).catch((e=>{throw nr.create("idb-open",{originalErrorMessage:e.message})}))),vr}async function wr(e,t){try{const n=(await yr()).transaction(gr,"readwrite"),r=n.objectStore(gr);await r.put(t,br(e)),await n.done}catch(Rx){if(Rx instanceof Xt)zn.warn(Rx.message);else{const t=nr.create("idb-set",{originalErrorMessage:null===Rx||void 0===Rx?void 0:Rx.message});zn.warn(t.message)}}}function br(e){return"".concat(e.name,"!").concat(e.options.appId)}class _r{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Sr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Er();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Er(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Ir(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ir(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Lt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Er(){return(new Date).toISOString().substring(0,10)}class Sr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Jt()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await yr()).transaction(gr),n=await t.objectStore(gr).get(br(e));return await t.done,n}catch(Rx){if(Rx instanceof Xt)zn.warn(Rx.message);else{const t=nr.create("idb-get",{originalErrorMessage:null===Rx||void 0===Rx?void 0:Rx.message});zn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ir(e){return Lt(JSON.stringify({version:2,heartbeats:e})).length}var Tr;Tr="",Jn(new hn("platform-logger",(e=>new jn(e)),"PRIVATE")),Jn(new hn("heartbeat",(e=>new _r(e)),"PRIVATE")),hr(Vn,Bn,Tr),hr(Vn,Bn,"esm2017"),hr("fire-js","");class kr{constructor(e,t){this._delegate=e,this.firebase=t,Qn(e,new hn("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),ur(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qn;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qn;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Qn(this._delegate,e)}_addOrOverwriteComponent(e){Yn(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Cr=new $t("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const xr=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=or(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(en(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:hr,setLogLevel:fr,onLog:dr,apps:null,SDK_VERSION:sr,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Jn(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Cr.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Ft(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!en(n,e=e||qn))throw Cr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(kr);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ft(n,e)},createSubscribe:an,ErrorFactory:$t,deepExtend:Ft}),n}(),Nr=new _n("@firebase/app-compat");if(Ht()&&void 0!==self.firebase){Nr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Nr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ar=xr;!function(e){hr("@firebase/app-compat","0.2.31",e)}();Ar.registerVersion("firebase","10.11.0","app-compat");var Rr,Dr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Pr={},Or=Or||{},Lr=Dr||self;function Mr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Fr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ur="closure_uid_"+(1e9*Math.random()>>>0),jr=0;function Vr(e,t,n){return e.call.apply(e.bind,arguments)}function Br(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function zr(e,t,n){return(zr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vr:Br).apply(null,arguments)}function qr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Gr(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Hr(){this.s=this.s,this.o=this.o}Hr.prototype.s=!1,Hr.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Ur)&&e[Ur]||(e[Ur]=++jr))},Hr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Wr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Kr(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Qr(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Mr(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Yr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Yr.prototype.h=function(){this.defaultPrevented=!0};var Jr=function(){if(!Lr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Lr.addEventListener("test",e,t),Lr.removeEventListener("test",e,t)}catch(n){}return e}();function Xr(e){return/^[\s\xa0]*$/.test(e)}function $r(){var e=Lr.navigator;return e&&(e=e.userAgent)?e:""}function Zr(e){return-1!=$r().indexOf(e)}function ei(e){return ei[" "](e),e}ei[" "]=function(){};var ti,ni,ri=Zr("Opera"),ii=Zr("Trident")||Zr("MSIE"),si=Zr("Edge"),oi=si||ii,ai=Zr("Gecko")&&!(-1!=$r().toLowerCase().indexOf("webkit")&&!Zr("Edge"))&&!(Zr("Trident")||Zr("MSIE"))&&!Zr("Edge"),li=-1!=$r().toLowerCase().indexOf("webkit")&&!Zr("Edge");function ci(){var e=Lr.document;return e?e.documentMode:void 0}e:{var ui="",hi=function(){var e=$r();return ai?/rv:([^\);]+)(\)|;)/.exec(e):si?/Edge\/([\d\.]+)/.exec(e):ii?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):li?/WebKit\/(\S+)/.exec(e):ri?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(hi&&(ui=hi?hi[1]:""),ii){var di=ci();if(null!=di&&di>parseFloat(ui)){ti=String(di);break e}}ti=ui}if(Lr.document&&ii){var fi=ci();ni=fi||(parseInt(ti,10)||void 0)}else ni=void 0;var pi=ni;function mi(e,t){if(Yr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ai){e:{try{ei(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:gi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&mi.$.h.call(this)}}Gr(mi,Yr);var gi={2:"touch",3:"pen",4:"mouse"};mi.prototype.h=function(){mi.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var vi="closure_listenable_"+(1e6*Math.random()|0),yi=0;function wi(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++yi,this.fa=this.ia=!1}function bi(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function _i(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Ei(e){const t={};for(const n in e)t[n]=e[n];return t}const Si="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ii(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Si.length;t++)n=Si[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ti(e){this.src=e,this.g={},this.h=0}function ki(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Wr(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(bi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ci(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Ti.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Ci(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new wi(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var xi="closure_lm_"+(1e6*Math.random()|0),Ni={};function Ai(e,t,n,r,i){if(r&&r.once)return Di(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Ai(e,t[s],n,r,i);return null}return n=ji(n),e&&e[vi]?e.O(t,n,Fr(r)?!!r.capture:!!r,i):Ri(e,t,n,!1,r,i)}function Ri(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Fr(i)?!!i.capture:!!i,a=Fi(e);if(a||(e[xi]=a=new Ti(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Mi;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Jr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Li(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Di(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Di(e,t[s],n,r,i);return null}return n=ji(n),e&&e[vi]?e.P(t,n,Fr(r)?!!r.capture:!!r,i):Ri(e,t,n,!0,r,i)}function Pi(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Pi(e,t[s],n,r,i);else r=Fr(r)?!!r.capture:!!r,n=ji(n),e&&e[vi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ci(s=e.g[t],n,r,i))&&(bi(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Fi(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ci(t,n,r,i)),(n=-1<e?t[e]:null)&&Oi(n))}function Oi(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[vi])ki(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Li(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Fi(t))?(ki(n,e),0==n.h&&(n.src=null,t[xi]=null)):bi(e)}}}function Li(e){return e in Ni?Ni[e]:Ni[e]="on"+e}function Mi(e,t){if(e.fa)e=!0;else{t=new mi(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Oi(e),e=n.call(r,t)}return e}function Fi(e){return(e=e[xi])instanceof Ti?e:null}var Ui="__closure_events_fn_"+(1e9*Math.random()>>>0);function ji(e){return"function"===typeof e?e:(e[Ui]||(e[Ui]=function(t){return e.handleEvent(t)}),e[Ui])}function Vi(){Hr.call(this),this.i=new Ti(this),this.S=this,this.J=null}function Bi(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Yr(t,e);else if(t instanceof Yr)t.target=t.target||e;else{var i=t;Ii(t=new Yr(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=zi(o,r,!0,t)&&i}if(i=zi(o=t.g=e,r,!0,t)&&i,i=zi(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=zi(o=t.g=n[s],r,!1,t)&&i}function zi(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&ki(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Gr(Vi,Hr),Vi.prototype[vi]=!0,Vi.prototype.removeEventListener=function(e,t,n,r){Pi(this,e,t,n,r)},Vi.prototype.N=function(){if(Vi.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)bi(n[r]);delete t.g[e],t.h--}}this.J=null},Vi.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Vi.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var qi=Lr.JSON.stringify;function Gi(){var e=Xi;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Hi=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Wi),(e=>e.reset()));class Wi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ki(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Qi(e){Lr.setTimeout((()=>{throw e}),0)}let Yi,Ji=!1,Xi=new class{constructor(){this.h=this.g=null}add(e,t){const n=Hi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},$i=()=>{const e=Lr.Promise.resolve(void 0);Yi=()=>{e.then(Zi)}};var Zi=()=>{for(var e;e=Gi();){try{e.h.call(e.g)}catch(n){Qi(n)}var t=Hi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ji=!1};function es(e,t){Vi.call(this),this.h=e||1,this.g=t||Lr,this.j=zr(this.qb,this),this.l=Date.now()}function ts(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function ns(e,t,n){if("function"===typeof e)n&&(e=zr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=zr(e.handleEvent,e)}return 2147483647<Number(t)?-1:Lr.setTimeout(e,t||0)}function rs(e){e.g=ns((()=>{e.g=null,e.i&&(e.i=!1,rs(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Gr(es,Vi),(Rr=es.prototype).ga=!1,Rr.T=null,Rr.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Bi(this,"tick"),this.ga&&(ts(this),this.start()))}},Rr.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Rr.N=function(){es.$.N.call(this),ts(this),delete this.g};class is extends Hr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:rs(this)}N(){super.N(),this.g&&(Lr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ss(e){Hr.call(this),this.h=e,this.g={}}Gr(ss,Hr);var os=[];function as(e,t,n,r){Array.isArray(n)||(n&&(os[0]=n.toString()),n=os);for(var i=0;i<n.length;i++){var s=Ai(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function ls(e){_i(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Oi(e)}),e),e.g={}}function cs(){this.g=!0}function us(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return qi(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}ss.prototype.N=function(){ss.$.N.call(this),ls(this)},ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cs.prototype.Ea=function(){this.g=!1},cs.prototype.info=function(){};var hs={},ds=null;function fs(){return ds=ds||new Vi}function ps(e){Yr.call(this,hs.Ta,e)}function ms(e){const t=fs();Bi(t,new ps(t))}function gs(e,t){Yr.call(this,hs.STAT_EVENT,e),this.stat=t}function vs(e){const t=fs();Bi(t,new gs(t,e))}function ys(e,t){Yr.call(this,hs.Ua,e),this.size=t}function ws(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Lr.setTimeout((function(){e()}),t)}hs.Ta="serverreachability",Gr(ps,Yr),hs.STAT_EVENT="statevent",Gr(gs,Yr),hs.Ua="timingevent",Gr(ys,Yr);var bs={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_s={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Es(){}function Ss(e){return e.h||(e.h=e.i())}function Is(){}Es.prototype.h=null;var Ts,ks={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Cs(){Yr.call(this,"d")}function xs(){Yr.call(this,"c")}function Ns(){}function As(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ss(this),this.P=Ds,e=oi?125:void 0,this.V=new es(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Rs}function Rs(){this.i=null,this.g="",this.h=!1}Gr(Cs,Yr),Gr(xs,Yr),Gr(Ns,Es),Ns.prototype.g=function(){return new XMLHttpRequest},Ns.prototype.i=function(){return{}},Ts=new Ns;var Ds=45e3,Ps={},Os={};function Ls(e,t,n){e.L=1,e.A=eo(Ys(t)),e.u=n,e.S=!0,Ms(e,null)}function Ms(e,t){e.G=Date.now(),Vs(e),e.B=Ys(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),po(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Rs,e.g=ma(e.l,n?t:null,!e.u),0<e.O&&(e.M=new is(zr(e.Pa,e,e.g),e.O)),as(e.U,e.g,"readystatechange",e.nb),t=e.I?Ei(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),ms(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Fs(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Us(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=js(e,n),r==Os){4==t&&(e.s=4,vs(14),i=!1),us(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ps){e.s=4,vs(15),us(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}us(e.j,e.m,r,null),Hs(e,r)}Fs(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,vs(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),aa(t),t.M=!0,vs(11))):(us(e.j,e.m,n,"[Invalid Chunked Response]"),Gs(e),qs(e))}function js(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Os:(n=Number(t.substring(n,r)),isNaN(n)?Ps:(r+=1)+n>t.length?Os:(t=t.slice(r,r+n),e.o=r+n,t))}function Vs(e){e.Y=Date.now()+e.P,Bs(e,e.P)}function Bs(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=ws(zr(e.lb,e),t)}function zs(e){e.C&&(Lr.clearTimeout(e.C),e.C=null)}function qs(e){0==e.l.H||e.J||ua(e.l,e)}function Gs(e){zs(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,ts(e.V),ls(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Hs(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||_o(n.i,e)))if(!e.K&&_o(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;ca(n),Zo(n)}oa(n),vs(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ws(zr(n.ib,n),6e3));if(1>=bo(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else da(n,11)}else if((e.K||n.g==e)&&ca(n),!Xr(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Eo(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Zs(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=pa(r,r.J?r.pa:null,r.Y),o.K){So(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(zs(a),Vs(a)),r.g=o}else sa(r);0<n.j.length&&ta(n)}else"stop"!=c[0]&&"close"!=c[0]||da(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?da(n,7):$o(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}ms()}catch(c){}}function Ws(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Mr(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Mr(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Mr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Rr=As.prototype).setTimeout=function(e){this.P=e},Rr.nb=function(e){e=e.target;const t=this.M;t&&3==Wo(e)?t.l():this.Pa(e)},Rr.Pa=function(e){try{if(e==this.g)e:{const u=Wo(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||oi||this.g&&(this.h.h||this.g.ja()||Ko(this.g)))){this.J||4!=u||7==t||ms(),zs(this);var n=this.g.da();this.ca=n;t:if(Fs(this)){var r=Ko(this.g);e="";var i=r.length,s=4==Wo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Gs(this),qs(this);var o="";break t}this.h.i=new Lr.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xr(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,vs(12),Gs(this),qs(this);break e}us(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hs(this,n)}this.S?(Us(this,u,o),oi&&this.i&&3==u&&(as(this.U,this.V,"tick",this.mb),this.V.start())):(us(this.j,this.m,o,null),Hs(this,o)),4==u&&Gs(this),this.i&&!this.J&&(4==u?ua(this.l,this):(this.i=!1,Vs(this)))}else(function(e){const t={};e=(e.g&&2<=Wo(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Xr(e[r]))continue;var n=Ki(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,vs(12)):(this.s=0,vs(13)),Gs(this),qs(this)}}}catch(u){}},Rr.mb=function(){if(this.g){var e=Wo(this.g),t=this.g.ja();this.o<t.length&&(zs(this),Us(this,e,t),this.i&&4!=e&&Vs(this))}},Rr.cancel=function(){this.J=!0,Gs(this)},Rr.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(ms(),vs(17)),Gs(this),this.s=2,qs(this)):Bs(this,this.Y-e)};var Ks=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qs(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Qs){this.h=e.h,Js(this,e.j),this.s=e.s,this.g=e.g,Xs(this,e.m),this.l=e.l;var t=e.i,n=new co;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),$s(this,n),this.o=e.o}else e&&(t=String(e).match(Ks))?(this.h=!1,Js(this,t[1]||"",!0),this.s=to(t[2]||""),this.g=to(t[3]||"",!0),Xs(this,t[4]),this.l=to(t[5]||"",!0),$s(this,t[6]||"",!0),this.o=to(t[7]||"")):(this.h=!1,this.i=new co(null,this.h))}function Ys(e){return new Qs(e)}function Js(e,t,n){e.j=n?to(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Xs(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function $s(e,t,n){t instanceof co?(e.i=t,function(e,t){t&&!e.j&&(uo(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ho(this,t),po(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=no(t,ao)),e.i=new co(t,e.h))}function Zs(e,t,n){e.i.set(t,n)}function eo(e){return Zs(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function to(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function no(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ro),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ro(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Qs.prototype.toString=function(){var e=[],t=this.j;t&&e.push(no(t,io,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(no(t,io,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(no(n,"/"==n.charAt(0)?oo:so,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",no(n,lo)),e.join("")};var io=/[#\/\?@]/g,so=/[#\?:]/g,oo=/[#\?]/g,ao=/[#\?@]/g,lo=/#/g;function co(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function uo(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ho(e,t){uo(e),t=mo(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function fo(e,t){return uo(e),t=mo(e,t),e.g.has(t)}function po(e,t,n){ho(e,t),0<n.length&&(e.i=null,e.g.set(mo(e,t),Kr(n)),e.h+=n.length)}function mo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Rr=co.prototype).add=function(e,t){uo(this),this.i=null,e=mo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Rr.forEach=function(e,t){uo(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Rr.ta=function(){uo(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Rr.Z=function(e){uo(this);let t=[];if("string"===typeof e)fo(this,e)&&(t=t.concat(this.g.get(mo(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Rr.set=function(e,t){return uo(this),this.i=null,fo(this,e=mo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Rr.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Rr.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var go=class{constructor(e,t){this.g=e,this.map=t}};function vo(e){this.l=e||yo,Lr.PerformanceNavigationTiming?e=0<(e=Lr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Lr.g&&Lr.g.Ka&&Lr.g.Ka()&&Lr.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var yo=10;function wo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function bo(e){return e.h?1:e.g?e.g.size:0}function _o(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Eo(e,t){e.g?e.g.add(t):e.h=t}function So(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Io(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Kr(e.i)}vo.prototype.cancel=function(){if(this.i=Io(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var To,ko=class{stringify(e){return Lr.JSON.stringify(e,void 0)}parse(e){return Lr.JSON.parse(e,void 0)}};function Co(){this.g=new ko}function xo(e,t,n){const r=n||"";try{Ws(e,(function(e,n){let i=e;Fr(e)&&(i=qi(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(Rx){throw t.push(r+"type="+encodeURIComponent("_badmap")),Rx}}function No(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Ao(e){this.l=e.ec||null,this.j=e.ob||!1}function Ro(e,t){Vi.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Do,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gr(Ao,Es),Ao.prototype.g=function(){return new Ro(this.l,this.j)},Ao.prototype.i=(To={},function(){return To}),Gr(Ro,Vi);var Do=0;function Po(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Oo(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Lo(e)}function Lo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Rr=Ro.prototype).open=function(e,t){if(this.readyState!=Do)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Lo(this)},Rr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Lr).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Rr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Oo(this)),this.readyState=Do},Rr.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Lo(this)),this.g&&(this.readyState=3,Lo(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Lr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Po(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Rr.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Oo(this):Lo(this),3==this.readyState&&Po(this)}},Rr.Za=function(e){this.g&&(this.response=this.responseText=e,Oo(this))},Rr.Ya=function(e){this.g&&(this.response=e,Oo(this))},Rr.ka=function(){this.g&&Oo(this)},Rr.setRequestHeader=function(e,t){this.v.append(e,t)},Rr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Rr.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ro.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Mo=Lr.JSON.parse;function Fo(e){Vi.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Uo,this.L=this.M=!1}Gr(Fo,Vi);var Uo="",jo=/^https?$/i,Vo=["POST","PUT"];function Bo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,zo(e),Go(e)}function zo(e){e.F||(e.F=!0,Bi(e,"complete"),Bi(e,"error"))}function qo(e){if(e.h&&"undefined"!=typeof Or&&(!e.C[1]||4!=Wo(e)||2!=e.da()))if(e.v&&4==Wo(e))ns(e.La,0,e);else if(Bi(e,"readystatechange"),4==Wo(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Ks)[1]||null;!i&&Lr.self&&Lr.self.location&&(i=Lr.self.location.protocol.slice(0,-1)),r=!jo.test(i?i.toLowerCase():"")}n=r}if(n)Bi(e,"complete"),Bi(e,"success");else{e.m=6;try{var s=2<Wo(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",zo(e)}}finally{Go(e)}}}function Go(e,t){if(e.g){Ho(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Bi(e,"ready");try{n.onreadystatechange=r}catch(Rx){}}}function Ho(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Lr.clearTimeout(e.A),e.A=null)}function Wo(e){return e.g?e.g.readyState:0}function Ko(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Uo:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(el){return null}}function Qo(e){let t="";return _i(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Yo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Qo(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Zs(e,t,n))}function Jo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xo(e){this.Ga=0,this.j=[],this.l=new cs,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Jo("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Jo("baseRetryDelayMs",5e3,e),this.hb=Jo("retryDelaySeedMs",1e4,e),this.eb=Jo("forwardChannelMaxRetries",2,e),this.xa=Jo("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new vo(e&&e.concurrentRequestLimit),this.Ja=new Co,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function $o(e){if(ea(e),3==e.H){var t=e.W++,n=Ys(e.I);if(Zs(n,"SID",e.K),Zs(n,"RID",t),Zs(n,"TYPE","terminate"),ra(e,n),(t=new As(e,e.l,t)).L=2,t.A=eo(Ys(n)),n=!1,Lr.navigator&&Lr.navigator.sendBeacon)try{n=Lr.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Lr.Image&&((new Image).src=t.A,n=!0),n||(t.g=ma(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Vs(t)}fa(e)}function Zo(e){e.g&&(aa(e),e.g.cancel(),e.g=null)}function ea(e){Zo(e),e.u&&(Lr.clearTimeout(e.u),e.u=null),ca(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Lr.clearTimeout(e.m),e.m=null)}function ta(e){if(!wo(e.i)&&!e.m){e.m=!0;var t=e.Na;Yi||$i(),Ji||(Yi(),Ji=!0),Xi.add(t,e),e.C=0}}function na(e,t){var n;n=t?t.m:e.W++;const r=Ys(e.I);Zs(r,"SID",e.K),Zs(r,"RID",n),Zs(r,"AID",e.V),ra(e,r),e.o&&e.s&&Yo(r,e.o,e.s),n=new As(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=ia(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Eo(e.i,n),Ls(n,r,t)}function ra(e,t){e.na&&_i(e.na,(function(e,n){Zs(t,n,e)})),e.h&&Ws({},(function(e,n){Zs(t,n,e)}))}function ia(e,t,n){n=Math.min(e.j.length,n);var r=e.h?zr(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{xo(a,e,"req"+n+"_")}catch(gc){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function sa(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Yi||$i(),Ji||(Yi(),Ji=!0),Xi.add(t,e),e.A=0}}function oa(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ws(zr(e.Ma,e),ha(e,e.A)),e.A++,!0)}function aa(e){null!=e.B&&(Lr.clearTimeout(e.B),e.B=null)}function la(e){e.g=new As(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ys(e.wa);Zs(t,"RID","rpc"),Zs(t,"SID",e.K),Zs(t,"AID",e.V),Zs(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Zs(t,"TO",e.qa),Zs(t,"TYPE","xmlhttp"),ra(e,t),e.o&&e.s&&Yo(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=eo(Ys(t)),n.u=null,n.S=!0,Ms(n,e)}function ca(e){null!=e.v&&(Lr.clearTimeout(e.v),e.v=null)}function ua(e,t){var n=null;if(e.g==t){ca(e),aa(e),e.g=null;var r=2}else{if(!_o(e.i,t))return;n=t.F,So(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Bi(r=fs(),new ys(r,n)),ta(e)}else sa(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(bo(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=ws(zr(e.Na,e,t),ha(e,e.C)),e.C++,!0))}(e,t)||2==r&&oa(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:da(e,5);break;case 4:da(e,10);break;case 3:da(e,6);break;default:da(e,2)}}function ha(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function da(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=zr(e.pb,e);n||(n=new Qs("//www.google.com/images/cleardot.gif"),Lr.location&&"http"==Lr.location.protocol||Js(n,"https"),eo(n)),function(e,t){const n=new cs;if(Lr.Image){const r=new Image;r.onload=qr(No,n,r,"TestLoadImage: loaded",!0,t),r.onerror=qr(No,n,r,"TestLoadImage: error",!1,t),r.onabort=qr(No,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=qr(No,n,r,"TestLoadImage: timeout",!1,t),Lr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else vs(2);e.H=0,e.h&&e.h.za(t),fa(e),ea(e)}function fa(e){if(e.H=0,e.ma=[],e.h){const t=Io(e.i);0==t.length&&0==e.j.length||(Qr(e.ma,t),Qr(e.ma,e.j),e.i.i.length=0,Kr(e.j),e.j.length=0),e.h.ya()}}function pa(e,t,n){var r=n instanceof Qs?Ys(n):new Qs(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Xs(r,r.m);else{var i=Lr.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Qs(null);r&&Js(s,r),t&&(s.g=t),i&&Xs(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Zs(r,n,t),Zs(r,"VER",e.ra),ra(e,r),r}function ma(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Fo(new Ao({ob:n})):new Fo(e.va)).Oa(e.J),t}function ga(){}function va(){if(ii&&!(10<=Number(pi)))throw Error("Environmental error: no available transport.")}function ya(e,t){Vi.call(this),this.g=new Xo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Xr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Xr(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _a(this)}function wa(e){Cs.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ba(){xs.call(this),this.status=1}function _a(e){this.g=e}function Ea(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Sa(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Ia(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Rr=Fo.prototype).Oa=function(e){this.M=e},Rr.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ts.g(),this.C=this.u?Ss(this.u):Ss(Ts),this.g.onreadystatechange=zr(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Bo(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Lr.FormData&&e instanceof Lr.FormData,!(0<=Wr(Vo,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ho(this),0<this.B&&((this.L=function(e){return ii&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zr(this.ua,this)):this.A=ns(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Bo(this,s)}},Rr.ua=function(){"undefined"!=typeof Or&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bi(this,"timeout"),this.abort(8))},Rr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Bi(this,"complete"),Bi(this,"abort"),Go(this))},Rr.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Go(this,!0)),Fo.$.N.call(this)},Rr.La=function(){this.s||(this.G||this.v||this.l?qo(this):this.kb())},Rr.kb=function(){qo(this)},Rr.isActive=function(){return!!this.g},Rr.da=function(){try{return 2<Wo(this)?this.g.status:-1}catch(To){return-1}},Rr.ja=function(){try{return this.g?this.g.responseText:""}catch(To){return""}},Rr.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Mo(t)}},Rr.Ia=function(){return this.m},Rr.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Rr=Xo.prototype).ra=8,Rr.H=1,Rr.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new As(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Ei(s),Ii(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=ia(this,i,t),Zs(n=Ys(this.I),"RID",e),Zs(n,"CVER",22),this.F&&Zs(n,"X-HTTP-Session-Id",this.F),ra(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Qo(s)))+"&"+t:this.o&&Yo(n,this.o,s)),Eo(this.i,i),this.bb&&Zs(n,"TYPE","init"),this.P?(Zs(n,"$req",t),Zs(n,"SID","null"),i.aa=!0,Ls(i,n,null)):Ls(i,n,t),this.H=2}}else 3==this.H&&(e?na(this,e):0==this.j.length||wo(this.i)||na(this))},Rr.Ma=function(){if(this.u=null,la(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ws(zr(this.jb,this),e)}},Rr.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,vs(10),Zo(this),la(this))},Rr.ib=function(){null!=this.v&&(this.v=null,Zo(this),oa(this),vs(19))},Rr.pb=function(e){e?(this.l.info("Successfully pinged google.com"),vs(2)):(this.l.info("Failed to ping google.com"),vs(1))},Rr.isActive=function(){return!!this.h&&this.h.isActive(this)},(Rr=ga.prototype).Ba=function(){},Rr.Aa=function(){},Rr.za=function(){},Rr.ya=function(){},Rr.isActive=function(){return!0},Rr.Va=function(){},va.prototype.g=function(e,t){return new ya(e,t)},Gr(ya,Vi),ya.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;vs(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=pa(e,null,e.Y),ta(e)},ya.prototype.close=function(){$o(this.g)},ya.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=qi(e),e=n);t.j.push(new go(t.fb++,e)),3==t.H&&ta(t)},ya.prototype.N=function(){this.g.h=null,delete this.j,$o(this.g),delete this.g,ya.$.N.call(this)},Gr(wa,Cs),Gr(ba,xs),Gr(_a,ga),_a.prototype.Ba=function(){Bi(this.g,"a")},_a.prototype.Aa=function(e){Bi(this.g,new wa(e))},_a.prototype.za=function(e){Bi(this.g,new ba)},_a.prototype.ya=function(){Bi(this.g,"b")},Gr(Ea,(function(){this.blockSize=-1})),Ea.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ea.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Sa(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Sa(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Sa(this,r),i=0;break}}this.h=i,this.i+=t},Ea.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Ta={};function ka(e){return-128<=e&&128>e?function(e,t){var n=Ta;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Ia([0|e],0>e?-1:0)})):new Ia([0|e],0>e?-1:0)}function Ca(e){if(isNaN(e)||!isFinite(e))return Na;if(0>e)return Oa(Ca(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=xa;return new Ia(t,0)}var xa=4294967296,Na=ka(0),Aa=ka(1),Ra=ka(16777216);function Da(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Pa(e){return-1==e.h}function Oa(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Ia(n,~e.h).add(Aa)}function La(e,t){return e.add(Oa(t))}function Ma(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Fa(e,t){this.g=e,this.h=t}function Ua(e,t){if(Da(t))throw Error("division by zero");if(Da(e))return new Fa(Na,Na);if(Pa(e))return t=Ua(Oa(e),t),new Fa(Oa(t.g),Oa(t.h));if(Pa(t))return t=Ua(e,Oa(t)),new Fa(Oa(t.g),t.h);if(30<e.g.length){if(Pa(e)||Pa(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Aa,r=t;0>=r.X(e);)n=ja(n),r=ja(r);var i=Va(n,1),s=Va(r,1);for(r=Va(r,2),n=Va(n,2);!Da(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Va(r,1),n=Va(n,1)}return t=La(e,i.R(t)),new Fa(i,t)}for(i=Na;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Ca(n)).R(t);Pa(o)||0<o.X(e);)o=(s=Ca(n-=r)).R(t);Da(s)&&(s=Aa),i=i.add(s),e=La(e,o)}return new Fa(i,e)}function ja(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Ia(n,e.h)}function Va(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Ia(i,e.h)}(Rr=Ia.prototype).ea=function(){if(Pa(this))return-Oa(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:xa+r)*t,t*=xa}return e},Rr.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Da(this))return"0";if(Pa(this))return"-"+Oa(this).toString(e);for(var t=Ca(Math.pow(e,6)),n=this,r="";;){var i=Ua(n,t).g,s=((0<(n=La(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Da(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Rr.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Rr.X=function(e){return Pa(e=La(this,e))?-1:Da(e)?0:1},Rr.abs=function(){return Pa(this)?Oa(this):this},Rr.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ia(n,-2147483648&n[n.length-1]?-1:0)},Rr.R=function(e){if(Da(this)||Da(e))return Na;if(Pa(this))return Pa(e)?Oa(this).R(Oa(e)):Oa(Oa(this).R(e));if(Pa(e))return Oa(this.R(Oa(e)));if(0>this.X(Ra)&&0>e.X(Ra))return Ca(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,Ma(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Ma(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Ma(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Ma(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Ia(n,0)},Rr.gb=function(e){return Ua(this,e).h},Rr.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Ia(n,this.h&e.h)},Rr.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Ia(n,this.h|e.h)},Rr.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Ia(n,this.h^e.h)},va.prototype.createWebChannel=va.prototype.g,ya.prototype.send=ya.prototype.u,ya.prototype.open=ya.prototype.m,ya.prototype.close=ya.prototype.close,bs.NO_ERROR=0,bs.TIMEOUT=8,bs.HTTP_ERROR=6,_s.COMPLETE="complete",Is.EventType=ks,ks.OPEN="a",ks.CLOSE="b",ks.ERROR="c",ks.MESSAGE="d",Vi.prototype.listen=Vi.prototype.O,Fo.prototype.listenOnce=Fo.prototype.P,Fo.prototype.getLastError=Fo.prototype.Sa,Fo.prototype.getLastErrorCode=Fo.prototype.Ia,Fo.prototype.getStatus=Fo.prototype.da,Fo.prototype.getResponseJson=Fo.prototype.Wa,Fo.prototype.getResponseText=Fo.prototype.ja,Fo.prototype.send=Fo.prototype.ha,Fo.prototype.setWithCredentials=Fo.prototype.Oa,Ea.prototype.digest=Ea.prototype.l,Ea.prototype.reset=Ea.prototype.reset,Ea.prototype.update=Ea.prototype.j,Ia.prototype.add=Ia.prototype.add,Ia.prototype.multiply=Ia.prototype.R,Ia.prototype.modulo=Ia.prototype.gb,Ia.prototype.compare=Ia.prototype.X,Ia.prototype.toNumber=Ia.prototype.ea,Ia.prototype.toString=Ia.prototype.toString,Ia.prototype.getBits=Ia.prototype.D,Ia.fromNumber=Ca,Ia.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Oa(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Ca(Math.pow(n,8)),i=Na,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Ca(Math.pow(n,o)),i=i.R(o).add(Ca(a))):i=(i=i.R(r)).add(Ca(a))}return i};var Ba=Pr.createWebChannelTransport=function(){return new va},za=Pr.getStatEventTarget=function(){return fs()},qa=Pr.ErrorCode=bs,Ga=Pr.EventType=_s,Ha=Pr.Event=hs,Wa=Pr.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ka=(Pr.FetchXmlHttpFactory=Ao,Pr.WebChannel=Is),Qa=Pr.XhrIo=Fo,Ya=Pr.Md5=Ea,Ja=Pr.Integer=Ia;const Xa="@firebase/firestore";class $a{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$a.UNAUTHENTICATED=new $a(null),$a.GOOGLE_CREDENTIALS=new $a("google-credentials-uid"),$a.FIRST_PARTY=new $a("first-party-uid"),$a.MOCK_USER=new $a("mock-user");let Za="10.11.0";const el=new _n("@firebase/firestore");function tl(){return el.logLevel}function nl(e){if(el.logLevel<=gn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(sl);el.debug("Firestore (".concat(Za,"): ").concat(e),...i)}}function rl(e){if(el.logLevel<=gn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(sl);el.error("Firestore (".concat(Za,"): ").concat(e),...i)}}function il(e){if(el.logLevel<=gn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(sl);el.warn("Firestore (".concat(Za,"): ").concat(e),...i)}}function sl(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ol(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Za,") INTERNAL ASSERTION FAILED: ")+e;throw rl(t),new Error(t)}function al(e,t){e||ol()}function ll(e,t){return e}const cl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ul extends Xt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class hl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class dl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class fl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($a.UNAUTHENTICATED)))}shutdown(){}}class pl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ml{constructor(e){this.t=e,this.currentUser=$a.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new hl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new hl,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{nl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(nl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new hl)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(nl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(al("string"==typeof t.accessToken),new dl(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return al(null===e||"string"==typeof e),new $a(e)}}class gl{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=$a.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vl{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new gl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t($a.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wl{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&nl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,nl("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{nl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):nl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(al("string"==typeof e.token),this.R=e.token,new yl(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function bl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class _l{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=bl(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function El(e,t){return e<t?-1:e>t?1:0}function Sl(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Il(e){return e+"\0"}class Tl{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ul(cl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ul(cl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ul(cl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ul(cl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tl.fromMillis(Date.now())}static fromDate(e){return Tl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Tl(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?El(this.nanoseconds,e.nanoseconds):El(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class kl{constructor(e){this.timestamp=e}static fromTimestamp(e){return new kl(e)}static min(){return new kl(new Tl(0,0))}static max(){return new kl(new Tl(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Cl{constructor(e,t,n){void 0===t?t=0:t>e.length&&ol(),void 0===n?n=e.length-t:n>e.length-t&&ol(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Cl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cl?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class xl extends Cl{construct(e,t,n){return new xl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ul(cl.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new xl(e)}static emptyPath(){return new xl([])}}const Nl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Al extends Cl{construct(e,t,n){return new Al(e,t,n)}static isValidIdentifier(e){return Nl.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Al.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Al(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ul(cl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ul(cl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ul(cl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ul(cl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Al(t)}static emptyPath(){return new Al([])}}class Rl{constructor(e){this.path=e}static fromPath(e){return new Rl(xl.fromString(e))}static fromName(e){return new Rl(xl.fromString(e).popFirst(5))}static empty(){return new Rl(xl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return xl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Rl(new xl(e.slice()))}}class Dl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Pl(e){return e.fields.find((e=>2===e.kind))}function Ol(e){return e.fields.filter((e=>2!==e.kind))}Dl.UNKNOWN_ID=-1;class Ll{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ml{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ml(0,jl.min())}}function Fl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=kl.fromTimestamp(1e9===r?new Tl(n+1,0):new Tl(n,r));return new jl(i,Rl.empty(),t)}function Ul(e){return new jl(e.readTime,e.key,-1)}class jl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new jl(kl.min(),Rl.empty(),-1)}static max(){return new jl(kl.max(),Rl.empty(),-1)}}function Vl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Rl.comparator(e.documentKey,t.documentKey),0!==n?n:El(e.largestBatchId,t.largestBatchId))}const Bl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ql(e){if(e.code!==cl.FAILED_PRECONDITION||e.message!==Bl)throw e;nl("LocalStore","Unexpectedly lost primary lease")}class Gl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ol(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Gl(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Gl?t:Gl.resolve(t)}catch(e){return Gl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Gl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Gl.reject(t)}static resolve(e){return new Gl(((t,n)=>{t(e)}))}static reject(e){return new Gl(((t,n)=>{n(e)}))}static waitFor(e){return new Gl(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Gl.resolve(!1);for(const n of e)t=t.next((e=>e?Gl.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Gl(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Gl(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Hl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new hl,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ql(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Zl(t.target.error);this.V.reject(new Ql(e,n))}}static open(e,t,n,r){try{return new Hl(t,e.transaction(r,n))}catch(e){throw new Ql(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(nl("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Jl(t)}}class Wl{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Wl.S(qt())&&rl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return nl("SimpleDb","Removing database:",e),Xl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Jt())return!1;if(Wl.C())return!0;const e=qt(),t=Wl.S(e),n=0<t&&t<10,r=Wl.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(nl("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ql(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new ul(cl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new ul(cl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ql(e,r))},r.onupgradeneeded=e=>{nl("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{nl("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=Hl.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Gl.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(nl("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Kl{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Xl(this.k.delete())}}class Ql extends ul{constructor(e,t){super(cl.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Yl(e){return"IndexedDbTransactionError"===e.name}class Jl{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(nl("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(nl("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Xl(n)}add(e){return nl("SimpleDb","ADD",this.store.name,e,e),Xl(this.store.add(e))}get(e){return Xl(this.store.get(e)).next((t=>(void 0===t&&(t=null),nl("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return nl("SimpleDb","DELETE",this.store.name,e),Xl(this.store.delete(e))}count(){return nl("SimpleDb","COUNT",this.store.name),Xl(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Gl(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Gl(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){nl("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new Gl(((n,r)=>{t.onerror=e=>{const t=Zl(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new Gl(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Kl(i),o=t(i.primaryKey,i.value,s);if(o instanceof Gl){const e=o.catch((e=>(s.done(),Gl.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>Gl.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Xl(e){return new Gl(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Zl(e.target.error);n(t)}}))}let $l=!1;function Zl(e){const t=Wl.S(qt());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new ul("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return $l||($l=!0,setTimeout((()=>{throw e}),0)),e}}return e}class ec{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){nl("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{nl("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){Yl(e)?nl("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await ql(e)}await this.ee(6e4)}))}}class tc{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return Gl.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return nl("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(nl("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Ul(t);Vl(r,n)>0&&(n=r)})),new jl(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class nc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function rc(e){return null==e}function ic(e){return 0===e&&1/e==-1/0}function sc(e){return"number"==typeof e&&Number.isInteger(e)&&!ic(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function oc(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=lc(t)),t=ac(e.get(n),t);return lc(t)}function ac(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function lc(e){return e+"\x01\x01"}function cc(e){const t=e.length;if(al(t>=2),2===t)return al("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),xl.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&ol(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:ol()}s=t+2}return new xl(r)}nc._e=-1;const uc=["userId","batchId"];function hc(e,t){return[e,oc(t)]}function dc(e,t,n){return[e,oc(t),n]}const fc={},pc=["prefixPath","collectionGroup","readTime","documentId"],mc=["prefixPath","collectionGroup","documentId"],gc=["collectionGroup","readTime","prefixPath","documentId"],vc=["canonicalId","targetId"],yc=["targetId","path"],wc=["path","targetId"],bc=["collectionId","parent"],_c=["indexId","uid"],Ec=["uid","sequenceNumber"],Sc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ic=["indexId","uid","orderedDocumentKey"],Tc=["userId","collectionPath","documentId"],kc=["userId","collectionPath","largestBatchId"],Cc=["userId","collectionGroup","largestBatchId"],xc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Nc=[...xc,"documentOverlays"],Ac=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Rc=Ac,Dc=[...Rc,"indexConfiguration","indexState","indexEntries"],Pc=Dc;class Oc extends zl{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Lc(e,t){const n=ll(e);return Wl.M(n.ae,t)}function Mc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Uc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class jc{constructor(e,t){this.comparator=e,this.root=t||Bc.EMPTY}insert(e,t){return new jc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bc.BLACK,null,null))}remove(e){return new jc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vc(this.root,e,this.comparator,!0)}}class Vc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bc{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Bc.RED,this.left=null!=r?r:Bc.EMPTY,this.right=null!=i?i:Bc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Bc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Bc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Bc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ol();if(this.right.isRed())throw ol();const e=this.left.check();if(e!==this.right.check())throw ol();return e+(this.isRed()?0:1)}}Bc.EMPTY=null,Bc.RED=!0,Bc.BLACK=!1,Bc.EMPTY=new class{constructor(){this.size=0}get key(){throw ol()}get value(){throw ol()}get color(){throw ol()}get left(){throw ol()}get right(){throw ol()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Bc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zc{constructor(e){this.comparator=e,this.data=new jc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qc(this.data.getIterator())}getIteratorFrom(e){return new qc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof zc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new zc(this.comparator);return t.data=e,t}}class qc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Gc(e){return e.hasNext()?e.getNext():void 0}class Hc{constructor(e){this.fields=e,e.sort(Al.comparator)}static empty(){return new Hc([])}unionWith(e){let t=new zc(Al.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Hc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sl(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Wc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Kc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Wc("Invalid base64 string: "+e):e}}(e);return new Kc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Kc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return El(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kc.EMPTY_BYTE_STRING=new Kc("");const Qc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yc(e){if(al(!!e),"string"==typeof e){let t=0;const n=Qc.exec(e);if(al(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Jc(e.seconds),nanos:Jc(e.nanos)}}function Jc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Xc(e){return"string"==typeof e?Kc.fromBase64String(e):Kc.fromUint8Array(e)}function $c(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zc(e){const t=e.mapValue.fields.__previous_value__;return $c(t)?Zc(t):t}function eu(e){const t=Yc(e.mapValue.fields.__local_write_time__.timestampValue);return new Tl(t.seconds,t.nanos)}class tu{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class nu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}const ru={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},iu={nullValue:"NULL_VALUE"};function su(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?$c(e)?4:wu(e)?9007199254740991:10:ol()}function ou(e,t){if(e===t)return!0;const n=su(e);if(n!==su(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return eu(e).isEqual(eu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Yc(e.timestampValue),r=Yc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Xc(e.bytesValue).isEqual(Xc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Jc(e.geoPointValue.latitude)===Jc(t.geoPointValue.latitude)&&Jc(e.geoPointValue.longitude)===Jc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Jc(e.integerValue)===Jc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Jc(e.doubleValue),r=Jc(t.doubleValue);return n===r?ic(n)===ic(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Sl(e.arrayValue.values||[],t.arrayValue.values||[],ou);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Mc(n)!==Mc(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ou(n[i],r[i])))return!1;return!0}(e,t);default:return ol()}}function au(e,t){return void 0!==(e.values||[]).find((e=>ou(e,t)))}function lu(e,t){if(e===t)return 0;const n=su(e),r=su(t);if(n!==r)return El(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return El(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Jc(e.integerValue||e.doubleValue),r=Jc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return cu(e.timestampValue,t.timestampValue);case 4:return cu(eu(e),eu(t));case 5:return El(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Xc(e),r=Xc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=El(n[i],r[i]);if(0!==e)return e}return El(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=El(Jc(e.latitude),Jc(t.latitude));return 0!==n?n:El(Jc(e.longitude),Jc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=lu(n[i],r[i]);if(e)return e}return El(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ru.mapValue&&t===ru.mapValue)return 0;if(e===ru.mapValue)return 1;if(t===ru.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=El(r[o],s[o]);if(0!==e)return e;const t=lu(n[r[o]],i[s[o]]);if(0!==t)return t}return El(r.length,s.length)}(e.mapValue,t.mapValue);default:throw ol()}}function cu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return El(e,t);const n=Yc(e),r=Yc(t),i=El(n.seconds,r.seconds);return 0!==i?i:El(n.nanos,r.nanos)}function uu(e){return hu(e)}function hu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Yc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Xc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Rl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=hu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(hu(e.fields[i]));return n+"}"}(e.mapValue):ol()}function du(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function fu(e){return!!e&&"integerValue"in e}function pu(e){return!!e&&"arrayValue"in e}function mu(e){return!!e&&"nullValue"in e}function gu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function vu(e){return!!e&&"mapValue"in e}function yu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Fc(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=yu(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=yu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function wu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function bu(e){return"nullValue"in e?iu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?du(nu.empty(),Rl.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ol()}function _u(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?du(nu.empty(),Rl.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ru:ol()}function Eu(e,t){const n=lu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Su(e,t){const n=lu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Iu{constructor(e){this.value=e}static empty(){return new Iu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!vu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yu(t)}setAll(e){let t=Al.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=yu(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());vu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ou(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];vu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Fc(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Iu(yu(this.value))}}function Tu(e){const t=[];return Fc(e.fields,((e,n)=>{const r=new Al([e]);if(vu(n)){const e=Tu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Hc(t)}class ku{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ku(e,0,kl.min(),kl.min(),kl.min(),Iu.empty(),0)}static newFoundDocument(e,t,n,r){return new ku(e,1,t,kl.min(),n,r,0)}static newNoDocument(e,t){return new ku(e,2,t,kl.min(),kl.min(),Iu.empty(),0)}static newUnknownDocument(e,t){return new ku(e,3,t,kl.min(),kl.min(),Iu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(kl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Iu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Iu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ku&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ku(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Cu{constructor(e,t){this.position=e,this.inclusive=t}}function xu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Rl.comparator(Rl.fromName(o.referenceValue),n.key):lu(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Nu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ou(e.position[n],t.position[n]))return!1;return!0}class Au{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ru(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Du{}class Pu extends Du{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new qu(e,t,n):"array-contains"===t?new Ku(e,n):"in"===t?new Qu(e,n):"not-in"===t?new Yu(e,n):"array-contains-any"===t?new Ju(e,n):new Pu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Gu(e,n):new Hu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(lu(t,this.value)):null!==t&&su(this.value)===su(t)&&this.matchesComparison(lu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ol()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ou extends Du{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Ou(e,t)}matches(e){return Lu(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Lu(e){return"and"===e.op}function Mu(e){return"or"===e.op}function Fu(e){return Uu(e)&&Lu(e)}function Uu(e){for(const t of e.filters)if(t instanceof Ou)return!1;return!0}function ju(e){if(e instanceof Pu)return e.field.canonicalString()+e.op.toString()+uu(e.value);if(Fu(e))return e.filters.map((e=>ju(e))).join(",");{const t=e.filters.map((e=>ju(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Vu(e,t){return e instanceof Pu?function(e,t){return t instanceof Pu&&e.op===t.op&&e.field.isEqual(t.field)&&ou(e.value,t.value)}(e,t):e instanceof Ou?function(e,t){return t instanceof Ou&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Vu(n,t.filters[r])),!0)}(e,t):void ol()}function Bu(e,t){const n=e.filters.concat(t);return Ou.create(n,e.op)}function zu(e){return e instanceof Pu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(uu(e.value))}(e):e instanceof Ou?function(e){return e.op.toString()+" {"+e.getFilters().map(zu).join(" ,")+"}"}(e):"Filter"}class qu extends Pu{constructor(e,t,n){super(e,t,n),this.key=Rl.fromName(n.referenceValue)}matches(e){const t=Rl.comparator(e.key,this.key);return this.matchesComparison(t)}}class Gu extends Pu{constructor(e,t){super(e,"in",t),this.keys=Wu("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Hu extends Pu{constructor(e,t){super(e,"not-in",t),this.keys=Wu("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Wu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Rl.fromName(e.referenceValue)))}class Ku extends Pu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pu(t)&&au(t.arrayValue,this.value)}}class Qu extends Pu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&au(this.value.arrayValue,t)}}class Yu extends Pu{constructor(e,t){super(e,"not-in",t)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!au(this.value.arrayValue,t)}}class Ju extends Pu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>au(this.value.arrayValue,e)))}}class Xu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function $u(e){return new Xu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Zu(e){const t=ll(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ju(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),rc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>uu(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>uu(e))).join(",")),t.ce=e}return t.ce}function eh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ru(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Vu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Nu(e.startAt,t.startAt)&&Nu(e.endAt,t.endAt)}function th(e){return Rl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function nh(e,t){return e.filters.filter((e=>e instanceof Pu&&e.field.isEqual(t)))}function rh(e,t,n){let r=iu,i=!0;for(const s of nh(e,t)){let e=iu,t=!0;switch(s.op){case"<":case"<=":e=bu(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=iu}Eu({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Eu({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function ih(e,t,n){let r=ru,i=!0;for(const s of nh(e,t)){let e=ru,t=!0;switch(s.op){case">=":case">":e=_u(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=ru}Su({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Su({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class sh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function oh(e,t,n,r,i,s,o,a){return new sh(e,t,n,r,i,s,o,a)}function ah(e){return new sh(e)}function lh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ch(e){return null!==e.collectionGroup}function uh(e){const t=ll(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new zc(Al.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Au(r,n))})),e.has(Al.keyField().canonicalString())||t.le.push(new Au(Al.keyField(),n))}return t.le}function hh(e){const t=ll(e);return t.he||(t.he=dh(t,uh(e))),t.he}function dh(e,t){if("F"===e.limitType)return $u(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Au(e.field,t)}));const n=e.endAt?new Cu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Cu(e.startAt.position,e.startAt.inclusive):null;return $u(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function fh(e,t){const n=e.filters.concat([t]);return new sh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ph(e,t,n){return new sh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function mh(e,t){return eh(hh(e),hh(t))&&e.limitType===t.limitType}function gh(e){return"".concat(Zu(hh(e)),"|lt:").concat(e.limitType)}function vh(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>zu(e))).join(", "),"]")),rc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>uu(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>uu(e))).join(",")),"Target(".concat(t,")")}(hh(e)),"; limitType=").concat(e.limitType,")")}function yh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Rl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of uh(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=xu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,uh(e),t))&&!(e.endAt&&!function(e,t,n){const r=xu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,uh(e),t))}(e,t)}function wh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function bh(e){return(t,n)=>{let r=!1;for(const i of uh(e)){const e=_h(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function _h(e,t,n){const r=e.field.isKeyField()?Rl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?lu(r,i):ol()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ol()}}class Eh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fc(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Uc(this.inner)}size(){return this.innerSize}}const Sh=new jc(Rl.comparator);function Ih(){return Sh}const Th=new jc(Rl.comparator);function kh(){let e=Th;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Ch(e){let t=Th;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function xh(){return Ah()}function Nh(){return Ah()}function Ah(){return new Eh((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Rh=new jc(Rl.comparator),Dh=new zc(Rl.comparator);function Ph(){let e=Dh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Oh=new zc(El);function Lh(){return Oh}function Mh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ic(t)?"-0":t}}function Fh(e){return{integerValue:""+e}}function Uh(e,t){return sc(t)?Fh(t):Mh(e,t)}class jh{constructor(){this._=void 0}}function Vh(e,t,n){return e instanceof qh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&$c(t)&&(t=Zc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Gh?Hh(e,t):e instanceof Wh?Kh(e,t):function(e,t){const n=zh(e,t),r=Yh(n)+Yh(e.Ie);return fu(n)&&fu(e.Ie)?Fh(r):Mh(e.serializer,r)}(e,t)}function Bh(e,t,n){return e instanceof Gh?Hh(e,t):e instanceof Wh?Kh(e,t):n}function zh(e,t){return e instanceof Qh?function(e){return fu(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class qh extends jh{}class Gh extends jh{constructor(e){super(),this.elements=e}}function Hh(e,t){const n=Jh(t);for(const r of e.elements)n.some((e=>ou(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Wh extends jh{constructor(e){super(),this.elements=e}}function Kh(e,t){let n=Jh(t);for(const r of e.elements)n=n.filter((e=>!ou(e,r)));return{arrayValue:{values:n}}}class Qh extends jh{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Yh(e){return Jc(e.integerValue||e.doubleValue)}function Jh(e){return pu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Xh{constructor(e,t){this.field=e,this.transform=t}}class $h{constructor(e,t){this.version=e,this.transformResults=t}}class Zh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zh}static exists(e){return new Zh(void 0,e)}static updateTime(e){return new Zh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ed(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class td{}function nd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new dd(e.key,Zh.none()):new ad(e.key,e.data,Zh.none());{const n=e.data,r=Iu.empty();let i=new zc(Al.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new ld(e.key,r,new Hc(i.toArray()),Zh.none())}}function rd(e,t,n){e instanceof ad?function(e,t,n){const r=e.value.clone(),i=ud(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ld?function(e,t,n){if(!ed(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ud(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(cd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function id(e,t,n,r){return e instanceof ad?function(e,t,n,r){if(!ed(e.precondition,t))return n;const i=e.value.clone(),s=hd(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ld?function(e,t,n,r){if(!ed(e.precondition,t))return n;const i=hd(e.fieldTransforms,r,t),s=t.data;return s.setAll(cd(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return ed(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function sd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=zh(r.transform,e||null);null!=i&&(null===n&&(n=Iu.empty()),n.set(r.field,i))}return n||null}function od(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Sl(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Gh&&t instanceof Gh||e instanceof Wh&&t instanceof Wh?Sl(e.elements,t.elements,ou):e instanceof Qh&&t instanceof Qh?ou(e.Ie,t.Ie):e instanceof qh&&t instanceof qh}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ad extends td{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ld extends td{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function cd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function ud(e,t,n){const r=new Map;al(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Bh(o,a,n[i]))}return r}function hd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Vh(e,s,t))}return r}class dd extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fd extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class pd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&rd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=id(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=id(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Nh();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=nd(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(kl.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ph())}isEqual(e){return this.batchId===e.batchId&&Sl(this.mutations,e.mutations,((e,t)=>od(e,t)))&&Sl(this.baseMutations,e.baseMutations,((e,t)=>od(e,t)))}}class md{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){al(e.mutations.length===n.length);let r=Rh;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new md(e,t,n,r)}}class gd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class vd{constructor(e,t){this.count=e,this.unchangedNames=t}}var yd,wd;function bd(e){switch(e){default:return ol();case cl.CANCELLED:case cl.UNKNOWN:case cl.DEADLINE_EXCEEDED:case cl.RESOURCE_EXHAUSTED:case cl.INTERNAL:case cl.UNAVAILABLE:case cl.UNAUTHENTICATED:return!1;case cl.INVALID_ARGUMENT:case cl.NOT_FOUND:case cl.ALREADY_EXISTS:case cl.PERMISSION_DENIED:case cl.FAILED_PRECONDITION:case cl.ABORTED:case cl.OUT_OF_RANGE:case cl.UNIMPLEMENTED:case cl.DATA_LOSS:return!0}}function _d(e){if(void 0===e)return rl("GRPC error has no .code"),cl.UNKNOWN;switch(e){case yd.OK:return cl.OK;case yd.CANCELLED:return cl.CANCELLED;case yd.UNKNOWN:return cl.UNKNOWN;case yd.DEADLINE_EXCEEDED:return cl.DEADLINE_EXCEEDED;case yd.RESOURCE_EXHAUSTED:return cl.RESOURCE_EXHAUSTED;case yd.INTERNAL:return cl.INTERNAL;case yd.UNAVAILABLE:return cl.UNAVAILABLE;case yd.UNAUTHENTICATED:return cl.UNAUTHENTICATED;case yd.INVALID_ARGUMENT:return cl.INVALID_ARGUMENT;case yd.NOT_FOUND:return cl.NOT_FOUND;case yd.ALREADY_EXISTS:return cl.ALREADY_EXISTS;case yd.PERMISSION_DENIED:return cl.PERMISSION_DENIED;case yd.FAILED_PRECONDITION:return cl.FAILED_PRECONDITION;case yd.ABORTED:return cl.ABORTED;case yd.OUT_OF_RANGE:return cl.OUT_OF_RANGE;case yd.UNIMPLEMENTED:return cl.UNIMPLEMENTED;case yd.DATA_LOSS:return cl.DATA_LOSS;default:return ol()}}(wd=yd||(yd={}))[wd.OK=0]="OK",wd[wd.CANCELLED=1]="CANCELLED",wd[wd.UNKNOWN=2]="UNKNOWN",wd[wd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wd[wd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wd[wd.NOT_FOUND=5]="NOT_FOUND",wd[wd.ALREADY_EXISTS=6]="ALREADY_EXISTS",wd[wd.PERMISSION_DENIED=7]="PERMISSION_DENIED",wd[wd.UNAUTHENTICATED=16]="UNAUTHENTICATED",wd[wd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wd[wd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wd[wd.ABORTED=10]="ABORTED",wd[wd.OUT_OF_RANGE=11]="OUT_OF_RANGE",wd[wd.UNIMPLEMENTED=12]="UNIMPLEMENTED",wd[wd.INTERNAL=13]="INTERNAL",wd[wd.UNAVAILABLE=14]="UNAVAILABLE",wd[wd.DATA_LOSS=15]="DATA_LOSS";let Ed=null;function Sd(){return new TextEncoder}const Id=new Ja([4294967295,4294967295],0);function Td(e){const t=Sd().encode(e),n=new Ya;return n.update(t),new Uint8Array(n.digest())}function kd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ja([n,r],0),new Ja([i,s],0)]}class Cd{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new xd("Invalid padding: ".concat(t));if(n<0)throw new xd("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new xd("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new xd("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Ja.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Ja.fromNumber(n)));return 1===r.compare(Id)&&(r=new Ja([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Td(e),[n,r]=kd(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Cd(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Td(e),[n,r]=kd(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class xd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Nd{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Ad.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Nd(kl.min(),r,new jc(El),Ih(),Ph())}}class Ad{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Ad(n,t,Ph(),Ph(),Ph())}}class Rd{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Dd{constructor(e,t){this.targetId=e,this.fe=t}}class Pd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Od{constructor(){this.ge=0,this.pe=Fd(),this.ye=Kc.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ph(),t=Ph(),n=Ph();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ol()}})),new Ad(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Fd()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,al(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class Ld{constructor(e){this.Be=e,this.ke=new Map,this.qe=Ih(),this.Qe=Md(),this.Ke=new jc(El)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:ol()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(th(i))if(0===n){const e=new Rl(i.path);this.We(t,e,ku.newNoDocument(e,kl.min()))}else al(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Ed||Ed.tt(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Be.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Xc(n).toUint8Array()}catch(e){if(e instanceof Wc)return il("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Cd(s,r,i)}catch(e){return il(e instanceof xd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Be.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Be.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&th(i.target)){const t=new Rl(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,ku.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Ph();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Nd(e,t,this.Ke,this.qe,n);return this.qe=Ih(),this.Qe=Md(),this.Ke=new jc(El),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Od,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new zc(El),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||nl("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Od),this.Be.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function Md(){return new jc(Rl.comparator)}function Fd(){return new jc(Rl.comparator)}const Ud={asc:"ASCENDING",desc:"DESCENDING"},jd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vd={and:"AND",or:"OR"};class Bd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zd(e,t){return e.useProto3Json||rc(t)?t:{value:t}}function qd(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Hd(e,t){return qd(e,t.toTimestamp())}function Wd(e){return al(!!e),kl.fromTimestamp(function(e){const t=Yc(e);return new Tl(t.seconds,t.nanos)}(e))}function Kd(e,t){return Qd(e,t).canonicalString()}function Qd(e,t){const n=function(e){return new xl(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Yd(e){const t=xl.fromString(e);return al(yf(t)),t}function Jd(e,t){return Kd(e.databaseId,t.path)}function Xd(e,t){const n=Yd(t);if(n.get(1)!==e.databaseId.projectId)throw new ul(cl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ul(cl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rl(tf(n))}function $d(e,t){return Kd(e.databaseId,t)}function Zd(e){const t=Yd(e);return 4===t.length?xl.emptyPath():tf(t)}function ef(e){return new xl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function tf(e){return al(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function nf(e,t,n){return{name:Jd(e,t),fields:n.value.mapValue.fields}}function rf(e,t,n){const r=Xd(e,t.name),i=Wd(t.updateTime),s=t.createTime?Wd(t.createTime):kl.min(),o=new Iu({mapValue:{fields:t.fields}}),a=ku.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function sf(e,t){let n;if(t instanceof ad)n={update:nf(e,t.key,t.value)};else if(t instanceof dd)n={delete:Jd(e,t.key)};else if(t instanceof ld)n={update:nf(e,t.key,t.data),updateMask:vf(t.fieldMask)};else{if(!(t instanceof fd))return ol();n={verify:Jd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof qh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Gh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Wh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Qh)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw ol()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Hd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ol()}(e,t.precondition)),n}function of(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Zh.updateTime(Wd(e.updateTime)):void 0!==e.exists?Zh.exists(e.exists):Zh.none()}(t.currentDocument):Zh.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)al("REQUEST_TIME"===t.setToServerValue),n=new qh;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Gh(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Wh(e)}else"increment"in t?n=new Qh(e,t.increment):ol();const r=Al.fromServerFormat(t.fieldPath);return new Xh(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Xd(e,t.update.name),s=new Iu({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Hc(t.map((e=>Al.fromServerFormat(e))))}(t.updateMask);return new ld(i,s,e,n,r)}return new ad(i,s,n,r)}if(t.delete){const r=Xd(e,t.delete);return new dd(r,n)}if(t.verify){const r=Xd(e,t.verify);return new fd(r,n)}return ol()}function af(e,t){return{documents:[$d(e,t.path)]}}function lf(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$d(e,i);const s=function(e){if(0!==e.length)return gf(Ou.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:pf(e.field),direction:hf(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=zd(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function cf(e){let t=Zd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){al(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=uf(e);return t instanceof Ou&&Fu(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Au(mf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,rc(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Cu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Cu(n,t)}(n.endAt)),oh(t,i,o,s,a,"F",l,c)}function uf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=mf(e.unaryFilter.field);return Pu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=mf(e.unaryFilter.field);return Pu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=mf(e.unaryFilter.field);return Pu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=mf(e.unaryFilter.field);return Pu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ol()}}(e):void 0!==e.fieldFilter?function(e){return Pu.create(mf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ol()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ou.create(e.compositeFilter.filters.map((e=>uf(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ol()}}(e.compositeFilter.op))}(e):ol()}function hf(e){return Ud[e]}function df(e){return jd[e]}function ff(e){return Vd[e]}function pf(e){return{fieldPath:e.canonicalString()}}function mf(e){return Al.fromServerFormat(e.fieldPath)}function gf(e){return e instanceof Pu?function(e){if("=="===e.op){if(gu(e.value))return{unaryFilter:{field:pf(e.field),op:"IS_NAN"}};if(mu(e.value))return{unaryFilter:{field:pf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gu(e.value))return{unaryFilter:{field:pf(e.field),op:"IS_NOT_NAN"}};if(mu(e.value))return{unaryFilter:{field:pf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pf(e.field),op:df(e.op),value:e.value}}}(e):e instanceof Ou?function(e){const t=e.getFilters().map((e=>gf(e)));return 1===t.length?t[0]:{compositeFilter:{op:ff(e.op),filters:t}}}(e):ol()}function vf(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function yf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class wf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:kl.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:kl.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Kc.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new wf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class bf{constructor(e){this.ct=e}}function _f(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ef(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Jd(e,t.key),fields:t.data.value.mapValue.fields,updateTime:qd(e,t.version.toTimestamp()),createTime:qd(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Sf(t.version)};else{if(!t.isUnknownDocument())return ol();r.unknownDocument={path:n.path.toArray(),version:Sf(t.version)}}return r}function Ef(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Sf(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function If(e){const t=new Tl(e.seconds,e.nanoseconds);return kl.fromTimestamp(t)}function Tf(e,t){const n=(t.baseMutations||[]).map((t=>of(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>of(e.ct,t))),i=Tl.fromMillis(t.localWriteTimeMs);return new pd(t.batchId,i,n,r)}function kf(e){const t=If(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?If(e.lastLimboFreeSnapshotVersion):kl.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return al(1===e.documents.length),hh(ah(Zd(e.documents[0])))}(e.query):function(e){return hh(cf(e))}(e.query),new wf(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Kc.fromBase64String(e.resumeToken))}function Cf(e,t){const n=Sf(t.snapshotVersion),r=Sf(t.lastLimboFreeSnapshotVersion);let i;i=th(t.target)?af(e.ct,t.target):lf(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Zu(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function xf(e){const t=cf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ph(t,t.limit,"L"):t}function Nf(e,t){return new gd(t.largestBatchId,of(e.ct,t.overlayMutation))}function Af(e,t){const n=t.path.lastSegment();return[e,oc(t.path.popLast()),n]}function Rf(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Sf(r.readTime),documentKey:oc(r.documentKey.path),largestBatchId:r.largestBatchId}}class Df{getBundleMetadata(e,t){return Pf(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:If(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Pf(e).put(function(e){return{bundleId:e.id,createTime:Sf(Wd(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Of(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:xf(e.bundledQuery),readTime:If(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Of(e).put(function(e){return{name:e.name,readTime:Sf(Wd(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Pf(e){return Lc(e,"bundles")}function Of(e){return Lc(e,"namedQueries")}class Lf{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new Lf(e,n)}getOverlay(e,t){return Mf(e).get(Af(this.userId,t)).next((e=>e?Nf(this.serializer,e):null))}getOverlays(e,t){const n=xh();return Gl.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new gd(t,i);r.push(this.ht(e,s))})),Gl.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(oc(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Mf(e).H("collectionPathOverlayIndex",r))})),Gl.waitFor(i)}getOverlaysForCollection(e,t,n){const r=xh(),i=oc(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Mf(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Nf(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=xh();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Mf(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=Nf(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return Mf(e).put(function(e,t,n){const[r,i,s]=Af(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:sf(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function Mf(e){return Lc(e,"documentOverlays")}class Ff{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Jc(e.integerValue));else if("doubleValue"in e){const n=Jc(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),ic(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=Yc(n)),t.At("".concat(n.seconds||"")),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Xc(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?wu(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):ol()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),Rl.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Uf(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function jf(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Uf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ff.bt=new Ff;class Vf{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=jf(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=jf(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Bf{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class zf{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class qf{constructor(){this.Gt=new Vf,this.zt=new Bf(this.Gt),this.jt=new zf(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Gf{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Gf(this.indexId,this.documentKey,this.arrayValue,n)}}function Hf(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Wf(e.arrayValue,t.arrayValue),0!==n?n:(n=Wf(e.directionalValue,t.directionalValue),0!==n?n:Rl.comparator(e.documentKey,t.documentKey)))}function Wf(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Kf{constructor(e){this.Yt=new zc(((e,t)=>Al.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(al(e.collectionGroup===this.collectionId),this.en)return!1;const t=Pl(e);if(void 0!==t&&!this.nn(t))return!1;const n=Ol(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new zc(Al.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Ll(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Ll(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Ll(n.field,"asc"===n.dir?0:1)));return new Dl(Dl.UNKNOWN_ID,this.collectionId,t,Ml.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Qf(e){var t,n;if(al(e instanceof Pu||e instanceof Ou),e instanceof Pu){if(e instanceof Qu){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Pu.create(e.field,"==",t))))||[];return Ou.create(r,"or")}return e}const r=e.filters.map((e=>Qf(e)));return Ou.create(r,e.op)}function Yf(e){if(0===e.getFilters().length)return[];const t=Zf(Qf(e));return al($f(t)),Jf(t)||Xf(t)?[t]:t.getFilters()}function Jf(e){return e instanceof Pu}function Xf(e){return e instanceof Ou&&Fu(e)}function $f(e){return Jf(e)||Xf(e)||function(e){if(e instanceof Ou&&Mu(e)){for(const t of e.getFilters())if(!Jf(t)&&!Xf(t))return!1;return!0}return!1}(e)}function Zf(e){if(al(e instanceof Pu||e instanceof Ou),e instanceof Pu)return e;if(1===e.filters.length)return Zf(e.filters[0]);const t=e.filters.map((e=>Zf(e)));let n=Ou.create(t,e.op);return n=np(n),$f(n)?n:(al(n instanceof Ou),al(Lu(n)),al(n.filters.length>1),n.filters.reduce(((e,t)=>ep(e,t))))}function ep(e,t){let n;return al(e instanceof Pu||e instanceof Ou),al(t instanceof Pu||t instanceof Ou),n=e instanceof Pu?t instanceof Pu?function(e,t){return Ou.create([e,t],"and")}(e,t):tp(e,t):t instanceof Pu?tp(t,e):function(e,t){if(al(e.filters.length>0&&t.filters.length>0),Lu(e)&&Lu(t))return Bu(e,t.getFilters());const n=Mu(e)?e:t,r=Mu(e)?t:e,i=n.filters.map((e=>ep(e,r)));return Ou.create(i,"or")}(e,t),np(n)}function tp(e,t){if(Lu(t))return Bu(t,e.getFilters());{const n=t.filters.map((t=>ep(e,t)));return Ou.create(n,"or")}}function np(e){if(al(e instanceof Pu||e instanceof Ou),e instanceof Pu)return e;const t=e.getFilters();if(1===t.length)return np(t[0]);if(Uu(e))return e;const n=t.map((e=>np(e))),r=[];return n.forEach((t=>{t instanceof Pu?r.push(t):t instanceof Ou&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Ou.create(r,e.op)}class rp{constructor(){this._n=new ip}addToCollectionParentIndex(e,t){return this._n.add(t),Gl.resolve()}getCollectionParents(e,t){return Gl.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Gl.resolve()}deleteFieldIndex(e,t){return Gl.resolve()}deleteAllFieldIndexes(e){return Gl.resolve()}createTargetIndexes(e,t){return Gl.resolve()}getDocumentsMatchingTarget(e,t){return Gl.resolve(null)}getIndexType(e,t){return Gl.resolve(0)}getFieldIndexes(e,t){return Gl.resolve([])}getNextCollectionGroupToUpdate(e){return Gl.resolve(null)}getMinOffset(e,t){return Gl.resolve(jl.min())}getMinOffsetFromCollectionGroup(e,t){return Gl.resolve(jl.min())}updateCollectionGroup(e,t,n){return Gl.resolve()}updateIndexEntries(e,t){return Gl.resolve()}}class ip{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new zc(xl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new zc(xl.comparator)).toArray()}}const sp=new Uint8Array(0);class op{constructor(e,t){this.databaseId=t,this.an=new ip,this.un=new Eh((e=>Zu(e)),((e,t)=>eh(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:oc(r)};return ap(e).put(i)}return Gl.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Il(t),""],!1,!0);return ap(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(cc(r.parent))}return n}))}addFieldIndex(e,t){const n=cp(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=up(e);return i.next((e=>{n.put(Rf(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=cp(e),r=up(e),i=lp(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=cp(e),n=lp(e),r=up(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return Gl.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Kf(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=lp(e);let r=!0;const i=new Map;return Gl.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Ph();const r=[];return Gl.forEach(i,((i,s)=>{nl("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Zu(t)));const o=function(e,t){const n=Pl(t);if(void 0===n)return null;for(const r of nh(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of Ol(t))for(const t of nh(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Ol(t)){const t=0===i.kind?rh(e,i.fieldPath,e.startAt):ih(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Cu(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of Ol(t)){const t=0===i.kind?ih(e,i.fieldPath,e.endAt):rh(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Cu(n,r)}(s,i),u=this.hn(i,s,l),h=this.hn(i,s,c),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return Gl.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=Rl.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Gl.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Yf(Ou.create(e.filters,"and")).map((t=>$u(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/l]):sp,h=this.En(e,a,n[u%l],r),d=this.dn(e,a,i[u%l],s),f=o.map((t=>this.En(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}En(e,t,n,r){const i=new Gf(e,Rl.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new Gf(e,Rl.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new Kf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return Gl.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new zc(Al.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new qf;for(const r of Ol(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);Ff.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new qf;return Ff.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new qf;return Ff.bt.Pt(du(this.databaseId,t),n.Ht(function(e){const t=Ol(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new qf);let i=0;for(const s of Ol(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&pu(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);Ff.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new qf;n.seed(e.Wt()),Ff.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Pu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=cp(e),r=up(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return Gl.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Ml(t.sequenceNumber,new jl(If(t.readTime),new Rl(cc(t.documentKey)),t.largestBatchId)):Ml.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Ll(Al.fromServerFormat(t),n)}));return new Dl(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:El(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=cp(e),i=up(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Gl.forEach(t,(t=>i.put(Rf(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Gl.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Gl.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Gl.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?Gl.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return lp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return lp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=lp(e);let i=new zc(Hf);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new Gf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new zc(Hf);const r=this.An(t,e);if(null==r)return n;const i=Pl(t);if(null!=i){const s=e.data.field(i.fieldPath);if(pu(s))for(const i of s.arrayValue.values||[])n=n.add(new Gf(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new Gf(t.indexId,e.key,sp,r));return n}wn(e,t,n,r,i){nl("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Gc(s),l=Gc(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Gc(o)):t?(i(a),a=Gc(s)):(a=Gc(s),l=Gc(o))}}(r,i,Hf,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),Gl.waitFor(s)}gn(e){let t=1;return up(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Hf(e,t))).filter(((e,t,n)=>!t||0!==Hf(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Hf(s,e),i=Hf(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,sp,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,sp,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return Hf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hp)}getMinOffset(e,t){return Gl.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||ol())))).next(hp)}}function ap(e){return Lc(e,"collectionParents")}function lp(e){return Lc(e,"indexEntries")}function cp(e){return Lc(e,"indexConfiguration")}function up(e){return Lc(e,"indexState")}function hp(e){al(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Vl(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new jl(t.readTime,t.documentKey,n)}const dp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fp{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new fp(e,fp.DEFAULT_COLLECTION_PERCENTILE,fp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function pp(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{al(1===a)})));const c=[];for(const u of n.mutations){const e=dc(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return Gl.waitFor(s).next((()=>c))}function mp(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ol();t=e.noDocument}return JSON.stringify(t).length}fp.DEFAULT_COLLECTION_PERCENTILE=10,fp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fp.DEFAULT=new fp(41943040,fp.DEFAULT_COLLECTION_PERCENTILE,fp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fp.DISABLED=new fp(-1,0,0);class gp{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){al(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new gp(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yp(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=wp(e),s=yp(e);return s.add({}).next((o=>{al("number"==typeof o);const a=new pd(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>sf(e.ct,t))),i=n.mutations.map((t=>sf(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new zc(((e,t)=>El(e.canonicalString(),t.canonicalString())));for(const e of r){const t=dc(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,fc))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),Gl.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return yp(e).get(t).next((e=>e?(al(e.userId===this.userId),Tf(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?Gl.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return yp(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(al(t.batchId>=n),i=Tf(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return yp(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yp(e).W("userMutationsIndex",t).next((e=>e.map((e=>Tf(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=hc(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return wp(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,c=cc(a);if(o===this.userId&&t.path.isEqual(c))return yp(e).get(l).next((e=>{if(!e)throw ol();al(e.userId===this.userId),i.push(Tf(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new zc(El);const r=[];return t.forEach((t=>{const i=hc(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=wp(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=cc(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),Gl.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=hc(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new zc(El);return wp(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,c=cc(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(yp(e).get(t).next((e=>{if(null===e)throw ol();al(e.userId===this.userId),n.push(Tf(this.serializer,e))})))})),Gl.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return pp(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),Gl.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Gl.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return wp(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=cc(e[1]);r.push(t)}else n.done()})).next((()=>{al(0===r.length)}))}))}containsKey(e,t){return vp(e,this.userId,t)}xn(e){return bp(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function vp(e,t,n){const r=hc(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return wp(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function yp(e){return Lc(e,"mutations")}function wp(e){return Lc(e,"documentMutations")}function bp(e){return Lc(e,"mutationQueues")}class _p{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new _p(0)}static Ln(){return new _p(-1)}}class Ep{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new _p(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>kl.fromTimestamp(new Tl(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Sp(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(al(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Sp(e).Y(((s,o)=>{const a=kf(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Gl.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Sp(e).Y(((e,n)=>{const r=kf(n);t(r)}))}Bn(e){return Ip(e).get("targetGlobalKey").next((e=>(al(null!==e),e)))}kn(e,t){return Ip(e).put("targetGlobalKey",t)}qn(e,t){return Sp(e).put(Cf(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Zu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Sp(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=kf(n);eh(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Tp(e);return t.forEach((t=>{const s=oc(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Gl.waitFor(r)}removeMatchingKeys(e,t,n){const r=Tp(e);return Gl.forEach(t,(t=>{const i=oc(t.path);return Gl.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Tp(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Tp(e);let i=Ph();return r.Y({range:n,J:!0},((e,t,n)=>{const r=cc(e[1]),s=new Rl(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=oc(t.path),r=IDBKeyRange.bound([n],[Il(n)],!1,!0);let i=0;return Tp(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Sp(e).get(t).next((e=>e?kf(e):null))}}function Sp(e){return Lc(e,"targets")}function Ip(e){return Lc(e,"targetGlobal")}function Tp(e){return Lc(e,"targetDocuments")}function kp(e,t){let[n,r]=e,[i,s]=t;const o=El(n,i);return 0===o?El(r,s):o}class Cp{constructor(e){this.Kn=e,this.buffer=new zc(kp),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();kp(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xp{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){nl("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Yl(e)?nl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await ql(e)}await this.zn(3e5)}))}}class Np{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Gl.resolve(nc._e);const n=new Cp(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(nl("LruGarbageCollector","Garbage collection skipped; disabled"),Gl.resolve(dp)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(nl("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),dp):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(nl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),tl()<=gn.DEBUG&&nl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Gl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Ap(e,t){return new Np(e,t)}class Rp{constructor(e,t){this.db=e,this.garbageCollector=Ap(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return Dp(e,n)}removeReference(e,t,n){return Dp(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Dp(e,t)}er(e,t){return function(e,t){let n=!1;return bp(e).Z((r=>vp(e,r,t).next((e=>(e&&(n=!0),Gl.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,kl.min()),Tp(e).delete(function(e){return[0,oc(e.path)]}(s)))))}));r.push(t)}})).next((()=>Gl.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Dp(e,t)}Xn(e,t){const n=Tp(e);let r,i=nc._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==nc._e&&t(new Rl(cc(r)),i),i=l,r=a):i=nc._e})).next((()=>{i!==nc._e&&t(new Rl(cc(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Dp(e,t){return Tp(e).put(function(e,t){return{targetId:0,path:oc(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Pp{constructor(){this.changes=new Eh((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ku.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Gl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Op{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Up(e).put(n)}removeEntry(e,t,n){return Up(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ef(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=ku.newInvalidDocument(t);return Up(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(jp(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:ku.newInvalidDocument(t)};return Up(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(jp(t))},((e,r)=>{n={document:this.nr(t,r),size:mp(r)}})).next((()=>n))}getEntries(e,t){let n=Ih();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Ih(),r=new jc(Rl.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,mp(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return Gl.resolve();let r=new zc(Bp);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(jp(r.first()),jp(r.last())),s=r.getIterator();let o=s.getNext();return Up(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Rl.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Bp(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(jp(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Ef(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Up(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Ih();for(const i of e){const e=this.nr(Rl.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(yh(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Ih();const s=Vp(t,n),o=Vp(t,jl.max());return Up(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(Rl.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Mp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Fp(e).get("remoteDocumentGlobalKey").next((e=>(al(!!e),e)))}tr(e,t){return Fp(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=rf(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Rl.fromSegments(t.noDocument.path),r=If(t.noDocument.readTime);n=ku.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ol();{const e=Rl.fromSegments(t.unknownDocument.path),r=If(t.unknownDocument.version);n=ku.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Tl(e[0],e[1]);return kl.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(kl.min()))return e}return ku.newInvalidDocument(e)}}function Lp(e){return new Op(e)}class Mp extends Pp{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Eh((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new zc(((e,t)=>El(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=_f(this.ar.serializer,s);r=r.add(i.path.popLast());const l=mp(a);n+=l-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=_f(this.ar.serializer,s.convertToNoDocument(kl.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),Gl.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Fp(e){return Lc(e,"remoteDocumentGlobal")}function Up(e){return Lc(e,"remoteDocumentsV14")}function jp(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Vp(e,t){const n=t.documentKey.path.toArray();return[e,Ef(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Bp(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=El(n[s],r[s]),i)return i;return i=El(n.length,r.length),i||(i=El(n[n.length-2],r[r.length-2]),i||El(n[n.length-1],r[r.length-1]))}class zp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class qp{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&id(n.mutation,e,Hc.empty(),Tl.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ph()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ph();const r=xh();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=kh();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=xh();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ph())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Ih();const s=Ah(),o=Ah();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof ld)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),id(o.mutation,t,o.mutation.getFieldMask(),Tl.now())):s.set(t.key,Hc.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new zp(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Ah();let r=new jc(((e,t)=>e-t)),i=Ph();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Hc.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Ph()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Nh();l.forEach((e=>{if(!i.has(e)){const r=nd(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Gl.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Rl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ch(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Gl.resolve(xh());let o=-1,a=i;return s.next((t=>Gl.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Gl.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Ph()))).next((e=>({batchId:o,changes:Ch(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Rl(t)).next((e=>{let t=kh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=kh();return this.indexManager.getCollectionParents(e,i).next((o=>Gl.forEach(o,(o=>{const a=function(e,t){return new sh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ku.newInvalidDocument(r)))}));let n=kh();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&id(s.mutation,r,Hc.empty(),Tl.now()),yh(t,r)&&(n=n.insert(e,r))})),n}))}}class Gp{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Gl.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Wd(e.createTime)}}(t)),Gl.resolve()}getNamedQuery(e,t){return Gl.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:xf(e.bundledQuery),readTime:Wd(e.readTime)}}(t)),Gl.resolve()}}class Hp{constructor(){this.overlays=new jc(Rl.comparator),this.hr=new Map}getOverlay(e,t){return Gl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=xh();return Gl.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Gl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),Gl.resolve()}getOverlaysForCollection(e,t,n){const r=xh(),i=t.length+1,s=new Rl(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Gl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new jc(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=xh(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=xh(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Gl.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new gd(t,n));let i=this.hr.get(t);void 0===i&&(i=Ph(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Wp{constructor(){this.Pr=new zc(Kp.Ir),this.Tr=new zc(Kp.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Kp(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Kp(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new Rl(new xl([])),n=new Kp(t,e),r=new Kp(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Rl(new xl([])),n=new Kp(t,e),r=new Kp(t,e+1);let i=Ph();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Kp(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Kp{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Rl.comparator(e.key,t.key)||El(e.pr,t.pr)}static Er(e,t){return El(e.pr,t.pr)||Rl.comparator(e.key,t.key)}}class Qp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new zc(Kp.Ir)}checkEmpty(e){return Gl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new pd(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new Kp(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Gl.resolve(s)}lookupMutationBatch(e,t){return Gl.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return Gl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Gl.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Gl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Kp(t,0),r=new Kp(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),Gl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new zc(El);return t.forEach((e=>{const t=new Kp(e,0),r=new Kp(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),Gl.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Rl.isDocumentKey(i)||(i=i.child(""));const s=new Kp(new Rl(i),0);let o=new zc(El);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),Gl.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){al(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Gl.forEach(t.mutations,(r=>{const i=new Kp(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Kp(t,0),r=this.wr.firstAfterOrEqual(n);return Gl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Gl.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Yp{constructor(e){this.vr=e,this.docs=new jc(Rl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Gl.resolve(n?n.document.mutableCopy():ku.newInvalidDocument(t))}getEntries(e,t){let n=Ih();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ku.newInvalidDocument(e))})),Gl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ih();const s=t.path,o=new Rl(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Vl(Ul(o),n)<=0||(r.has(o.key)||yh(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Gl.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ol()}Fr(e,t){return Gl.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Jp(this)}getSize(e){return Gl.resolve(this.size)}}class Jp extends Pp{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),Gl.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Xp{constructor(e){this.persistence=e,this.Mr=new Eh((e=>Zu(e)),eh),this.lastRemoteSnapshotVersion=kl.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Wp,this.targetCount=0,this.Lr=_p.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),Gl.resolve()}getLastRemoteSnapshotVersion(e){return Gl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Gl.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Gl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Gl.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new _p(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Gl.resolve()}updateTargetData(e,t){return this.qn(t),Gl.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Gl.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Gl.waitFor(i).next((()=>r))}getTargetCount(e){return Gl.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return Gl.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),Gl.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Gl.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Gl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return Gl.resolve(n)}containsKey(e,t){return Gl.resolve(this.Nr.containsKey(t))}}class $p{constructor(e,t){this.Br={},this.overlays={},this.kr=new nc(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Xp(this),this.indexManager=new rp,this.remoteDocumentCache=function(e){return new Yp(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new bf(t),this.$r=new Gp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Hp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Qp(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){nl("MemoryPersistence","Starting transaction:",e);const r=new Zp(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return Gl.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Zp extends zl{constructor(e){super(),this.currentSequenceNumber=e}}class em{constructor(e){this.persistence=e,this.zr=new Wp,this.jr=null}static Hr(e){return new em(e)}get Jr(){if(this.jr)return this.jr;throw ol()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Gl.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Gl.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Gl.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Gl.forEach(this.Jr,(n=>{const r=Rl.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,kl.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return Gl.or([()=>Gl.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class tm{constructor(e){this.serializer=e}N(e,t,n,r){const i=new Hl("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uc,{unique:!0}),e.createObjectStore("documentMutations")}(e),nm(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Gl.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),nm(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:kl.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uc,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Gl.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Tc});t.createIndex("collectionPathOverlayIndex",kc,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Cc,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:pc});t.createIndex("documentKeyIndex",mc),t.createIndex("collectionGroupIndex",gc)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:_c}).createIndex("sequenceNumberIndex",Ec,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Sc}).createIndex("documentKeyIndex",Ic,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=mp(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>Gl.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>Gl.forEach(n,(n=>{al(n.userId===t.userId);const r=Tf(this.serializer,n);return pp(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new xl(n),o=function(e){return[0,oc(e)]}(s);r.push(t.get(o).next((n=>n?Gl.resolve():(n=>t.put({targetId:0,path:oc(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Gl.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:bc});const n=t.store("collectionParents"),r=new ip,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:oc(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new xl(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=cc(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=kf(n),i=Cf(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new Rl(xl.fromString(e.document.name).popFirst(5)):e.noDocument?Rl.fromSegments(e.noDocument.path):e.unknownDocument?Rl.fromSegments(e.unknownDocument.path):ol()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>Gl.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=Lp(this.serializer),i=new $p(em.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Ph();Tf(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Gl.forEach(n,((e,n)=>{const s=new $a(n),o=Lf.lt(this.serializer,s),a=i.getIndexManager(s),l=gp.lt(s,this.serializer,a,i.referenceDelegate);return new qp(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Oc(t,nc._e),e).next()}))}))}}function nm(e){e.createObjectStore("targetDocuments",{keyPath:yc}).createIndex("documentTargetsIndex",wc,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vc,{unique:!0}),e.createObjectStore("targetGlobal")}const rm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class im{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=l,this.ai=c,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!im.D())throw new ul(cl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Rp(this,r),this.Ti=t+"main",this.serializer=new bf(a),this.Ei=new Wl(this.Ti,this.ui,new tm(this.serializer)),this.Qr=new Ep(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Lp(this.serializer),this.$r=new Df,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&rl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ul(cl.FAILED_PRECONDITION,rm);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new nc(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>om(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Yl(e))return nl("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return nl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return sm(e).get("owner").next((e=>Gl.resolve(this.Si(e))))}bi(e){return om(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Lc(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Gl.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Gl.resolve(!0):sm(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new ul(cl.FAILED_PRECONDITION,rm);return!1}}return!(!this.networkEnabled||!this.inForeground)||om(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&nl("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Oc(e,nc._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>om(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return gp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new op(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Lf.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){nl("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?Pc:15===e?Dc:14===e?Rc:13===e?Ac:12===e?Nc:11===e?xc:void ol()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new Oc(r,this.kr?this.kr.next():nc._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw rl("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new ul(cl.FAILED_PRECONDITION,Bl);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return sm(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ul(cl.FAILED_PRECONDITION,rm)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sm(e).put("owner",t)}static D(){return Wl.D()}yi(e){const t=sm(e);return t.get("owner").next((e=>this.Si(e)?(nl("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Gl.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(rl("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;Yt()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return nl("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return rl("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(Rx){rl("Failed to set zombie client id.",Rx)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(Rx){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function sm(e){return Lc(e,"owner")}function om(e){return Lc(e,"clientMetadata")}function am(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class lm{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Ph(),r=Ph();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new lm(e,t.fromCache,n,r)}}class cm{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class um{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Yt()?8:Wl.v(qt())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new cm;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(tl()<=gn.DEBUG&&nl("QueryEngine","SDK will not create cache indexes for query:",vh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Gl.resolve()):(tl()<=gn.DEBUG&&nl("QueryEngine","Query:",vh(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(tl()<=gn.DEBUG&&nl("QueryEngine","The SDK decides to create cache indexes for query:",vh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hh(t))):Gl.resolve())}ji(e,t){if(lh(t))return Gl.resolve(null);let n=hh(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=ph(t,null,"F"),n=hh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Ph(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,ph(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return lh(t)||r.isEqual(kl.min())?Gl.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?Gl.resolve(null):(tl()<=gn.DEBUG&&nl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vh(t)),this.es(e,s,t,Fl(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new zc(bh(e));return t.forEach(((t,r)=>{yh(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return tl()<=gn.DEBUG&&nl("QueryEngine","Using full collection scan to execute query:",vh(t)),this.zi.getDocumentsMatchingQuery(e,t,jl.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class hm{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new jc(El),this.rs=new Eh((e=>Zu(e)),eh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qp(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function dm(e,t,n,r){return new hm(e,t,n,r)}async function fm(e,t){const n=ll(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Ph();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function pm(e){const t=ll(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function mm(e,t,n){let r=Ph(),i=Ph();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Ih();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(kl.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):nl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function gm(e,t){const n=ll(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function vm(e,t){const n=ll(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,Gl.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new wf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function ym(e,t,n){const r=ll(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Yl(e))throw e;nl("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function wm(e,t,n){const r=ll(e);let i=kl.min(),s=Ph();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=ll(e),i=r.rs.get(n);return void 0!==i?Gl.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,hh(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:kl.min(),n?s:Ph()))).next((e=>(Em(r,wh(t),e),{documents:e,hs:s})))))}function bm(e,t){const n=ll(e),r=ll(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function _m(e,t){const n=ll(e),r=n.ss.get(t)||kl.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,Fl(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Em(n,t,e),e)))}function Em(e,t,n){let r=e.ss.get(t)||kl.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Sm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ph();const r=await vm(e,hh(xf(t.bundledQuery))),i=ll(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Wd(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(Kc.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function Im(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Tm(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function km(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Cm{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ul(r.error.code,r.error.message))),s?new Cm(e,t,r.state,i):(rl("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xm{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new ul(n.error.code,n.error.message))),i?new xm(e,n.state,r):(rl("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Lh();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=sc(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Nm(e,i):(rl("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Am{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Am(t.clientId,t.onlineState):(rl("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Rm{constructor(){this.activeTargetIds=Lh()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dm{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new jc(El),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Im(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Rm),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(Im(this.persistenceKey,n));if(e){const t=Nm.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(km(this.persistenceKey,e));if(n){const r=xm.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(km(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return nl("SharedClientState","READ",e,t),t}setItem(e,t){nl("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){nl("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(nl("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void rl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=nc._e;if(null!=e)try{const n=JSON.parse(e);al("number"==typeof n),t=n}catch(e){rl("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==nc._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new Cm(this.currentUser,e,t,n),i=Tm(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=Tm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=km(this.persistenceKey,e),i=new xm(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return Nm.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Cm.Es(new $a(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return xm.Es(r,t)}xs(e){return Am.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);nl("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Lh();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Pm{constructor(){this.no=new Rm,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Rm,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Om{io(e){}shutdown(){}}class Lm{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){nl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){nl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Mm=null;function Fm(){return null===Mm?Mm=268435456+Math.round(2147483648*Math.random()):Mm++,"0x"+Mm.toString(16)}const Um={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jm{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Vm="WebChannelConnection";class Bm extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=Fm(),o=this.bo(e,t.toUriEncodedString());nl("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(nl("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw il("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Za,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Um[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=Fm();return new Promise(((s,o)=>{const a=new Qa;a.setWithCredentials(!0),a.listenOnce(Ga.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case qa.NO_ERROR:const t=a.getResponseJson();nl(Vm,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case qa.TIMEOUT:nl(Vm,"RPC '".concat(e,"' ").concat(i," timed out")),o(new ul(cl.DEADLINE_EXCEEDED,"Request time out"));break;case qa.HTTP_ERROR:const n=a.getStatus();if(nl(Vm,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(cl).indexOf(t)>=0?t:cl.UNKNOWN}(t.status);o(new ul(e,t.message))}else o(new ul(cl.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ul(cl.UNAVAILABLE,"Connection failed."));break;default:ol()}}finally{nl(Vm,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);nl(Vm,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=Fm(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ba(),o=za(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");nl(Vm,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new jm({lo:t=>{d?nl(Vm,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(nl(Vm,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),nl(Vm,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Ka.EventType.OPEN,(()=>{d||nl(Vm,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Ka.EventType.CLOSE,(()=>{d||(d=!0,nl(Vm,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,Ka.EventType.ERROR,(t=>{d||(d=!0,il(Vm,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new ul(cl.UNAVAILABLE,"The operation could not be completed")))})),p(u,Ka.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];al(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){nl(Vm,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=yd[e];if(void 0!==t)return _d(t)}(t),i=o.message;void 0===n&&(n=cl.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new ul(n,i)),u.close()}else nl(Vm,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,Ha.STAT_EVENT,(t=>{t.stat===Wa.PROXY?nl(Vm,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Wa.NOPROXY&&nl(Vm,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function zm(){return"undefined"!=typeof window?window:null}function qm(){return"undefined"!=typeof document?document:null}function Gm(e){return new Bd(e,!0)}class Hm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&nl("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class Wm{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Hm(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===cl.RESOURCE_EXHAUSTED?(rl(t.toString()),rl("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===cl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new ul(cl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return nl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(nl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Km extends Wm{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ol()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(al(void 0===t||"string"==typeof t),Kc.fromBase64String(t||"")):(al(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Kc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?cl.UNKNOWN:_d(e.code);return new ul(t,e.message||"")}(o);n=new Pd(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xd(e,r.document.name),s=Wd(r.document.updateTime),o=r.document.createTime?Wd(r.document.createTime):kl.min(),a=new Iu({mapValue:{fields:r.document.fields}}),l=ku.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Rd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Xd(e,r.document),s=r.readTime?Wd(r.readTime):kl.min(),o=ku.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Rd([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Xd(e,r.document),s=r.removedTargetIds||[];n=new Rd([],s,i,null)}else{if(!("filter"in t))return ol();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new vd(r,i),o=e.targetId;n=new Dd(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return kl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?kl.min():t.readTime?Wd(t.readTime):kl.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=ef(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=th(r)?{documents:af(e,r)}:{query:lf(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Gd(e,t.resumeToken);const r=zd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(kl.min())>0){n.readTime=qd(e,t.snapshotVersion.toTimestamp());const r=zd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ol()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=ef(this.serializer),t.removeTarget=e,this.t_(t)}}class Qm extends Wm{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(al(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(al(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Wd(e.updateTime):Wd(t);return n.isEqual(kl.min())&&(n=Wd(t)),new $h(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Wd(e.commitTime);return this.listener.T_(n,t)}return al(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=ef(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>sf(this.serializer,e)))};this.t_(t)}}class Ym extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new ul(cl.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,Qd(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===cl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ul(cl.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,Qd(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===cl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ul(cl.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Jm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(rl(t),this.g_=!1):nl("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Xm{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{og(this)&&(nl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ll(e);t.v_.add(4),await Zm(t),t.x_.set("Unknown"),t.v_.delete(4),await $m(t)}(this))}))})),this.x_=new Jm(n,r)}}async function $m(e){if(og(e))for(const t of e.F_)await t(!0)}async function Zm(e){for(const t of e.F_)await t(!1)}function eg(e,t){const n=ll(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),sg(n)?ig(n):Ig(n).Jo()&&ng(n,t))}function tg(e,t){const n=ll(e),r=Ig(n);n.C_.delete(t),r.Jo()&&rg(n,t),0===n.C_.size&&(r.Jo()?r.Xo():og(n)&&n.x_.set("Unknown"))}function ng(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(kl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ig(e).c_(t)}function rg(e,t){e.O_.Oe(t),Ig(e).l_(t)}function ig(e){e.O_=new Ld({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Ig(e).start(),e.x_.p_()}function sg(e){return og(e)&&!Ig(e).Ho()&&e.C_.size>0}function og(e){return 0===ll(e).v_.size}function ag(e){e.O_=void 0}async function lg(e){e.C_.forEach(((t,n)=>{ng(e,t)}))}async function cg(e,t){ag(e),sg(e)?(e.x_.S_(t),ig(e)):e.x_.set("Unknown")}async function ug(e,t,n){if(e.x_.set("Online"),t instanceof Pd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){nl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await hg(e,n)}else if(t instanceof Rd?e.O_.$e(t):t instanceof Dd?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(kl.min()))try{const t=await pm(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Kc.EMPTY_BYTE_STRING,r.snapshotVersion)),rg(e,t);const i=new wf(r.target,t,n,r.sequenceNumber);ng(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){nl("RemoteStore","Failed to raise snapshot:",t),await hg(e,t)}}async function hg(e,t,n){if(!Yl(t))throw t;e.v_.add(1),await Zm(e),e.x_.set("Offline"),n||(n=()=>pm(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{nl("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await $m(e)}))}function dg(e,t){return t().catch((n=>hg(e,n,t)))}async function fg(e){const t=ll(e),n=Tg(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;pg(t);)try{const e=await gm(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,mg(t,e)}catch(e){await hg(t,e)}gg(t)&&vg(t)}function pg(e){return og(e)&&e.D_.length<10}function mg(e,t){e.D_.push(t);const n=Tg(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function gg(e){return og(e)&&!Tg(e).Ho()&&e.D_.length>0}function vg(e){Tg(e).start()}async function yg(e){Tg(e).d_()}async function wg(e){const t=Tg(e);for(const n of e.D_)t.I_(n.mutations)}async function bg(e,t,n){const r=e.D_.shift(),i=md.from(r,t,n);await dg(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await fg(e)}async function _g(e,t){t&&Tg(e).P_&&await async function(e,t){if(function(e){return bd(e)&&e!==cl.ABORTED}(t.code)){const n=e.D_.shift();Tg(e).Zo(),await dg(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await fg(e)}}(e,t),gg(e)&&vg(e)}async function Eg(e,t){const n=ll(e);n.asyncQueue.verifyOperationInProgress(),nl("RemoteStore","RemoteStore received new credentials");const r=og(n);n.v_.add(3),await Zm(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await $m(n)}async function Sg(e,t){const n=ll(e);t?(n.v_.delete(2),await $m(n)):t||(n.v_.add(2),await Zm(n),n.x_.set("Unknown"))}function Ig(e){return e.N_||(e.N_=function(e,t,n){const r=ll(e);return r.R_(),new Km(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:lg.bind(null,e),To:cg.bind(null,e),u_:ug.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),sg(e)?ig(e):e.x_.set("Unknown")):(await e.N_.stop(),ag(e))}))),e.N_}function Tg(e){return e.L_||(e.L_=function(e,t,n){const r=ll(e);return r.R_(),new Qm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:yg.bind(null,e),To:_g.bind(null,e),E_:wg.bind(null,e),T_:bg.bind(null,e)}),e.F_.push((async t=>{t?(e.L_.Zo(),await fg(e)):(await e.L_.stop(),e.D_.length>0&&(nl("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.L_}class kg{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new hl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new kg(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ul(cl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cg(e,t){if(rl("AsyncQueue","".concat(t,": ").concat(e)),Yl(e))return new ul(cl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class xg{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Rl.comparator(t.key,n.key):(e,t)=>Rl.comparator(e.key,t.key),this.keyedMap=kh(),this.sortedSet=new jc(this.comparator)}static emptySet(e){return new xg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xg))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new xg;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ng{constructor(){this.B_=new jc(Rl.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):ol():this.B_=this.B_.insert(t,e)}k_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ag{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Ag(e,t,xg.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Rg{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some((e=>e.U_()))}}class Dg{constructor(){this.queries=new Eh((e=>gh(e)),mh),this.onlineState="Unknown",this.W_=new Set}}async function Pg(e,t){const n=ll(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.K_()&&t.U_()&&(r=2):(s=new Rg,r=t.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Cg(e,"Initialization of query '".concat(vh(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Q_.push(t),t.G_(n.onlineState),s.q_&&t.z_(s.q_)&&Fg(n)}async function Og(e,t){const n=ll(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),0===s.Q_.length?i=t.U_()?0:1:!s.K_()&&t.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Lg(e,t){const n=ll(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.z_(i)&&(r=!0);t.q_=i}}r&&Fg(n)}function Mg(e,t,n){const r=ll(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function Fg(e){e.W_.forEach((e=>{e.next()}))}var Ug,jg;(jg=Ug||(Ug={})).j_="default",jg.Cache="cache";class Vg{constructor(e,t,n){this.query=e,this.H_=t,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=n||{}}z_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ag(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),t=!0):this.X_(e,this.onlineState)&&(this.ea(e),t=!0),this.Y_=e,t}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}X_(e,t){if(!e.fromCache)return!0;if(!this.U_())return!0;const n="Offline"!==t;return(!this.options.ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Z_(e){if(e.docChanges.length>0)return!0;const t=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ea(e){e=Ag.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Ug.Cache}}class Bg{constructor(e,t){this.na=e,this.byteLength=t}ra(){return"metadata"in this.na}}class zg{constructor(e){this.serializer=e}Ps(e){return Xd(this.serializer,e)}Is(e){return e.metadata.exists?rf(this.serializer,e.document,!1):ku.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Wd(e)}}class qg{constructor(e,t,n){this.ia=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Gg(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++t;const n=xl.fromString(e.na.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}oa(e){const t=new Map,n=new zg(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Ph()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=ll(e);let s=Ph(),o=Ih();for(const c of n){const e=t.Ps(c.metadata.name);c.document&&(s=s.add(e));const n=t.Is(c);n.setReadTime(t.Ts(c.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await vm(i,function(e){return hh(ah(xl.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>mm(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new zg(this.serializer),this.documents,this.ia.id),t=this.oa(this.documents);for(const n of this.queries)await Sm(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}}}function Gg(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Hg{constructor(e){this.key=e}}class Wg{constructor(e){this.key=e}}class Kg{constructor(e,t){this.query=e,this.ua=t,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Ph(),this.mutatedKeys=Ph(),this.ha=bh(e),this.Pa=new xg(this.ha)}get Ia(){return this.ua}Ta(e,t){const n=t?t.Ea:new Ng,r=t?t.Pa:this.Pa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=yh(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.da(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ha(u,a)>0||l&&this.ha(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Pa:s,Ea:n,Xi:o,mutatedKeys:i}}da(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const s=e.Ea.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ol()}};return n(e)-n(t)}(e.type,t.type)||this.ha(e.doc,t.doc))),this.Aa(n),r=null!=r&&r;const o=t&&!r?this.Ra():[],a=0===this.la.size&&this.current&&!r?1:0,l=a!==this.ca;return this.ca=a,0!==s.length||l?{snapshot:new Ag(this.query,e.Pa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:o}:{Va:o}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Ng,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach((e=>this.ua=this.ua.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ua=this.ua.delete(e))),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=Ph(),this.Pa.forEach((e=>{this.ma(e.key)&&(this.la=this.la.add(e.key))}));const t=[];return e.forEach((e=>{this.la.has(e)||t.push(new Wg(e))})),this.la.forEach((n=>{e.has(n)||t.push(new Hg(n))})),t}fa(e){this.ua=e.hs,this.la=Ph();const t=this.Ta(e.documents);return this.applyChanges(t,!0)}ga(){return Ag.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class Qg{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Yg{constructor(e){this.key=e,this.pa=!1}}class Jg{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new Eh((e=>gh(e)),mh),this.Sa=new Map,this.ba=new Set,this.Da=new jc(Rl.comparator),this.Ca=new Map,this.va=new Wp,this.Fa={},this.Ma=new Map,this.xa=_p.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}async function Xg(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=kv(e);let i;const s=r.wa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await Zg(r,t,n,!0),i}async function $g(e,t){const n=kv(e);await Zg(n,t,!0,!1)}async function Zg(e,t,n,r){const i=await vm(e.localStore,hh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await ev(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&eg(e.remoteStore,i),a}async function ev(e,t,n,r,i){e.Na=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ta(n);i.Xi&&(i=await wm(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ta(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return dv(e,t.targetId,a.Va),a.snapshot}(e,t,n,r);const s=await wm(e.localStore,t,!0),o=new Kg(t,s.hs),a=o.Ta(s.documents),l=Ad.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);dv(e,n,c.Va);const u=new Qg(t,n,o);return e.wa.set(t,u),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),c.snapshot}async function tv(e,t,n){const r=ll(e),i=r.wa.get(t),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter((e=>!mh(e,t)))),void r.wa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ym(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tg(r.remoteStore,i.targetId),uv(r,i.targetId)})).catch(ql)):(uv(r,i.targetId),await ym(r.localStore,i.targetId,!0))}async function nv(e,t){const n=ll(e),r=n.wa.get(t),i=n.Sa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tg(n.remoteStore,r.targetId))}async function rv(e,t){const n=ll(e);try{const e=await function(e,t){const n=ll(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Kc.EMPTY_BYTE_STRING,kl.min()).withLastLimboFreeSnapshotVersion(kl.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Qr.updateTargetData(e,c))}));let a=Ih(),l=Ph();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(mm(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(kl.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Gl.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ca.get(t);r&&(al(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.pa=!0:e.modifiedDocuments.size>0?al(r.pa):e.removedDocuments.size>0&&(al(r.pa),r.pa=!1))})),await mv(n,e,t)}catch(e){await ql(e)}}function iv(e,t,n){const r=ll(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wa.forEach(((n,r)=>{const i=r.view.G_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=ll(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.G_(t)&&(r=!0)})),r&&Fg(n)}(r.eventManager,t),e.length&&r.ya.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function sv(e,t,n){const r=ll(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ca.get(t),s=i&&i.key;if(s){let e=new jc(Rl.comparator);e=e.insert(s,ku.newNoDocument(s,kl.min()));const n=Ph().add(s),i=new Nd(kl.min(),new Map,new jc(El),e,n);await rv(r,i),r.Da=r.Da.remove(s),r.Ca.delete(t),pv(r)}else await ym(r.localStore,t,!1).then((()=>uv(r,t,n))).catch(ql)}async function ov(e,t){const n=ll(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ll(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Gl.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);al(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ph();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);cv(n,r,null),lv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mv(n,e)}catch(e){await ql(e)}}async function av(e,t,n){const r=ll(e);try{const e=await function(e,t){const n=ll(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(al(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);cv(r,t,n),lv(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await mv(r,e)}catch(n){await ql(n)}}function lv(e,t){(e.Ma.get(t)||[]).forEach((e=>{e.resolve()})),e.Ma.delete(t)}function cv(e,t,n){const r=ll(e);let i=r.Fa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Fa[r.currentUser.toKey()]=i}}function uv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Sa.get(t))e.wa.delete(r),n&&e.ya.La(r,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach((t=>{e.va.containsKey(t)||hv(e,t)}))}function hv(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);null!==n&&(tg(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),pv(e))}function dv(e,t,n){for(const r of n)r instanceof Hg?(e.va.addReference(r.key,t),fv(e,r)):r instanceof Wg?(nl("SyncEngine","Document no longer in limbo: "+r.key),e.va.removeReference(r.key,t),e.va.containsKey(r.key)||hv(e,r.key)):ol()}function fv(e,t){const n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(nl("SyncEngine","New document in limbo: "+n),e.ba.add(r),pv(e))}function pv(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new Rl(xl.fromString(t)),r=e.xa.next();e.Ca.set(r,new Yg(n)),e.Da=e.Da.insert(n,r),eg(e.remoteStore,new wf(hh(ah(n.path)),r,"TargetPurposeLimboResolution",nc._e))}}async function mv(e,t,n){const r=ll(e),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach(((e,a)=>{o.push(r.Na(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=lm.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.ya.u_(i),await async function(e,t){const n=ll(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Gl.forEach(t,(t=>Gl.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Gl.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Yl(e))throw e;nl("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function gv(e,t){const n=ll(e);if(!n.currentUser.isEqual(t)){nl("SyncEngine","User change. New user:",t.toKey());const e=await fm(n.localStore,t);n.currentUser=t,function(e,t){e.Ma.forEach((e=>{e.forEach((e=>{e.reject(new ul(cl.CANCELLED,t))}))})),e.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await mv(n,e.us)}}function vv(e,t){const n=ll(e),r=n.Ca.get(t);if(r&&r.pa)return Ph().add(r.key);{let e=Ph();const r=n.Sa.get(t);if(!r)return e;for(const t of r){const r=n.wa.get(t);e=e.unionWith(r.view.Ia)}return e}}async function yv(e,t){const n=ll(e),r=await wm(n.localStore,t.query,!0),i=t.view.fa(r);return n.isPrimaryClient&&dv(n,t.targetId,i.Va),i}async function wv(e,t){const n=ll(e);return _m(n.localStore,t).then((e=>mv(n,e)))}async function bv(e,t,n,r){const i=ll(e),s=await function(e,t){const n=ll(e),r=ll(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Gl.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await fg(i.remoteStore):"acknowledged"===n||"rejected"===n?(cv(i,t,r||null),lv(i,t),function(e,t){ll(ll(e).mutationQueue).Mn(t)}(i.localStore,t)):ol(),await mv(i,s)):nl("SyncEngine","Cannot apply mutation batch with id: "+t)}async function _v(e,t,n){const r=ll(e),i=[],s=[];for(const o of t){let e;const t=r.Sa.get(o);if(t&&0!==t.length){e=await vm(r.localStore,hh(t[0]));for(const e of t){const t=r.wa.get(e),n=await yv(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await bm(r.localStore,o);e=await vm(r.localStore,t),await ev(r,Ev(t),o,!1,e.resumeToken)}i.push(e)}return r.ya.u_(s),i}function Ev(e){return oh(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Sv(e){return function(e){return ll(ll(e).persistence).Bi()}(ll(e).localStore)}async function Iv(e,t,n,r){const i=ll(e);if(i.Oa)return void nl("SyncEngine","Ignoring unexpected query state notification.");const s=i.Sa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await _m(i.localStore,wh(s[0])),r=Nd.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Kc.EMPTY_BYTE_STRING);await mv(i,e,r);break}case"rejected":await ym(i.localStore,t,!0),uv(i,t,r);break;default:ol()}}async function Tv(e,t,n){const r=kv(e);if(r.Oa){for(const e of t){if(r.Sa.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){nl("SyncEngine","Adding an already active target "+e);continue}const t=await bm(r.localStore,e),n=await vm(r.localStore,t);await ev(r,Ev(t),n.targetId,!1,n.resumeToken),eg(r.remoteStore,n)}for(const e of n)r.Sa.has(e)&&await ym(r.localStore,e,!1).then((()=>{tg(r.remoteStore,e),uv(r,e)})).catch(ql)}}function kv(e){const t=ll(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sv.bind(null,t),t.ya.u_=Lg.bind(null,t.eventManager),t.ya.La=Mg.bind(null,t.eventManager),t}function Cv(e){const t=ll(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ov.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=av.bind(null,t),t}class xv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Gm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return dm(this.persistence,new um,e.initialUser,this.serializer)}createPersistence(e){return new $p(em.Hr,this.serializer)}createSharedClientState(e){return new Pm}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Nv extends xv{constructor(e,t,n){super(),this.ka=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ka.initialize(this,e),await Cv(this.ka.syncEngine),await fg(this.ka.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return dm(this.persistence,new um,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new xp(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new tc(t,this.persistence);return new ec(e.asyncQueue,n)}createPersistence(e){const t=am(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?fp.withCacheSize(this.cacheSizeBytes):fp.DEFAULT;return new im(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,zm(),qm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Pm}}class Av extends Nv{constructor(e,t){super(e,t,!1),this.ka=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ka.syncEngine;this.sharedClientState instanceof Dm&&(this.sharedClientState.syncEngine={Zs:bv.bind(null,t),Xs:Iv.bind(null,t),eo:Tv.bind(null,t),Bi:Sv.bind(null,t),Ys:wv.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=ll(e);if(kv(n),Cv(n),!0===t&&!0!==n.Oa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await _v(n,e.toArray());n.Oa=!0,await Sg(n.remoteStore,!0);for(const r of t)eg(n.remoteStore,r)}else if(!1===t&&!1!==n.Oa){const e=[];let t=Promise.resolve();n.Sa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(uv(n,i),ym(n.localStore,i,!0)))),tg(n.remoteStore,i)})),await t,await _v(n,e),function(e){const t=ll(e);t.Ca.forEach(((e,n)=>{tg(t.remoteStore,n)})),t.va.mr(),t.Ca=new Map,t.Da=new jc(Rl.comparator)}(n),n.Oa=!1,await Sg(n.remoteStore,!1)}}(this.ka.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=zm();if(!Dm.D(t))throw new ul(cl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=am(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dm(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Rv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>iv(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=gv.bind(null,this.syncEngine),await Sg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Dg}createDatastore(e){const t=Gm(e.databaseInfo.databaseId),n=function(e){return new Bm(e)}(e.databaseInfo);return function(e,t,n,r){return new Ym(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Xm(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>iv(this.syncEngine,e,0)),Lm.D()?new Lm:new Om)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Jg(e,t,n,r,i,s);return o&&(a.Oa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=ll(e);nl("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Zm(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function Dv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Pv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):rl("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Ov{constructor(e,t){this.Ka=e,this.serializer=t,this.metadata=new hl,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then((e=>{e&&e.ra()?this.metadata.resolve(e.na.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.na))))}),(e=>this.metadata.reject(e)))}close(){return this.Ka.cancel()}async getMetadata(){return this.metadata.promise}async Ba(){return await this.getMetadata(),this.Ua()}async Ua(){const e=await this.Wa();if(null===e)return null;const t=this.$a.decode(e),n=Number(t);isNaN(n)&&this.Ga("length string (".concat(t,") is not valid number"));const r=await this.za(n);return new Bg(JSON.parse(r),e.length+n)}ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Wa(){for(;this.ja()<0&&!await this.Ha(););if(0===this.buffer.length)return null;const e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async za(e){for(;this.buffer.length<e;)await this.Ha()&&this.Ga("Reached the end of bundle when more is expected.");const t=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Ga(e){throw this.Ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ha(){const e=await this.Ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Lv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ul(cl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=ll(e),r={documents:t.map((e=>Jd(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,xl.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){al(!!t.found),t.found.name,t.found.updateTime;const n=Xd(e,t.found.name),r=Wd(t.found.updateTime),i=t.found.createTime?Wd(t.found.createTime):kl.min(),s=new Iu({mapValue:{fields:t.found.fields}});return ku.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){al(!!t.missing),al(!!t.readTime);const n=Xd(e,t.missing),r=Wd(t.readTime);return ku.newNoDocument(n,r)}(e,t):ol()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());al(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new dd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Rl.fromPath(t);this.mutations.push(new fd(n,this.precondition(n)))})),await async function(e,t){const n=ll(e),r={writes:t.map((e=>sf(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,xl.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ol();t=kl.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ul(cl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(kl.min())?Zh.exists(!1):Zh.updateTime(t):Zh.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(kl.min()))throw new ul(cl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zh.updateTime(t)}return Zh.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Mv{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Ja=n.maxAttempts,this.jo=new Hm(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo((async()=>{const e=new Lv(this.datastore),t=this.Xa(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.eu(e)}))))})).catch((e=>{this.eu(e)}))}))}Xa(e){try{const t=this.updateFunction(e);return!rc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget((()=>(this.Za(),Promise.resolve())))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!bd(t)}return!1}}class Fv{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=$a.UNAUTHENTICATED,this.clientId=_l.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{nl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(nl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ul(cl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Cg(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Uv(e,t){e.asyncQueue.verifyOperationInProgress(),nl("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await fm(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function jv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Bv(e);nl("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Eg(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Eg(t.remoteStore,n))),e._onlineComponents=t}function Vv(e){return"FirebaseError"===e.name?e.code===cl.FAILED_PRECONDITION||e.code===cl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Bv(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){nl("FirestoreClient","Using user provided OfflineComponentProvider");try{await Uv(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Vv(n))throw n;il("Error using user provided cache. Falling back to memory cache: "+n),await Uv(e,new xv)}}else nl("FirestoreClient","Using default OfflineComponentProvider"),await Uv(e,new xv);return e._offlineComponents}async function zv(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(nl("FirestoreClient","Using user provided OnlineComponentProvider"),await jv(e,e._uninitializedComponentsProvider._online)):(nl("FirestoreClient","Using default OnlineComponentProvider"),await jv(e,new Rv))),e._onlineComponents}function qv(e){return Bv(e).then((e=>e.persistence))}function Gv(e){return Bv(e).then((e=>e.localStore))}function Hv(e){return zv(e).then((e=>e.remoteStore))}function Wv(e){return zv(e).then((e=>e.syncEngine))}function Kv(e){return zv(e).then((e=>e.datastore))}async function Qv(e){const t=await zv(e),n=t.eventManager;return n.onListen=Xg.bind(null,t.syncEngine),n.onUnlisten=tv.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=$g.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=nv.bind(null,t.syncEngine),n}function Yv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new hl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Pv({next:s=>{t.enqueueAndForget((()=>Og(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new ul(cl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new ul(cl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Vg(ah(n.path),s,{includeMetadataChanges:!0,ta:!0});return Pg(e,o)}(await Qv(e),e.asyncQueue,t,n,r))),r.promise}function Jv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new hl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Pv({next:n=>{t.enqueueAndForget((()=>Og(e,o))),n.fromCache&&"server"===r.source?i.reject(new ul(cl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Vg(n,s,{includeMetadataChanges:!0,ta:!0});return Pg(e,o)}(await Qv(e),e.asyncQueue,t,n,r))),r.promise}function Xv(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Sd().encode(e):e,function(e,t){return new Ov(e,t)}(function(e,t){if(e instanceof Uint8Array)return Dv(e,t);if(e instanceof ArrayBuffer)return Dv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Gm(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=ll(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=ll(e),r=Wd(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Gg(r));const i=new qg(r,e.localStore,t.serializer);let s=await t.Ba();for(;s;){const e=await i.sa(s);e&&n._updateProgress(e),s=await t.Ba()}const o=await i.complete();return await mv(e,o.aa,void 0),await function(e,t){const n=ll(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o._a)}catch(e){return il("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Wv(e),i,r)}))}function $v(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Zv=new Map;function ey(e,t,n){if(!n)throw new ul(cl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ty(e,t,n,r){if(!0===t&&!0===r)throw new ul(cl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function ny(e){if(!Rl.isDocumentKey(e))throw new ul(cl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ry(e){if(Rl.isDocumentKey(e))throw new ul(cl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function iy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":ol()}function sy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ul(cl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=iy(e);throw new ul(cl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function oy(e,t){if(t<=0)throw new ul(cl.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class ay{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ul(cl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ul(cl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ty("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$v(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ul(cl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ul(cl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ul(cl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ly{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ay({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ul(cl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ul(cl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ay(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new fl;switch(e.type){case"firstParty":return new vl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ul(cl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Zv.get(e);t&&(nl("ComponentProvider","Removing Datastore"),Zv.delete(e),t.terminate())}(this),Promise.resolve()}}function cy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=sy(e,ly))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=$a.MOCK_USER;else{t=zt(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ul(cl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new $a(s)}e._authCredentials=new pl(new dl(t,n))}}class uy{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new uy(this.firestore,e,this._query)}}class hy{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hy(this.firestore,e,this._key)}}class dy extends uy{constructor(e,t,n){super(e,t,ah(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hy(this.firestore,null,new Rl(e))}withConverter(e){return new dy(this.firestore,e,this._path)}}function fy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=un(e),ey("collection","path",t),e instanceof ly){const n=xl.fromString(t,...r);return ry(n),new dy(e,null,n)}{if(!(e instanceof hy||e instanceof dy))throw new ul(cl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(xl.fromString(t,...r));return ry(n),new dy(e.firestore,null,n)}}function py(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=un(e),1===arguments.length&&(t=_l.newId()),ey("doc","path",t),e instanceof ly){const n=xl.fromString(t,...r);return ny(n),new hy(e,null,new Rl(n))}{if(!(e instanceof hy||e instanceof dy))throw new ul(cl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(xl.fromString(t,...r));return ny(n),new hy(e.firestore,e instanceof dy?e.converter:null,new Rl(n))}}function my(e,t){return e=un(e),t=un(t),(e instanceof hy||e instanceof dy)&&(t instanceof hy||t instanceof dy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function gy(e,t){return e=un(e),t=un(t),e instanceof uy&&t instanceof uy&&e.firestore===t.firestore&&mh(e._query,t._query)&&e.converter===t.converter}class vy{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Hm(this,"async_queue_retry"),this.cu=()=>{const e=qm();e&&nl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=qm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const t=qm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise((()=>{}));const t=new hl;return this.hu((()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ru.push(e),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(Rx){if(!Yl(Rx))throw Rx;nl("AsyncQueue","Operation failed with retryable error: "+Rx)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(e){const t=this.nu.then((()=>(this._u=!0,e().catch((e=>{this.ou=e,this._u=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw rl("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this._u=!1,e))))));return this.nu=t,t}enqueueAfterDelay(e,t,n){this.lu(),this.uu.indexOf(e)>-1&&(t=0);const r=kg.createAndSchedule(this,e,t,n,(e=>this.Iu(e)));return this.su.push(r),r}lu(){this.ou&&ol()}verifyOperationInProgress(){}async Tu(){let e;do{e=this.nu,await e}while(e!==this.nu)}Eu(e){for(const t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then((()=>{this.su.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.su)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tu()}))}Au(e){this.uu.push(e)}Iu(e){const t=this.su.indexOf(e);this.su.splice(t,1)}}function yy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class wy{constructor(){this._progressObserver={},this._taskCompletionResolver=new hl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class by extends ly{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new vy,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ey(this),this._firestoreClient.terminate()}}function _y(e){return e._firestoreClient||Ey(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ey(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new tu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,$v(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Fv(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Sy(e,t,n){const r=new hl;return e.asyncQueue.enqueue((async()=>{try{await Uv(e,n),await jv(e,t),r.resolve()}catch(e){const n=e;if(!Vv(n))throw n;il("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Iy(e){return function(e){const t=new hl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=ll(e);og(n.remoteStore)||nl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=ll(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ma.get(e)||[];r.push(t),n.Ma.set(e,r)}catch(e){const n=Cg(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Wv(e),t))),t.promise}(_y(e=sy(e,by)))}function Ty(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await qv(e),n=await Hv(e);return t.setNetworkEnabled(!0),function(e){const t=ll(e);return t.v_.delete(0),$m(t)}(n)}))}(_y(e=sy(e,by)))}function ky(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await qv(e),n=await Hv(e);return t.setNetworkEnabled(!1),async function(e){const t=ll(e);t.v_.add(0),await Zm(t),t.x_.set("Offline")}(n)}))}(_y(e=sy(e,by)))}function Cy(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=ll(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await Gv(e),t)))}(_y(e=sy(e,by)),t).then((t=>t?new uy(e,null,t.query):null))}function xy(e){if(e._initialized||e._terminated)throw new ul(cl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ny{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ny(Kc.fromBase64String(e))}catch(e){throw new ul(cl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Ny(Kc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ay{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ul(cl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Al(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ry{constructor(e){this._methodName=e}}class Dy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ul(cl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ul(cl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return El(this._lat,e._lat)||El(this._long,e._long)}}const Py=/^__.*__$/;class Oy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ld(e,this.data,this.fieldMask,t,this.fieldTransforms):new ad(e,this.data,t,this.fieldTransforms)}}class Ly{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ld(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function My(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ol()}}class Fy{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Fy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.pu(e),r}yu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.Ru(),r}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return rw(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(My(this.Vu)&&Py.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class Uy{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Gm(e)}Cu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Fy({Vu:e,methodName:t,Du:n,path:Al.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jy(e){const t=e._freezeSettings(),n=Gm(e._databaseId);return new Uy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Vy(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cu(s.merge||s.mergeFields?2:0,t,n,i);Zy("Data must be an object, but it was:",o,r);const a=Xy(r,o);let l,c;if(s.merge)l=new Hc(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=ew(t,r,n);if(!o.contains(i))throw new ul(cl.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));iw(e,i)||e.push(i)}l=new Hc(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new Oy(new Iu(a),l,c)}class By extends Ry{_toFieldTransform(e){if(2!==e.Vu)throw 1===e.Vu?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof By}}function zy(e,t,n){return new Fy({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class qy extends Ry{_toFieldTransform(e){return new Xh(e.path,new qh)}isEqual(e){return e instanceof qy}}class Gy extends Ry{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=zy(this,e,!0),n=this.vu.map((e=>Jy(e,t))),r=new Gh(n);return new Xh(e.path,r)}isEqual(e){return e instanceof Gy&&tn(this.vu,e.vu)}}class Hy extends Ry{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=zy(this,e,!0),n=this.vu.map((e=>Jy(e,t))),r=new Wh(n);return new Xh(e.path,r)}isEqual(e){return e instanceof Hy&&tn(this.vu,e.vu)}}class Wy extends Ry{constructor(e,t){super(e),this.Fu=t}_toFieldTransform(e){const t=new Qh(e.serializer,Uh(e.serializer,this.Fu));return new Xh(e.path,t)}isEqual(e){return e instanceof Wy&&this.Fu===e.Fu}}function Ky(e,t,n,r){const i=e.Cu(1,t,n);Zy("Data must be an object, but it was:",i,r);const s=[],o=Iu.empty();Fc(r,((e,r)=>{const a=nw(t,e,n);r=un(r);const l=i.yu(a);if(r instanceof By)s.push(a);else{const e=Jy(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Hc(s);return new Ly(o,a,i.fieldTransforms)}function Qy(e,t,n,r,i,s){const o=e.Cu(1,t,n),a=[ew(t,r,n)],l=[i];if(s.length%2!=0)throw new ul(cl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(ew(t,s[d])),l.push(s[d+1]);const c=[],u=Iu.empty();for(let d=a.length-1;d>=0;--d)if(!iw(c,a[d])){const e=a[d];let t=l[d];t=un(t);const n=o.yu(e);if(t instanceof By)c.push(e);else{const r=Jy(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Hc(c);return new Ly(u,h,o.fieldTransforms)}function Yy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Jy(n,e.Cu(r?4:3,t))}function Jy(e,t){if($y(e=un(e)))return Zy("Unsupported field value:",t,e),Xy(e,t);if(e instanceof Ry)return function(e,t){if(!My(t.Vu))throw t.Su("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Su("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&4!==t.Vu)throw t.Su("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Jy(i,t.wu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=un(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Uh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Tl.fromDate(e);return{timestampValue:qd(t.serializer,n)}}if(e instanceof Tl){const n=new Tl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:qd(t.serializer,n)}}if(e instanceof Dy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ny)return{bytesValue:Gd(t.serializer,e._byteString)};if(e instanceof hy){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Su("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Kd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Su("Unsupported field value: ".concat(iy(e)))}(e,t)}function Xy(e,t){const n={};return Uc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fc(e,((e,r)=>{const i=Jy(r,t.fu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function $y(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Tl||e instanceof Dy||e instanceof Ny||e instanceof hy||e instanceof Ry)}function Zy(e,t,n){if(!$y(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=iy(n);throw"an object"===r?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function ew(e,t,n){if((t=un(t))instanceof Ay)return t._internalPath;if("string"==typeof t)return nw(e,t);throw rw("Field path arguments must be of type string or ",e,!1,void 0,n)}const tw=new RegExp("[~\\*/\\[\\]]");function nw(e,t,n){if(t.search(tw)>=0)throw rw("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Ay(...t.split("."))._internalPath}catch(Gr){throw rw("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function rw(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new ul(cl.INVALID_ARGUMENT,a+e+l)}function iw(e,t){return e.some((e=>e.isEqual(t)))}class sw{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new hy(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ow(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(aw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ow extends sw{data(){return super.data()}}function aw(e,t){return"string"==typeof t?nw(e,t):t instanceof Ay?t._internalPath:t._delegate._internalPath}function lw(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ul(cl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cw{}class uw extends cw{}function hw(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof cw&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof fw)).length,n=e.filter((e=>e instanceof dw)).length;if(t>1||t>0&&n>0)throw new ul(cl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class dw extends uw{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new dw(e,t,n)}_apply(e){const t=this._parse(e);return _w(e._query,t),new uy(e.firestore,e.converter,fh(e._query,t))}_parse(e){const t=jy(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ul(cl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){bw(o,s);const t=[];for(const n of o)t.push(ww(r,e,n));a={arrayValue:{values:t}}}else a=ww(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||bw(o,s),a=Yy(n,t,o,"in"===s||"not-in"===s);return Pu.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class fw extends cw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fw(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Ou.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)_w(n,i),n=fh(n,i)}(e._query,t),new uy(e.firestore,e.converter,fh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class pw extends uw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pw(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ul(cl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ul(cl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Au(t,n)}(e._query,this._field,this._direction);return new uy(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new sh(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class mw extends uw{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new mw(e,t,n)}_apply(e){return new uy(e.firestore,e.converter,ph(e._query,this._limit,this._limitType))}}class gw extends uw{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new gw(e,t,n)}_apply(e){const t=yw(e,this.type,this._docOrFields,this._inclusive);return new uy(e.firestore,e.converter,function(e,t){return new sh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class vw extends uw{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new vw(e,t,n)}_apply(e){const t=yw(e,this.type,this._docOrFields,this._inclusive);return new uy(e.firestore,e.converter,function(e,t){return new sh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function yw(e,t,n,r){if(n[0]=un(n[0]),n[0]instanceof sw)return function(e,t,n,r,i){if(!r)throw new ul(cl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of uh(e))if(o.field.isKeyField())s.push(du(t,r.key));else{const e=r.data.field(o.field);if($c(e))throw new ul(cl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new ul(cl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Cu(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=jy(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new ul(cl.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new ul(cl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!ch(e)&&-1!==s.indexOf("/"))throw new ul(cl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(xl.fromString(s));if(!Rl.isDocumentKey(n))throw new ul(cl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Rl(n);a.push(du(t,i))}else{const e=Yy(n,r,s);a.push(e)}}return new Cu(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function ww(e,t,n){if("string"==typeof(n=un(n))){if(""===n)throw new ul(cl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ch(t)&&-1!==n.indexOf("/"))throw new ul(cl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(xl.fromString(n));if(!Rl.isDocumentKey(r))throw new ul(cl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return du(e,new Rl(r))}if(n instanceof hy)return du(e,n._key);throw new ul(cl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(iy(n),"."))}function bw(e,t){if(!Array.isArray(e)||0===e.length)throw new ul(cl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function _w(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ul(cl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ul(cl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Ew{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(su(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ol()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Fc(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Dy(Jc(e.latitude),Jc(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Zc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(eu(e));default:return null}}convertTimestamp(e){const t=Yc(e);return new Tl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=xl.fromString(e);al(yf(n));const r=new nu(n.get(1),n.get(3)),i=new Rl(n.popFirst(5));return r.isEqual(t)||rl("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Sw(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Iw extends Ew{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ny(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hy(this.firestore,null,t)}}class Tw{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kw extends sw{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Cw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(aw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Cw extends kw{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class xw{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Tw(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Cw(this._firestore,this._userDataWriter,n.key,n,new Tw(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ul(cl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Cw(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Tw(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Cw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Tw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Nw(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Nw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ol()}}function Aw(e,t){return e instanceof kw&&t instanceof kw?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof xw&&t instanceof xw&&e._firestore===t._firestore&&gy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Rw extends Ew{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ny(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hy(this.firestore,null,t)}}function Dw(e){e=sy(e,hy);const t=sy(e.firestore,by),n=_y(t),r=new Rw(t);return function(e,t){const n=new hl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=ll(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new ul(cl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Cg(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Gv(e),t,n))),n.promise}(n,e._key).then((n=>new kw(t,r,e._key,n,new Tw(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Pw(e){e=sy(e,uy);const t=sy(e.firestore,by),n=_y(t),r=new Rw(t);return function(e,t){const n=new hl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await wm(e,t,!0),i=new Kg(t,r.hs),s=i.Ta(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Cg(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Gv(e),t,n))),n.promise}(n,e._query).then((n=>new xw(t,r,e,n)))}function Ow(e,t,n){e=sy(e,hy);const r=sy(e.firestore,by),i=Sw(e.converter,t,n);return Uw(r,[Vy(jy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Zh.none())])}function Lw(e,t,n){e=sy(e,hy);const r=sy(e.firestore,by),i=jy(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=un(t))||t instanceof Ay?Qy(i,"updateDoc",e._key,t,n,a):Ky(i,"updateDoc",e._key,t),Uw(r,[s.toMutation(e._key,Zh.exists(!0))])}function Mw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=un(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||yy(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(yy(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof hy)h=sy(e.firestore,by),d=ah(e._key.path),u={next:t=>{n[l]&&n[l](jw(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=sy(e,uy);h=sy(t.firestore,by),d=t._query;const r=new Rw(h);u={next:e=>{n[l]&&n[l](new xw(h,r,t,e))},error:n[l+1],complete:n[l+2]},lw(e._query)}return function(e,t,n,r){const i=new Pv(r),s=new Vg(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Pg(await Qv(e),s))),()=>{i.Qa(),e.asyncQueue.enqueueAndForget((async()=>Og(await Qv(e),s)))}}(_y(h),d,c,u)}function Fw(e,t){return function(e,t){const n=new Pv(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){ll(e).W_.add(t),t.next()}(await Qv(e),n))),()=>{n.Qa(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){ll(e).W_.delete(t)}(await Qv(e),n)))}}(_y(e=sy(e,by)),yy(t)?t:{next:t})}function Uw(e,t){return function(e,t){const n=new hl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Cv(e);try{const e=await function(e,t){const n=ll(e),r=Tl.now(),i=t.reduce(((e,t)=>e.add(t.key)),Ph());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Ih(),l=Ph();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=sd(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new ld(e.key,t,Tu(t.value.mapValue),Zh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Ch(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Fa[e.currentUser.toKey()];r||(r=new jc(El)),r=r.insert(t,n),e.Fa[e.currentUser.toKey()]=r}(r,e.batchId,n),await mv(r,e.changes),await fg(r.remoteStore)}catch(e){const t=Cg(e,"Failed to persist write");n.reject(t)}}(await Wv(e),t,n))),n.promise}(_y(e),t)}function jw(e,t,n){const r=n.docs.get(t._key),i=new Rw(e);return new kw(e,i,t._key,r,new Tw(n.hasPendingWrites,n.fromCache),t.converter)}const Vw={maxAttempts:5};class Bw{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=jy(e)}set(e,t,n){this._verifyNotCommitted();const r=zw(e,this._firestore),i=Sw(r.converter,t,n),s=Vy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Zh.none())),this}update(e,t,n){this._verifyNotCommitted();const r=zw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=un(t))||t instanceof Ay?Qy(this._dataReader,"WriteBatch.update",r._key,t,n,o):Ky(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Zh.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zw(e,this._firestore);return this._mutations=this._mutations.concat(new dd(t._key,Zh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ul(cl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zw(e,t){if((e=un(e)).firestore!==t)throw new ul(cl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class qw extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=jy(e)}get(e){const t=zw(e,this._firestore),n=new Iw(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return ol();const r=e[0];if(r.isFoundDocument())return new sw(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new sw(this._firestore,n,t._key,null,t.converter);throw ol()}))}set(e,t,n){const r=zw(e,this._firestore),i=Sw(r.converter,t,n),s=Vy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=zw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=un(t))||t instanceof Ay?Qy(this._dataReader,"Transaction.update",r._key,t,n,o):Ky(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=zw(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zw(e,this._firestore),n=new Rw(this._firestore);return super.get(e).then((e=>new kw(this._firestore,n,t._key,e._document,new Tw(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Za=e}(sr),Jn(new hn("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new by(new ml(e.getProvider("auth-internal")),new wl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ul(cl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),hr(Xa,"4.6.0",e),hr(Xa,"4.6.0","esm2017")}();function Gw(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ul("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Hw(){if("undefined"===typeof Uint8Array)throw new ul("unimplemented","Uint8Arrays are not available in this environment.")}function Ww(){if("undefined"==typeof atob)throw new ul("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Kw{constructor(e){this._delegate=e}static fromBase64String(e){return Ww(),new Kw(Ny.fromBase64String(e))}static fromUint8Array(e){return Hw(),new Kw(Ny.fromUint8Array(e))}toBase64(){return Ww(),this._delegate.toBase64()}toUint8Array(){return Hw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Qw(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Yw{enableIndexedDbPersistence(e,t){return function(e,t){xy(e=sy(e,by));const n=_y(e);if(n._uninitializedComponentsProvider)throw new ul(cl.FAILED_PRECONDITION,"SDK cache is already specified.");il("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Rv;return Sy(n,i,new Nv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){xy(e=sy(e,by));const t=_y(e);if(t._uninitializedComponentsProvider)throw new ul(cl.FAILED_PRECONDITION,"SDK cache is already specified.");il("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Rv;return Sy(t,r,new Av(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new ul(cl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new hl;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Wl.D())return Promise.resolve();const t=e+"main";await Wl.delete(t)}(am(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Jw{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof nu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||il("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};cy(this._delegate,e,t,n)}enableNetwork(){return Ty(this._delegate)}disableNetwork(){return ky(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,ty("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Iy(this._delegate)}onSnapshotsInSync(e){return Fw(this._delegate,e)}get app(){if(!this._appCompat)throw new ul("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ub(this,fy(this._delegate,e))}catch(Rx){throw nb(Rx,"collection()","Firestore.collection()")}}doc(e){try{return new tb(this,py(this._delegate,e))}catch(Rx){throw nb(Rx,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ab(this,function(e,t){if(e=sy(e,ly),ey("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ul(cl.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new uy(e,null,function(e){return new sh(xl.emptyPath(),e)}(t))}(this._delegate,e))}catch(Rx){throw nb(Rx,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=sy(e,by);const r=Object.assign(Object.assign({},Vw),n);return function(e){if(e.maxAttempts<1)throw new ul(cl.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new hl;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Kv(e);new Mv(e.asyncQueue,i,n,t,r).Ya()})),r.promise}(_y(e),(n=>t(new qw(e,n))),r)}(this._delegate,(t=>e(new $w(this,t))))}batch(){return _y(this._delegate),new Zw(new Bw(this._delegate,(e=>Uw(this._delegate,e))))}loadBundle(e){return function(e,t){const n=_y(e=sy(e,by)),r=new wy;return Xv(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Cy(this._delegate,e).then((e=>e?new ab(this,e):null))}}class Xw extends Ew{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kw(new Ny(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return tb.forKey(t,this.firestore,null)}}class $w{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Xw(e)}get(e){const t=hb(e);return this._delegate.get(t).then((e=>new sb(this._firestore,new kw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=hb(e);return n?(Gw("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=hb(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=hb(e);return this._delegate.delete(t),this}}class Zw{constructor(e){this._delegate=e}set(e,t,n){const r=hb(e);return n?(Gw("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=hb(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=hb(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class eb{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Cw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ob(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=eb.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new eb(e,new Xw(e),t),r.set(t,i)),i}}eb.INSTANCES=new WeakMap;class tb{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xw(e)}static forPath(e,t,n){if(e.length%2!==0)throw new ul("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new tb(t,new hy(t._delegate,n,new Rl(e)))}static forKey(e,t,n){return new tb(t,new hy(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new ub(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ub(this.firestore,fy(this._delegate,e))}catch(Rx){throw nb(Rx,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=un(e))instanceof hy&&my(this._delegate,e)}set(e,t){t=Gw("DocumentReference.set",t);try{return t?Ow(this._delegate,e,t):Ow(this._delegate,e)}catch(Rx){throw nb(Rx,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Lw(this._delegate,e):Lw(this._delegate,e,t,...r)}catch(Rx){throw nb(Rx,"updateDoc()","DocumentReference.update()")}}delete(){return Uw(sy((e=this._delegate).firestore,by),[new dd(e._key,Zh.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=rb(t),i=ib(t,(e=>new sb(this.firestore,new kw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Mw(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Dw(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=sy(e,hy);const t=sy(e.firestore,by);return Yv(_y(t),e._key,{source:"server"}).then((n=>jw(t,e,n)))}(this._delegate):function(e){e=sy(e,hy);const t=sy(e.firestore,by);return Yv(_y(t),e._key).then((n=>jw(t,e,n)))}(this._delegate),t.then((e=>new sb(this.firestore,new kw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new tb(this.firestore,e?this._delegate.withConverter(eb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function nb(e,t,n){return e.message=e.message.replace(t,n),e}function rb(e){for(const t of e)if("object"===typeof t&&!Qw(t))return t;return{}}function ib(e,t){var n,r;let i;return i=Qw(e[0])?e[0]:Qw(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class sb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new tb(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Aw(this._delegate,e._delegate)}}class ob extends sb{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||ol(),t}}class ab{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xw(e)}where(e,t,n){try{return new ab(this.firestore,hw(this._delegate,function(e,t,n){const r=t,i=aw("where",e);return dw._create(i,r,n)}(e,t,n)))}catch(Rx){throw nb(Rx,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ab(this.firestore,hw(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=aw("orderBy",e);return pw._create(n,t)}(e,t)))}catch(Rx){throw nb(Rx,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ab(this.firestore,hw(this._delegate,(oy("limit",t=e),mw._create("limit",t,"F"))))}catch(t){throw nb(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new ab(this.firestore,hw(this._delegate,(oy("limitToLast",t=e),mw._create("limitToLast",t,"L"))))}catch(t){throw nb(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new ab(this.firestore,hw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gw._create("startAt",t,!0)}(...arguments)))}catch(Rx){throw nb(Rx,"startAt()","Query.startAt()")}}startAfter(){try{return new ab(this.firestore,hw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gw._create("startAfter",t,!1)}(...arguments)))}catch(Rx){throw nb(Rx,"startAfter()","Query.startAfter()")}}endBefore(){try{return new ab(this.firestore,hw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vw._create("endBefore",t,!1)}(...arguments)))}catch(Rx){throw nb(Rx,"endBefore()","Query.endBefore()")}}endAt(){try{return new ab(this.firestore,hw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vw._create("endAt",t,!0)}(...arguments)))}catch(Rx){throw nb(Rx,"endAt()","Query.endAt()")}}isEqual(e){return gy(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Pw(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=sy(e,uy);const t=sy(e.firestore,by),n=_y(t),r=new Rw(t);return Jv(n,e._query,{source:"server"}).then((n=>new xw(t,r,e,n)))}(this._delegate):function(e){e=sy(e,uy);const t=sy(e.firestore,by),n=_y(t),r=new Rw(t);return lw(e._query),Jv(n,e._query).then((n=>new xw(t,r,e,n)))}(this._delegate),t.then((e=>new cb(this.firestore,new xw(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=rb(t),i=ib(t,(e=>new cb(this.firestore,new xw(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Mw(this._delegate,r,i)}withConverter(e){return new ab(this.firestore,e?this._delegate.withConverter(eb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class lb{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ob(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class cb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ab(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new ob(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new lb(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new ob(this._firestore,n))}))}isEqual(e){return Aw(this._delegate,e._delegate)}}class ub extends ab{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new tb(this.firestore,e):null}doc(e){try{return new tb(this.firestore,void 0===e?py(this._delegate):py(this._delegate,e))}catch(Rx){throw nb(Rx,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=sy(e.firestore,by),r=py(e),i=Sw(e.converter,t);return Uw(n,[Vy(jy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Zh.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new tb(this.firestore,e)))}isEqual(e){return my(this._delegate,e._delegate)}withConverter(e){return new ub(this.firestore,e?this._delegate.withConverter(eb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function hb(e){return sy(e,hy)}class db{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Ay(...t)}static documentId(){return new db(Al.keyField().canonicalString())}isEqual(e){return(e=un(e))instanceof Ay&&this._delegate._internalPath.isEqual(e._internalPath)}}class fb{constructor(e){this._delegate=e}static serverTimestamp(){const e=new qy("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new fb(e)}static delete(){const e=new By("deleteField");return e._methodName="FieldValue.delete",new fb(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Gy("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new fb(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Hy("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new fb(e)}static increment(e){const t=new Wy("increment",e);return t._methodName="FieldValue.increment",new fb(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const pb={Firestore:Jw,GeoPoint:Dy,Timestamp:Tl,Blob:Kw,Transaction:$w,WriteBatch:Zw,DocumentReference:tb,DocumentSnapshot:sb,Query:ab,QueryDocumentSnapshot:ob,QuerySnapshot:cb,CollectionReference:ub,FieldPath:db,FieldValue:fb,setLogLevel:function(e){var t;t=e,el.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var mb;(function(e,t){e.INTERNAL.registerComponent(new hn("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},pb)))})(mb=Ar,((e,t)=>new Jw(e,t,new Yw))),mb.registerVersion("@firebase/firestore-compat","0.3.29");const gb="firebasestorage.googleapis.com",vb="storageBucket";class yb extends Xt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(_b(e),"Firebase Storage: ".concat(t," (").concat(_b(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yb.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _b(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var wb,bb;function _b(e){return"storage/"+e}function Eb(){return new yb(wb.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Sb(){return new yb(wb.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ib(){return new yb(wb.CANCELED,"User canceled the upload/download.")}function Tb(){return new yb(wb.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kb(e){return new yb(wb.INVALID_ARGUMENT,e)}function Cb(){return new yb(wb.APP_DELETED,"The Firebase app was deleted.")}function xb(e){return new yb(wb.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nb(e,t){return new yb(wb.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Ab(e){throw new yb(wb.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(wb||(wb={}));class Rb{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Rb.makeFromUrl(e,t)}catch(Rx){return new Rb(e,"")}if(""===n.path)return n;throw r=e,new yb(wb.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===gb?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Rb(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new yb(wb.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Db{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Pb(e){return"string"===typeof e||e instanceof String}function Ob(e){return Lb()&&e instanceof Blob}function Lb(){return"undefined"!==typeof Blob}function Mb(e,t,n,r){if(r<t)throw kb("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw kb("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Fb(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Ub(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function jb(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(bb||(bb={}));class Vb{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Bb(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===bb.NO_ERROR,i=n.getStatus();if(!t||jb(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===bb.ABORT;return void e(!1,new Bb(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Bb(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(Rx){r(Rx)}else if(null!==i){const e=Eb();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Cb():Ib())}else{r(Sb())}};this.canceled_?t(0,new Bb(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function m(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Bb{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function zb(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function qb(){const e=zb();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Lb())return new Blob(n);throw new yb(wb.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Gb(e){if("undefined"===typeof atob)throw t="base-64",new yb(wb.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const Hb={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wb{constructor(e,t){this.data=e,this.contentType=t||null}}function Kb(e,t){switch(e){case Hb.RAW:return new Wb(Qb(t));case Hb.BASE64:case Hb.BASE64URL:return new Wb(Yb(e,t));case Hb.DATA_URL:return new Wb(function(e){const t=new Jb(e);return t.base64?Yb(Hb.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(Rx){throw Nb(Hb.DATA_URL,"Malformed data URL.")}return Qb(t)}(t.rest)}(t),new Jb(t).contentType)}throw Eb()}function Qb(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Yb(e,t){switch(e){case Hb.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Nb(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Hb.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Nb(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Gb(t)}catch(Rx){if(Rx.message.includes("polyfill"))throw Rx;throw Nb(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Jb{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Nb(Hb.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Xb{constructor(e,t){let n=0,r="";Ob(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ob(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Xb(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Xb(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Lb()){const e=t.map((e=>e instanceof Xb?e.data_:e));return new Xb(qb.apply(null,e))}{const e=t.map((e=>Pb(e)?Kb(Hb.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Xb(r,!0)}}uploadData(){return this.data_}}function $b(e){let t;try{t=JSON.parse(e)}catch(Rx){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Zb(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function e_(e,t){return t}class t_{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||e_}}let n_=null;function r_(){if(n_)return n_;const e=[];e.push(new t_("bucket")),e.push(new t_("generation")),e.push(new t_("metageneration")),e.push(new t_("name","fullPath",!0));const t=new t_("name");t.xform=function(e,t){return function(e){return!Pb(e)||e.length<2?e:Zb(e)}(t)},e.push(t);const n=new t_("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new t_("timeCreated")),e.push(new t_("updated")),e.push(new t_("md5Hash",null,!0)),e.push(new t_("cacheControl",null,!0)),e.push(new t_("contentDisposition",null,!0)),e.push(new t_("contentEncoding",null,!0)),e.push(new t_("contentLanguage",null,!0)),e.push(new t_("contentType",null,!0)),e.push(new t_("metadata","customMetadata",!0)),n_=e,n_}function i_(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new Rb(n,r);return t._makeStorageReference(i)}})}(r,e),r}function s_(e,t,n){const r=$b(t);if(null===r)return null;return i_(e,r,n)}function o_(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const a_="prefixes",l_="items";function c_(e,t,n){const r=$b(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[a_])for(const i of n[a_]){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new Rb(t,n));r.prefixes.push(s)}if(n[l_])for(const i of n[l_]){const n=e._makeStorageReference(new Rb(t,i.name));r.items.push(n)}return r}(e,t,r)}class u_{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function h_(e){if(!e)throw Eb()}function d_(e,t){return function(n,r){const i=s_(e,r,t);return h_(null!==i),i}}function f_(e,t){return function(n,r){const i=s_(e,r,t);return h_(null!==i),function(e,t,n,r){const i=$b(t);if(null===i)return null;if(!Pb(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return Fb("/b/"+o(i)+"/o/"+o(s),n,r)+Ub({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function p_(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new yb(wb.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new yb(wb.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new yb(wb.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new yb(wb.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function m_(e){const t=p_(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new yb(wb.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function g_(e,t,n){const r=Fb(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new u_(r,"GET",d_(e,n),i);return s.errorHandler=m_(t),s}function v_(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=Fb(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new u_(o,"GET",function(e,t){return function(n,r){const i=c_(e,t,r);return h_(null!==i),i}}(e,t.bucket),a);return l.urlParams=s,l.errorHandler=p_(t),l}function y_(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function w_(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=y_(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+o_(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=Xb.getBlob(c,r,u);if(null===h)throw Tb();const d={name:l.fullPath},f=Fb(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new u_(f,"POST",d_(e,n),p);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=p_(t),m}class b_{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function __(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(Rx){h_(!1)}return h_(!!n&&-1!==(t||["active"]).indexOf(n)),n}const E_=262144;function S_(e,t,n,r,i,s,o,a){const l=new b_(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new yb(wb.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const h=l.current,d=h+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(l.current)},m=r.slice(h,d);if(null===m)throw Tb();const g=t.maxUploadRetryTime,v=new u_(n,"POST",(function(e,n){const i=__(e,["active","final"]),o=l.current+u,a=r.size();let c;return c="final"===i?d_(t,s)(e,n):null,new b_(o,a,"final"===i,c)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=a||null,v.errorHandler=p_(e),v}const I_={STATE_CHANGED:"state_changed"},T_={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function k_(e){switch(e){case"running":case"pausing":case"canceling":return T_.RUNNING;case"paused":return T_.PAUSED;case"success":return T_.SUCCESS;case"canceled":return T_.CANCELED;default:return T_.ERROR}}class C_{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function x_(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let N_=null;class A_{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=bb.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=bb.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=bb.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Ab("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ab("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ab("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Rx){return-1}}getResponse(){if(!this.sent_)throw Ab("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ab("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class R_ extends A_{initXhr(){this.xhr_.responseType="text"}}function D_(){return N_?N_():new R_}class P_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=r_(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(wb.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(jb(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=Sb()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(wb.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=y_(t,r,i),a={name:o.fullPath},l=Fb(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=o_(o,n),h=e.maxUploadRetryTime,d=new u_(l,"POST",(function(e){let t;__(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(Rx){h_(!1)}return h_(Pb(t)),t}),h);return d.urlParams=a,d.headers=c,d.body=u,d.errorHandler=p_(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,D_,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new u_(n,"POST",(function(e){const t=__(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Rx){h_(!1)}n||h_(!1);const i=Number(n);return h_(!isNaN(i)),new b_(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=p_(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,D_,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=E_*this._chunkMultiplier,t=new b_(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=S_(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(Rx){return this._error=Rx,void this._transition("error")}const o=this._ref.storage._makeRequest(s,D_,r,i,!1);this._request=o,o.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(E_*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=g_(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,D_,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=w_(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,D_,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ib(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=k_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new C_(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(k_(this._state)){case T_.SUCCESS:x_(this._resolve.bind(null,this.snapshot))();break;case T_.CANCELED:case T_.ERROR:x_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(k_(this._state)){case T_.RUNNING:case T_.PAUSED:e.next&&x_(e.next.bind(e,this.snapshot))();break;case T_.SUCCESS:e.complete&&x_(e.complete.bind(e))();break;default:e.error&&x_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class O_{constructor(e,t){this._service=e,this._location=t instanceof Rb?t:Rb.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new O_(e,t)}get root(){const e=new Rb(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Zb(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Rb(this._location.bucket,e);return new O_(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw xb(e)}}function L_(e){const t={prefixes:[],items:[]};return M_(e,t).then((()=>t))}async function M_(e,t,n){const r={pageToken:n},i=await F_(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await M_(e,t,i.nextPageToken)}function F_(e,t){null!=t&&"number"===typeof t.maxResults&&Mb("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=v_(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,D_)}function U_(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=Fb(t.fullServerUrl(),e.host,e._protocol),s=o_(n,r),o=e.maxOperationRetryTime,a=new u_(i,"PATCH",d_(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=m_(t),a}(e.storage,e._location,t,r_());return e.storage.makeRequestWithTokens(n,D_)}function j_(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Fb(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new u_(r,"GET",f_(e,n),i);return s.errorHandler=m_(t),s}(e.storage,e._location,r_());return e.storage.makeRequestWithTokens(t,D_).then((e=>{if(null===e)throw new yb(wb.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function V_(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=Fb(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new u_(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=m_(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,D_)}function B_(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Rb(e._location.bucket,n);return new O_(e.storage,r)}function z_(e,t){if(e instanceof H_){const n=e;if(null==n._bucket)throw new yb(wb.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vb+"' property when initializing the app?");const r=new O_(n,n._bucket);return null!=t?z_(r,t):r}return void 0!==t?B_(e,t):e}function q_(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof H_)return new O_(e,t);throw kb("To use ref(service, url), the first argument must be a Storage instance.")}return z_(e,t)}function G_(e,t){const n=null===t||void 0===t?void 0:t[vb];return null==n?null:Rb.makeFromBucketSpec(n,e)}class H_{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=gb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Rb.makeFromBucketSpec(r,this._host):G_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Rb.makeFromBucketSpec(this._url,e):this._bucket=G_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Mb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Mb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new O_(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Db(Cb());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Ub(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Vb(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const W_="@firebase/storage",K_="0.12.4",Q_="storage";function Y_(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new P_(e,new Xb(t),n)}(e=un(e),t,n)}function J_(e){return function(e){e._throwIfRoot("getMetadata");const t=g_(e.storage,e._location,r_());return e.storage.makeRequestWithTokens(t,D_)}(e=un(e))}function X_(e,t){return q_(e=un(e),t)}function $_(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:zt(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function Z_(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new H_(r,i,s,n,sr)}Jn(new hn(Q_,Z_,"PUBLIC").setMultipleInstances(!0)),hr(W_,K_,""),hr(W_,K_,"esm2017");class eE{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class tE{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new eE(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new eE(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new eE(e,this,this._ref)):{next:t.next?e=>t.next(new eE(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class nE{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new rE(e,this._service)))}get items(){return this._delegate.items.map((e=>new rE(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class rE{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return B_(e,t)}(this._delegate,e);return new rE(t,this.storage)}get root(){return new rE(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new rE(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new tE(Y_(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hb.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=Kb(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new tE(new P_(this._delegate,new Xb(r.data,!0),i),this)}listAll(){return function(e){return L_(e=un(e))}(this._delegate).then((e=>new nE(e,this.storage)))}list(e){return function(e,t){return F_(e=un(e),t)}(this._delegate,e||void 0).then((e=>new nE(e,this.storage)))}getMetadata(){return J_(this._delegate)}updateMetadata(e){return function(e,t){return U_(e=un(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return j_(e=un(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return V_(e=un(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw xb(e)}}class iE{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(sE(e))throw kb("ref() expected a child path but got a URL, use refFromURL instead.");return new rE(X_(this._delegate,e),this)}refFromURL(e){if(!sE(e))throw kb("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Rb.makeFromUrl(e,this._delegate.host)}catch(Rx){throw kb("refFromUrl() expected a valid full URL but got an invalid one.")}return new rE(X_(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$_(this._delegate,e,t,n)}}function sE(e){return/^[A-Za-z]+:\/\//.test(e)}function oE(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new iE(r,i)}!function(e){const t={TaskState:T_,TaskEvent:I_,StringFormat:Hb,Storage:iE,Reference:rE};e.INTERNAL.registerComponent(new hn("storage-compat",oE,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.7")}(Ar);function aE(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const lE={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},cE="EMAIL_SIGNIN",uE="PASSWORD_RESET",hE="RECOVER_EMAIL",dE="REVERT_SECOND_FACTOR_ADDITION",fE="VERIFY_AND_CHANGE_EMAIL",pE="VERIFY_EMAIL";function mE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gE=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},vE=mE,yE=new $t("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),wE=new _n("@firebase/auth");function bE(e){if(wE.logLevel<=gn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];wE.error("Auth (".concat(sr,"): ").concat(e),...n)}}function _E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw kE(e,...n)}function EE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return kE(e,...n)}function SE(e,t,n){const r=Object.assign(Object.assign({},vE()),{[t]:n});return new $t("auth","Firebase",r).create(t,{appName:e.name})}function IE(e){return SE(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TE(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&_E(e,"argument-error"),SE(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function kE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return yE.create(e,...n)}function CE(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw kE(t,...r)}}function xE(e){const t="INTERNAL ASSERTION FAILED: "+e;throw bE(t),new Error(t)}function NE(e,t){e||xE(t)}function AE(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function RE(){return"http:"===DE()||"https:"===DE()}function DE(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class PE{constructor(e,t){this.shortDelay=e,this.longDelay=t,NE(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())||Kt()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(RE()||Wt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function OE(e,t){NE(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class LE{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void xE("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void xE("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void xE("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ME={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},FE=new PE(3e4,6e4);function UE(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function jE(e,t,n,r){return VE(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=rn(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),LE.fetch()(zE(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function VE(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ME),t);try{const t=new GE(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw HE(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw HE(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw HE(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw HE(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw SE(e,a,o);_E(e,a)}}catch(Rx){if(Rx instanceof Xt)throw Rx;_E(e,"network-request-failed",{message:String(Rx)})}}async function BE(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await jE(e,t,n,r,i);return"mfaPendingCredential"in s&&_E(e,"multi-factor-auth-required",{_serverResponse:s}),s}function zE(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?OE(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function qE(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(EE(this.auth,"network-request-failed"))),FE.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function HE(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=EE(e,t,r);return i.customData._tokenResponse=n,i}function WE(e){return void 0!==e&&void 0!==e.getResponse}function KE(e){return void 0!==e&&void 0!==e.enterprise}class QE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return qE(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function YE(e,t){return jE(e,"GET","/v2/recaptchaConfig",UE(e,t))}async function JE(e,t){return jE(e,"POST","/v1/accounts:lookup",t)}function XE(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Rx){}}function $E(e){return 1e3*Number(e)}function ZE(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return bE("JWT malformed, contained fewer than 3 sections"),null;try{const e=Mt(n);return e?JSON.parse(e):(bE("Failed to decode base64 JWT payload"),null)}catch(Rx){return bE("Caught error parsing JWT payload as JSON",null===Rx||void 0===Rx?void 0:Rx.toString()),null}}function eS(e){const t=ZE(e);return CE(t,"internal-error"),CE("undefined"!==typeof t.exp,"internal-error"),CE("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function tS(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Rx){throw Rx instanceof Xt&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Rx)&&e.auth.currentUser===e&&await e.auth.signOut(),Rx}}class nS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Rx){return void((null===Rx||void 0===Rx?void 0:Rx.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class rS{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=XE(this.lastLoginAt),this.creationTime=XE(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function iS(e){var t;const n=e.auth,r=await e.getIdToken(),i=await tS(e,JE(n,{idToken:r}));CE(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?sS(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new rS(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function sS(e){return e.map((e=>{var{providerId:t}=e,n=aE(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class oS{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){CE(e.idToken,"internal-error"),CE("undefined"!==typeof e.idToken,"internal-error"),CE("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):eS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){CE(0!==e.length,"internal-error");const t=eS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(CE(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await VE(e,{},(async()=>{const n=rn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=zE(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",LE.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new oS;return n&&(CE("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(CE("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(CE("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oS,this.toJSON())}_performRefresh(){return xE("not implemented")}}function aS(e,t){CE("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class lS{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=aE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rS(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await tS(this,this.stsTokenManager.getToken(this.auth,e));return CE(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=un(e),r=await n.getIdToken(t),i=ZE(r);CE(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:XE($E(i.auth_time)),issuedAtTime:XE($E(i.iat)),expirationTime:XE($E(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=un(e);await iS(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(CE(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new lS(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){CE(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await iS(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(er(this.auth.app))return Promise.reject(IE(this.auth));const e=await this.getIdToken();return await tS(this,async function(e,t){return jE(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;CE(y&&E,e,"internal-error");const S=oS.fromJSON(this.name,E);CE("string"===typeof y,e,"internal-error"),aS(u,e.name),aS(h,e.name),CE("boolean"===typeof w,e,"internal-error"),CE("boolean"===typeof b,e,"internal-error"),aS(d,e.name),aS(f,e.name),aS(p,e.name),aS(m,e.name),aS(g,e.name),aS(v,e.name);const I=new lS({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(I.providerData=_.map((e=>Object.assign({},e)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new oS;r.updateFromServerResponse(t);const i=new lS({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await iS(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];CE(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?sS(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new oS;o.updateFromIdToken(n);const a=new lS({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new rS(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const cS=new Map;function uS(e){NE(e instanceof Function,"Expected a class definition");let t=cS.get(e);return t?(NE(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,cS.set(e,t),t)}class hS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}hS.type="NONE";const dS=hS;function fS(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class pS{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=fS(this.userKey,r.apiKey,i),this.fullPersistenceKey=fS("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?lS._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new pS(uS(dS),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||uS(dS);const s=fS(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=lS._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new pS(i,e,n)):new pS(i,e,n)}}function mS(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(wS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(gS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_S(t))return"Blackberry";if(ES(t))return"Webos";if(vS(t))return"Safari";if((t.includes("chrome/")||yS(t))&&!t.includes("edge/"))return"Chrome";if(bS(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function gS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/firefox\//i.test(e)}function vS(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/crios\//i.test(e)}function wS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/iemobile/i.test(e)}function bS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/android/i.test(e)}function _S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/blackberry/i.test(e)}function ES(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/webos/i.test(e)}function SS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function IS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return SS(e)||bS(e)||ES(e)||_S(e)||/windows phone/i.test(e)||wS(e)}function TS(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=mS(qt());break;case"Worker":t="".concat(mS(qt()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(sr,"/").concat(r)}class kS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(Rx){r(Rx)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Rx){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Rx||void 0===Rx?void 0:Rx.message})}}}class CS{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class xS{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new AS(this),this.idTokenSubscription=new AS(this),this.beforeStateQueue=new kS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=uS(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await pS.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Rx){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await JE(this,{idToken:e}),n=await lS._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(er(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Rx){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(Rx)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return CE(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Rx){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await iS(e)}catch(Rx){if((null===Rx||void 0===Rx?void 0:Rx.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(er(this.app))return Promise.reject(IE(this));const t=e?un(e):null;return t&&CE(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&CE(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return er(this.app)?Promise.reject(IE(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return er(this.app)?Promise.reject(IE(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(uS(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return jE(e,"GET","/v2/passwordPolicy",UE(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new CS(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $t("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return jE(e,"POST","/v2/accounts:revokeToken",UE(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&uS(e)||this._popupRedirectResolver;CE(t,this,"argument-error"),this.redirectPersistenceManager=await pS.create(this,[uS(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(CE(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return CE(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(wE.logLevel<=gn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];wE.warn("Auth (".concat(sr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function NS(e){return un(e)}class AS{constructor(e){this.auth=e,this.observer=null,this.addObserver=an((e=>this.observer=e))}get next(){return CE(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let RS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DS(e){return RS.loadJS(e)}function PS(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class OS{constructor(e){this.type="recaptcha-enterprise",this.auth=NS(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;KE(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{YE(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new QE(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&KE(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=RS.recaptchaEnterpriseScript;0!==t.length&&(t+=i),DS(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function LS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new OS(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function MS(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await LS(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await LS(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function FS(e,t,n){const r=NS(e);CE(r._canInitEmulator,r,"emulator-config-failed"),CE(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=US(t),{host:o,port:a}=function(e){const t=US(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:jS(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:jS(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function US(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function jS(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class VS{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xE("not implemented")}_getIdTokenResponse(e){return xE("not implemented")}_linkToIdToken(e,t){return xE("not implemented")}_getReauthenticationResolver(e){return xE("not implemented")}}async function BS(e,t){return jE(e,"POST","/v1/accounts:resetPassword",UE(e,t))}async function zS(e,t){return jE(e,"POST","/v1/accounts:signUp",t)}async function qS(e,t){return BE(e,"POST","/v1/accounts:signInWithPassword",UE(e,t))}async function GS(e,t){return jE(e,"POST","/v1/accounts:sendOobCode",UE(e,t))}async function HS(e,t){return GS(e,t)}async function WS(e,t){return GS(e,t)}class KS extends VS{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new KS(e,t,"password")}static _fromEmailAndCode(e,t){return new KS(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return MS(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",qS);case"emailLink":return async function(e,t){return BE(e,"POST","/v1/accounts:signInWithEmailLink",UE(e,t))}(e,{email:this._email,oobCode:this._password});default:_E(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return MS(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zS);case"emailLink":return async function(e,t){return BE(e,"POST","/v1/accounts:signInWithEmailLink",UE(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:_E(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function QS(e,t){return BE(e,"POST","/v1/accounts:signInWithIdp",UE(e,t))}class YS extends VS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new YS(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_E("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=aE(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new YS(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return QS(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,QS(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,QS(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rn(t)}return e}}const JS={USER_NOT_FOUND:"user-not-found"};class XS extends VS{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new XS({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new XS({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return BE(e,"POST","/v1/accounts:signInWithPhoneNumber",UE(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await BE(e,"POST","/v1/accounts:signInWithPhoneNumber",UE(e,t));if(n.temporaryProof)throw HE(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return BE(e,"POST","/v1/accounts:signInWithPhoneNumber",UE(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),JS)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new XS({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class $S{constructor(e){var t,n,r,i,s,o;const a=sn(on(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);CE(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=sn(on(e)).link,n=t?sn(on(t)).deep_link_id:null,r=sn(on(e)).deep_link_id;return(r?sn(on(r)).link:null)||r||n||t||e}(e);try{return new $S(t)}catch(n){return null}}}class ZS{constructor(){this.providerId=ZS.PROVIDER_ID}static credential(e,t){return KS._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=$S.parseLink(t);return CE(n,"argument-error"),KS._fromEmailAndCode(e,n.code,n.tenantId)}}ZS.PROVIDER_ID="password",ZS.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ZS.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class eI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class tI extends eI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class nI extends tI{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return CE("providerId"in t&&"signInMethod"in t,"argument-error"),YS._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return CE(e.idToken||e.accessToken,"argument-error"),YS._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return nI.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return nI.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new nI(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(Rx){return null}}}class rI extends tI{constructor(){super("facebook.com")}static credential(e){return YS._fromParams({providerId:rI.PROVIDER_ID,signInMethod:rI.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rI.credentialFromTaggedObject(e)}static credentialFromError(e){return rI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return rI.credential(t.oauthAccessToken)}catch(n){return null}}}rI.FACEBOOK_SIGN_IN_METHOD="facebook.com",rI.PROVIDER_ID="facebook.com";class iI extends tI{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return YS._fromParams({providerId:iI.PROVIDER_ID,signInMethod:iI.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return iI.credentialFromTaggedObject(e)}static credentialFromError(e){return iI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return iI.credential(n,r)}catch(i){return null}}}iI.GOOGLE_SIGN_IN_METHOD="google.com",iI.PROVIDER_ID="google.com";class sI extends tI{constructor(){super("github.com")}static credential(e){return YS._fromParams({providerId:sI.PROVIDER_ID,signInMethod:sI.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sI.credentialFromTaggedObject(e)}static credentialFromError(e){return sI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return sI.credential(t.oauthAccessToken)}catch(n){return null}}}sI.GITHUB_SIGN_IN_METHOD="github.com",sI.PROVIDER_ID="github.com";class oI extends VS{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return QS(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,QS(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,QS(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new oI(n,i):null}static _create(e,t){return new oI(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class aI extends eI{constructor(e){CE(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return aI.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return aI.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=oI.fromJSON(e);return CE(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return oI._create(r,n)}catch(Rx){return null}}}class lI extends tI{constructor(){super("twitter.com")}static credential(e,t){return YS._fromParams({providerId:lI.PROVIDER_ID,signInMethod:lI.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return lI.credentialFromTaggedObject(e)}static credentialFromError(e){return lI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return lI.credential(n,r)}catch(i){return null}}}async function cI(e,t){return BE(e,"POST","/v1/accounts:signUp",UE(e,t))}lI.TWITTER_SIGN_IN_METHOD="twitter.com",lI.PROVIDER_ID="twitter.com";class uI{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await lS._fromIdTokenResponse(e,n,r),s=hI(n);return new uI({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=hI(n);return new uI({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function hI(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class dI extends Xt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,dI.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new dI(e,t,n,r)}}function fI(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw dI._fromErrorAndOperation(e,n,t,r);throw n}))}function pI(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function mI(e,t){const n=un(e);await vI(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return jE(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=pI(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function gI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await tS(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return uI._forOperation(e,"link",r)}async function vI(e,t,n){await iS(t);const r=!1===e?"provider-already-linked":"no-such-provider";CE(pI(t.providerData).has(n)===e,t.auth,r)}async function yI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(er(r.app))return Promise.reject(IE(r));const i="reauthenticate";try{const s=await tS(e,fI(r,i,t,e),n);CE(s.idToken,r,"internal-error");const o=ZE(s.idToken);CE(o,r,"internal-error");const{sub:a}=o;return CE(e.uid===a,r,"user-mismatch"),uI._forOperation(e,i,s)}catch(Rx){throw(null===Rx||void 0===Rx?void 0:Rx.code)==="auth/".concat("user-not-found")&&_E(r,"user-mismatch"),Rx}}async function wI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(er(e.app))return Promise.reject(IE(e));const r="signIn",i=await fI(e,r,t),s=await uI._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function bI(e,t){return wI(NS(e),t)}async function _I(e,t){const n=un(e);return await vI(!1,n,t.providerId),gI(n,t)}async function EI(e,t){return yI(un(e),t)}async function SI(e,t){if(er(e.app))return Promise.reject(IE(e));const n=NS(e),r=await async function(e,t){return BE(e,"POST","/v1/accounts:signInWithCustomToken",UE(e,t))}(n,{token:t,returnSecureToken:!0}),i=await uI._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class II{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?TI._fromServerResponse(e,t):"totpInfo"in t?kI._fromServerResponse(e,t):_E(e,"internal-error")}}class TI extends II{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new TI(t)}}class kI extends II{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new kI(t)}}function CI(e,t,n){var r;CE((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),CE("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(CE(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(CE(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function xI(e){const t=NS(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function NI(e,t){await async function(e,t){return jE(e,"POST","/v1/accounts:update",UE(e,t))}(un(e),{oobCode:t})}async function AI(e,t){const n=un(e),r=await BS(n,{oobCode:t}),i=r.requestType;switch(CE(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":CE(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":CE(r.mfaInfo,n,"internal-error");default:CE(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=II._fromServerResponse(NS(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function RI(e,t){const n={identifier:t,continueUri:RE()?AE():"http://localhost"},{signinMethods:r}=await async function(e,t){return jE(e,"POST","/v1/accounts:createAuthUri",UE(e,t))}(un(e),n);return r||[]}async function DI(e,t){const n=un(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&CI(n.auth,r,t);const{email:i}=await async function(e,t){return GS(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function PI(e,t,n){const r=un(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&CI(r.auth,i,n);const{email:s}=await async function(e,t){return GS(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function OI(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=un(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await tS(i,async function(e,t){return jE(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function LI(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await tS(e,async function(e,t){return jE(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class MI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class FI extends MI{constructor(e,t,n,r){super(e,t,n),this.username=r}}class UI extends MI{constructor(e,t){super(e,"facebook.com",t)}}class jI extends FI{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class VI extends MI{constructor(e,t){super(e,"google.com",t)}}class BI extends FI{constructor(e,t,n){super(e,"twitter.com",t,n)}}function zI(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=ZE(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new MI(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new UI(s,i);case"github.com":return new jI(s,i);case"google.com":return new VI(s,i);case"twitter.com":return new BI(s,i,e.screenName||null);case"custom":case"anonymous":return new MI(s,null);default:return new MI(s,r,i)}}(n)}class qI{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new qI("enroll",e,t)}static _fromMfaPendingCredential(e){return new qI("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return qI._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return qI._fromIdtoken(e.multiFactorSession.idToken)}return null}}class GI{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=NS(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>II._fromServerResponse(n,e)));CE(r.mfaPendingCredential,n,"internal-error");const s=qI._fromMfaPendingCredential(r.mfaPendingCredential);return new GI(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await uI._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return CE(t.user,n,"internal-error"),uI._forOperation(t.user,t.operationType,o);default:_E(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class HI{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>II._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new HI(e)}async getSession(){return qI._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await tS(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await tS(this.user,function(e,t){return jE(e,"POST","/v2/accounts/mfaEnrollment:withdraw",UE(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(Rx){throw Rx}}}const WI=new WeakMap;const KI="__sak";class QI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(KI,"1"),this.storage.removeItem(KI),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class YI extends QI{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=qt();return vS(e)||SS(e)}()&&function(){try{return!(!window||window===window.top)}catch(Rx){return!1}}(),this.fallbackToPolling=IS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Qt()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}YI.type="LOCAL";const JI=YI;class XI extends QI{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}XI.type="SESSION";const $I=XI;class ZI{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new ZI(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function eT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ZI.receivers=[];class tT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=eT("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function nT(){return window}function rT(){return"undefined"!==typeof nT().WorkerGlobalScope&&"function"===typeof nT().importScripts}const iT="firebaseLocalStorageDb",sT="firebaseLocalStorage",oT="fbase_key";class aT{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function lT(e,t){return e.transaction([sT],t?"readwrite":"readonly").objectStore(sT)}function cT(){const e=indexedDB.open(iT,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(sT,{keyPath:oT})}catch(Rx){n(Rx)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(sT)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(iT);return new aT(e).toPromise()}(),t(await cT()))}))}))}async function uT(e,t,n){const r=lT(e,!0).put({[oT]:t,value:n});return new aT(r).toPromise()}function hT(e,t){const n=lT(e,!0).delete(t);return new aT(n).toPromise()}class dT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await cT()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Rx){if(t++>3)throw Rx;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ZI._getInstance(rT()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new tT(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cT();return await uT(e,KI,"1"),await hT(e,KI),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>uT(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=lT(e,!1).get(t),r=await new aT(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>hT(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=lT(e,!1).getAll();return new aT(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}dT.type="LOCAL";const fT=dT;const pT=1e12;class mT{constructor(e){this.auth=e,this.counter=pT,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new gT(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||pT;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||pT;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||pT;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class gT{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;CE(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(Rx){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(Rx){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const vT=PS("rcb"),yT=new PE(3e4,6e4);class wT{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=nT().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return CE(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&WE(nT().grecaptcha)?Promise.resolve(nT().grecaptcha):new Promise(((n,r)=>{const i=nT().setTimeout((()=>{r(EE(e,"network-request-failed"))}),yT.get());nT()[vT]=()=>{nT().clearTimeout(i),delete nT()[vT];const s=nT().grecaptcha;if(!s||!WE(s))return void r(EE(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};DS("".concat(RS.recaptchaV2Script,"?").concat(rn({onload:vT,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(EE(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=nT().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bT{async load(e){return new mT(e)}clearedOneInstance(){}}const _T="recaptcha",ET={theme:"light",type:"image"};class ST{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},ET);this.parameters=n,this.type=_T,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=NS(e),this.isInvisible="invisible"===this.parameters.size,CE("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;CE(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bT:new wT,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(Rx){return Promise.reject(Rx)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){CE(!this.parameters.sitekey,this.auth,"argument-error"),CE(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),CE("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=nT()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){CE(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){CE(RE()&&!rT(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await jE(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);CE(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return CE(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class IT{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=XS._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function TT(e,t,n){var r;const i=await n.verify();try{let s;if(CE("string"===typeof i,e,"argument-error"),CE(n.type===_T,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){CE("enroll"===t.type,e,"internal-error");const n=await function(e,t){return jE(e,"POST","/v2/accounts/mfaEnrollment:start",UE(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{CE("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;CE(n,e,"missing-multi-factor-info");const o=await function(e,t){return jE(e,"POST","/v2/accounts/mfaSignIn:start",UE(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return jE(e,"POST","/v1/accounts:sendVerificationCode",UE(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class kT{constructor(e){this.providerId=kT.PROVIDER_ID,this.auth=NS(e)}verifyPhoneNumber(e,t){return TT(this.auth,e,un(t))}static credential(e,t){return XS._fromVerification(e,t)}static credentialFromResult(e){const t=e;return kT.credentialFromTaggedObject(t)}static credentialFromError(e){return kT.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?XS._fromTokenResponse(n,r):null}}function CT(e,t){return t?uS(t):(CE(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}kT.PROVIDER_ID="phone",kT.PHONE_SIGN_IN_METHOD="phone";class xT extends VS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return QS(e,this._buildIdpRequest())}_linkToIdToken(e,t){return QS(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return QS(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function NT(e){return wI(e.auth,new xT(e),e.bypassAuthState)}function AT(e){const{auth:t,user:n}=e;return CE(n,t,"internal-error"),yI(n,new xT(e),e.bypassAuthState)}async function RT(e){const{auth:t,user:n}=e;return CE(n,t,"internal-error"),gI(n,new xT(e),e.bypassAuthState)}class DT{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Rx){this.reject(Rx)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(Rx){this.reject(Rx)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NT;case"linkViaPopup":case"linkViaRedirect":return RT;case"reauthViaPopup":case"reauthViaRedirect":return AT;default:_E(this.auth,"internal-error")}}resolve(e){NE(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){NE(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const PT=new PE(2e3,1e4);class OT extends DT{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,OT.currentPopupAction&&OT.currentPopupAction.cancel(),OT.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return CE(e,this.auth,"internal-error"),e}async onExecution(){NE(1===this.filter.length,"Popup operations only handle one event");const e=eT();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(EE(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(EE(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,OT.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(EE(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,PT.get())};e()}}OT.currentPopupAction=null;const LT="pendingRedirect",MT=new Map;class FT extends DT{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=MT.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=BT(t),r=VT(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Rx){e=()=>Promise.reject(Rx)}MT.set(this.auth._key(),e)}return this.bypassAuthState||MT.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function UT(e,t){return VT(e)._set(BT(t),"true")}function jT(e,t){MT.set(e._key(),t)}function VT(e){return uS(e._redirectPersistence)}function BT(e){return fS(LT,e.config.apiKey,e.name)}function zT(e,t,n){return async function(e,t,n){if(er(e.app))return Promise.reject(IE(e));const r=NS(e);TE(e,t,eI),await r._initializationPromise;const i=CT(r,n);return await UT(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function qT(e,t,n){return async function(e,t,n){const r=un(e);if(TE(r.auth,t,eI),er(r.auth.app))return Promise.reject(IE(r.auth));await r.auth._initializationPromise;const i=CT(r.auth,n);await UT(i,r.auth);const s=await WT(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function GT(e,t,n){return async function(e,t,n){const r=un(e);TE(r.auth,t,eI),await r.auth._initializationPromise;const i=CT(r.auth,n);await vI(!1,r,t.providerId),await UT(i,r.auth);const s=await WT(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function HT(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(er(e.app))return Promise.reject(IE(e));const r=NS(e),i=CT(r,t),s=new FT(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function WT(e){const t=eT("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class KT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YT(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!YT(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(EE(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(QT(e))}saveEventToCache(e){this.cachedEventUids.add(QT(e)),this.lastProcessedEventTime=Date.now()}}function QT(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function YT(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function JT(e){return jE(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const XT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$T=/^https?/;function ZT(e){const t=AE(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!$T.test(n))return!1;if(XT.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ek=new PE(3e4,6e4);function tk(){const e=nT().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function nk(e){return new Promise(((t,n)=>{var r,i,s;function o(){tk(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{tk(),n(EE(e,"network-request-failed"))},timeout:ek.get()})}if(null===(i=null===(r=nT().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=nT().gapi)||void 0===s?void 0:s.load)){const t=PS("iframefcb");return nT()[t]=()=>{gapi.load?o():n(EE(e,"network-request-failed"))},DS("".concat(RS.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw rk=null,e}))}let rk=null;const ik=new PE(5e3,15e3),sk="__/auth/iframe",ok="emulator/auth/iframe",ak={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ck(e){const t=e.config;CE(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?OE(t,ok):"https://".concat(e.config.authDomain,"/").concat(sk),r={apiKey:t.apiKey,appName:e.name,v:sr},i=lk.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(rn(r).slice(1))}async function uk(e){const t=await function(e){return rk=rk||nk(e),rk}(e),n=nT().gapi;return CE(n,e,"internal-error"),t.open({where:document.body,url:ck(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ak,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=EE(e,"network-request-failed"),s=nT().setTimeout((()=>{r(i)}),ik.get());function o(){nT().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const hk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class dk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Rx){}}}function fk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},hk),{width:r.toString(),height:i.toString(),top:s,left:o}),c=qt().toLowerCase();n&&(a=yS(c)?"_blank":n),gS(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return SS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new dk(null);const h=window.open(t||"",a,u);CE(h,e,"popup-blocked");try{h.focus()}catch(Rx){}return new dk(h)}const pk="__/auth/handler",mk="emulator/auth/handler",gk=encodeURIComponent("fac");async function vk(e,t,n,r,i,s){CE(e.config.authDomain,e,"auth-domain-config-required"),CE(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:sr,eventId:i};if(t instanceof eI){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof tI){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(gk,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(pk);return OE(t,mk)}(e),"?").concat(rn(a).slice(1)).concat(c)}const yk="webStorageSupport";const wk=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$I,this._completeRedirectFn=HT,this._overrideRedirectResult=jT}async _openPopup(e,t,n,r){var i;NE(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return fk(e,await vk(e,t,n,AE(),r),eT())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){nT().location.href=e}(await vk(e,t,n,AE(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(NE(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await uk(e),n=new KT(e);return t.register("authEvent",(t=>{CE(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yk,{type:yk},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[yk];void 0!==i&&t(!!i),_E(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await JT(e);for(const r of t)try{if(ZT(r))return}catch(n){}_E(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return IS()||vS()||SS()}};class bk{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return xE("unexpected MultiFactorSessionType")}}}class _k extends bk{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new _k(e)}_finalizeEnroll(e,t,n){return function(e,t){return jE(e,"POST","/v2/accounts/mfaEnrollment:finalize",UE(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return jE(e,"POST","/v2/accounts/mfaSignIn:finalize",UE(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ek{constructor(){}static assertion(e){return _k._fromCredential(e)}}Ek.FACTOR_ID="phone";var Sk="@firebase/auth",Ik="1.7.1";class Tk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){CE(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=jt())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var kk;function Ck(){return window}!function(e){RS=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=EE("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),kk="Browser",Jn(new hn("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;CE(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:kk,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TS(kk)},c=new xS(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(uS);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Jn(new hn("auth-internal",(e=>(e=>new Tk(e))(NS(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),hr(Sk,Ik,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(kk)),hr(Sk,Ik,"esm2017");async function xk(e,t,n){var r;const{BuildInfo:i}=Ck();NE(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(NE(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return SS()?o.ibi=i.packageName:bS()?o.apn=i.packageName:_E(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,vk(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function Nk(e){const{cordova:t}=Ck();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Ak=20;class Rk extends KT{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Dk(e){const t=await Lk()._get(Mk(e));return t&&await Lk()._remove(Mk(e)),t}function Pk(e,t){var n,r;const i=function(e){const t=Fk(e),n=t.link?decodeURIComponent(t.link):void 0,r=Fk(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Fk(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Fk(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(Rx){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?EE(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Ok(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Ak;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Lk(){return uS(JI)}function Mk(e){return fS("authEvent",e.config.apiKey,e.name)}function Fk(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return sn(n.join("?"))}const Uk=class{constructor(){this._redirectPersistence=$I,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=HT,this._overrideRedirectResult=jT}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Rk(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){_E(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=Ck();CE("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),CE("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),CE("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),CE("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),CE("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),MT.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Ok(),postBody:null,tenantId:e.tenantId,error:EE(e,"no-auth-event")}}(e,n,r);await function(e,t){return Lk()._set(Mk(e),t)}(e,s);const o=await xk(e,s,t);return async function(e,t,n){const{cordova:r}=Ck();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(EE(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),bS()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Nk(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Ck(),n={};SS()?n.iosBundleId=t.packageName:bS()?n.androidPackageName=t.packageName:_E(e,"operation-not-supported-in-this-environment"),await JT(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Ck(),s=setTimeout((async()=>{await Dk(e),t.onEvent(jk())}),500),o=async n=>{clearTimeout(s);const r=await Dk(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Pk(r,n.url)),t.onEvent(i||jk())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");Ck().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(Rx){console.error(Rx)}}}};function jk(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:EE("no-auth-event")}}function Vk(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Bk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return!("file:"!==Vk()&&"ionic:"!==Vk()&&"capacitor:"!==Vk()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function zk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return Qt()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/Edge\/\d+/.test(e)}(e)}function qk(){try{const e=self.localStorage,t=eT();if(e)return e.setItem(t,"1"),e.removeItem(t),!zk()||Jt()}catch(Rx){return Gk()&&Jt()}return!1}function Gk(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Hk(){return("http:"===Vk()||"https:"===Vk()||Wt()||Bk())&&!(Kt()||Gt())&&qk()&&!Gk()}function Wk(){return Bk()&&"undefined"!==typeof document}const Kk={LOCAL:"local",NONE:"none",SESSION:"session"},Qk=CE,Yk="persistence";async function Jk(e){await e._initializationPromise;const t=Xk(),n=fS(Yk,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Xk(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(Rx){return null}}const $k=CE;class Zk{constructor(){this.browserResolver=uS(wk),this.cordovaResolver=uS(Uk),this.underlyingResolver=null,this._redirectPersistence=$I,this._completeRedirectFn=HT,this._overrideRedirectResult=jT}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Wk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $k(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Wk()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function eC(e){return e.unwrap()}function tC(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new sC(e,function(e,t){var n;const r=un(e),i=t;return CE(t.customData.operationType,r,"argument-error"),CE(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),GI._fromError(r,i)}(e,t))}else if(r){const e=nC(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function nC(e){const{_tokenResponse:t}=e instanceof Xt?e.customData:e;if(!t)return null;if(!(e instanceof Xt)&&"temporaryProof"in t&&"phoneNumber"in t)return kT.credentialFromResult(e);const n=t.providerId;if(!n||n===lE.PASSWORD)return null;let r;switch(n){case lE.GOOGLE:r=iI;break;case lE.FACEBOOK:r=rI;break;case lE.GITHUB:r=sI;break;case lE.TWITTER:r=lI;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?oI._create(n,o):YS._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new nI(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Xt?r.credentialFromError(e):r.credentialFromResult(e)}function rC(e,t){return t.catch((t=>{throw t instanceof Xt&&tC(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,nC(r)),additionalUserInfo:zI(e),user:oC.getOrCreate(n)};var r}))}async function iC(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>rC(e,n.confirm(t))}}class sC{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return rC(eC(this.auth),this.resolver.resolveSignIn(e))}}class oC{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=un(e);return WI.has(t)||WI.set(t,HI._fromUser(t)),WI.get(t)}(e)}static getOrCreate(e){return oC.USER_MAP.has(e)||oC.USER_MAP.set(e,new oC(e)),oC.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return rC(this.auth,_I(this._delegate,e))}async linkWithPhoneNumber(e,t){return iC(this.auth,async function(e,t,n){const r=un(e);await vI(!1,r,"phone");const i=await TT(r.auth,t,un(n));return new IT(i,(e=>_I(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return rC(this.auth,async function(e,t,n){const r=un(e);TE(r.auth,t,eI);const i=CT(r.auth,n);return new OT(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Zk))}async linkWithRedirect(e){return await Jk(NS(this.auth)),GT(this._delegate,e,Zk)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return rC(this.auth,EI(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return iC(this.auth,async function(e,t,n){const r=un(e);if(er(r.auth.app))return Promise.reject(IE(r.auth));const i=await TT(r.auth,t,un(n));return new IT(i,(e=>EI(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return rC(this.auth,async function(e,t,n){const r=un(e);if(er(r.auth.app))return Promise.reject(EE(r.auth,"operation-not-supported-in-this-environment"));TE(r.auth,t,eI);const i=CT(r.auth,n);return new OT(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Zk))}async reauthenticateWithRedirect(e){return await Jk(NS(this.auth)),qT(this._delegate,e,Zk)}sendEmailVerification(e){return DI(this._delegate,e)}async unlink(e){return await mI(this._delegate,e),this}updateEmail(e){return function(e,t){const n=un(e);return er(n.auth.app)?Promise.reject(IE(n.auth)):LI(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return LI(un(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=un(e);if(er(n.auth.app))return Promise.reject(IE(n.auth));await gI(n,t)}(this._delegate,e)}updateProfile(e){return OI(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return PI(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}oC.USER_MAP=new WeakMap;const aC=CE;class lC{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;aC(n,"invalid-api-key",{appName:e.name}),aC(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Zk:void 0;this._delegate=t.initialize({options:{persistence:uC(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(gE),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?oC.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){FS(this._delegate,e,t)}applyActionCode(e){return NI(this._delegate,e)}checkActionCode(e){return AI(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await BS(un(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xI(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return rC(this._delegate,async function(e,t,n){if(er(e.app))return Promise.reject(IE(e));const r=NS(e),i=MS(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cI),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xI(e),t})),o=await uI._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return RI(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=$S.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){aC(Hk(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await NS(e)._initializationPromise,HT(e,t,!1)}(this._delegate,Zk);return e?rC(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){NS(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=cC(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=cC(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=NS(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){CE(t.handleCodeInApp,r,"argument-error"),t&&CI(r,e,t)}(i,n),await MS(r,i,"getOobCode",WS)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=NS(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&CI(r,i,n),await MS(r,i,"getOobCode",HS)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){Qk(Object.values(Kk).includes(t),e,"invalid-persistence-type"),Kt()?Qk(t!==Kk.SESSION,e,"unsupported-persistence-type"):Gt()?Qk(t===Kk.NONE,e,"unsupported-persistence-type"):Gk()?Qk(t===Kk.NONE||t===Kk.LOCAL&&Jt(),e,"unsupported-persistence-type"):Qk(t===Kk.NONE||qk(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Kk.SESSION:t=$I;break;case Kk.LOCAL:t=await uS(fT)._isAvailable()?fT:JI;break;case Kk.NONE:t=dS;break;default:return _E("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return rC(this._delegate,async function(e){var t;if(er(e.app))return Promise.reject(IE(e));const n=NS(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new uI({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await cI(n,{returnSecureToken:!0}),i=await uI._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return rC(this._delegate,bI(this._delegate,e))}signInWithCustomToken(e){return rC(this._delegate,SI(this._delegate,e))}signInWithEmailAndPassword(e,t){return rC(this._delegate,function(e,t,n){return er(e.app)?Promise.reject(IE(e)):bI(un(e),ZS.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xI(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return rC(this._delegate,async function(e,t,n){if(er(e.app))return Promise.reject(IE(e));const r=un(e),i=ZS.credentialWithLink(t,n||AE());return CE(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),bI(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return iC(this._delegate,async function(e,t,n){if(er(e.app))return Promise.reject(IE(e));const r=NS(e),i=await TT(r,t,un(n));return new IT(i,(e=>bI(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return aC(Hk(),this._delegate,"operation-not-supported-in-this-environment"),rC(this._delegate,async function(e,t,n){if(er(e.app))return Promise.reject(EE(e,"operation-not-supported-in-this-environment"));const r=NS(e);TE(e,t,eI);const i=CT(r,n);return new OT(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Zk))}async signInWithRedirect(e){return aC(Hk(),this._delegate,"operation-not-supported-in-this-environment"),await Jk(this._delegate),zT(this._delegate,e,Zk)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await AI(un(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function cC(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&oC.getOrCreate(e)),error:t,complete:n}}function uC(e,t){const n=function(e,t){const n=Xk();if(!n)return[];const r=fS(Yk,e,t);switch(n.getItem(r)){case Kk.NONE:return[dS];case Kk.LOCAL:return[fT,$I];case Kk.SESSION:return[$I];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(fT)||n.push(fT),"undefined"!==typeof window)for(const r of[JI,$I])n.includes(r)||n.push(r);return n.includes(dS)||n.push(dS),n}lC.Persistence=Kk;class hC{constructor(){this.providerId="phone",this._delegate=new kT(eC(Ar.auth()))}static credential(e,t){return kT.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}hC.PHONE_SIGN_IN_METHOD=kT.PHONE_SIGN_IN_METHOD,hC.PROVIDER_ID=kT.PROVIDER_ID;const dC=CE;class fC{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ar.app();var r;dC(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new ST(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new hn("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new lC(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:cE,PASSWORD_RESET:uE,RECOVER_EMAIL:hE,REVERT_SECOND_FACTOR_ADDITION:dE,VERIFY_AND_CHANGE_EMAIL:fE,VERIFY_EMAIL:pE}},EmailAuthProvider:ZS,FacebookAuthProvider:rI,GithubAuthProvider:sI,GoogleAuthProvider:iI,OAuthProvider:nI,SAMLAuthProvider:aI,PhoneAuthProvider:hC,PhoneMultiFactorGenerator:Ek,RecaptchaVerifier:fC,TwitterAuthProvider:lI,Auth:lC,AuthCredential:VS,Error:Xt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.6")}(Ar);Ar.initializeApp({apiKey:"AIzaSyB7dfb58FxYX39USJ_zQwg-1E2mPqcZgQU",authDomain:"cedre-6fcd2.firebaseapp.com",projectId:"cedre-6fcd2",storageBucket:"cedre-6fcd2.appspot.com",messagingSenderId:"763822582875",appId:"1:763822582875:web:5531f57909889929dde37e"});const pC=Ar.firestore(),mC=Ar.storage();Ar.auth(),new Ar.auth.GoogleAuthProvider;var gC=n(579);const vC=(0,r.createContext)(),yC=e=>{let{children:t}=e;const[n,i]=(0,r.useState)({type:[],material:[],price:[]});return(0,gC.jsx)(vC.Provider,{value:{filters:n,setFilters:i},children:t})};function wC(){const{setFilters:e}=(0,r.useContext)(vC),[t,n]=(0,r.useState)("Sofa"),[i,s]=(0,r.useState)(""),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)([]),u=Ke();(0,r.useEffect)((()=>{h(t)}),[t]);const h=async e=>{try{if(e){const t=await pC.collection(e).get();let n=new Set;t.forEach((e=>{const t=e.data();t.material&&t.material.forEach((e=>{n.add(e)}))})),c(Array.from(n)),console.log("Materials for",e,":",Array.from(n))}}catch(t){console.error("Error fetching materials: ",t)}};return(0,r.useEffect)((()=>{l.length>0&&s(l[0])}),[l]),(0,gC.jsxs)("div",{className:"block1",children:[(0,gC.jsx)("h1",{children:"Your Ideas, Our Craft"}),(0,gC.jsxs)("div",{className:"form",children:[(0,gC.jsxs)("div",{className:"chapter",children:[(0,gC.jsx)("label",{className:"chapter_name",htmlFor:"type",children:"Select type"}),(0,gC.jsxs)("select",{className:"dropdown",id:"type",name:"type",onChange:e=>{const t=e.target.value;n(t),s("")},children:[(0,gC.jsx)("option",{disabled:!0,value:"",children:"Select type"}),Object.entries({Sofa:"Sofa",Armchair:"Armchair",Wardrobe:"Wardrobe",Bed:"Bed"}).map((e=>{let[t,n]=e;return(0,gC.jsx)("option",{className:"form_el",value:t,children:n},t)}))]})]}),(0,gC.jsxs)("div",{className:"chapter",children:[(0,gC.jsx)("label",{className:"chapter_name",htmlFor:"material",children:"Made of"}),(0,gC.jsxs)("select",{className:"dropdown",id:"material",name:"material",onChange:e=>{const t=e.target.value;s(t)},value:i,children:[(0,gC.jsx)("option",{disabled:!0,value:"",children:"Select material"}),l.map(((e,t)=>(0,gC.jsx)("option",{className:"form_el",value:e,children:e},t)))]})]}),(0,gC.jsxs)("div",{className:"chapter",children:[(0,gC.jsx)("label",{className:"chapter_name",htmlFor:"price",children:"Price"}),(0,gC.jsxs)("select",{className:"dropdown",id:"price",name:"price",onChange:e=>{const t=e.target.value;a(t)},value:o,children:[(0,gC.jsx)("option",{disabled:!0,value:"",children:"Select price"}),(0,gC.jsx)("option",{className:"form_el",value:"<$50",children:"Up to $50"}),(0,gC.jsx)("option",{className:"form_el",value:"50-100",children:"$50-$100"}),(0,gC.jsx)("option",{className:"form_el",value:"100-200",children:"$100-$200"}),(0,gC.jsx)("option",{className:"form_el",value:"200-300",children:"$200-$300"}),(0,gC.jsx)("option",{className:"form_el",value:">$300",children:"Over $300"})]})]}),(0,gC.jsx)("button",{className:"prod_search",onClick:()=>{e({type:t?[t]:[],material:i?[i]:[],price:o?[o]:[]}),u("/catalog")},children:"Search"})]})]})}const bC=n.p+"static/media/saa1.e0c9191798637563489a.png",_C=n.p+"static/media/saa2.e09d6a5e37db154dd9b1.png",EC=n.p+"static/media/saa3.fece0b094a583d3480fa.png";function SC(){const e=Ke(),{setFilters:t}=(0,r.useContext)(vC);return(0,gC.jsxs)("div",{className:"block2",children:[(0,gC.jsx)("h2",{children:"Sofas and Armchairs"}),(0,gC.jsxs)("div",{className:"box",children:[(0,gC.jsx)("img",{src:bC,alt:"Sofa",className:"big_img"}),(0,gC.jsxs)("div",{className:"box2",children:[(0,gC.jsx)("img",{src:_C,alt:"Sofa2",className:"lil_img"}),(0,gC.jsx)("p",{className:"block_text",children:"Our store offers a wide selection of armchairs and sofas known for their stylish design and high quality. Each piece is crafted using premium materials imported from Europe to ensure durability and comfort. You can choose from a variety of functional features that perfectly complement your interior."}),(0,gC.jsx)("button",{className:"see_more",onClick:()=>{t({type:["Sofa"]}),e("/catalog")},children:"See more"})]}),(0,gC.jsx)("img",{src:EC,alt:"Sofa3",className:"big_img"})]})]})}const IC=n.p+"static/media/ward1.93ff6bbfbcd030cfce93.png",TC=n.p+"static/media/ward2.ef24991297c5fca25ba2.png",kC=n.p+"static/media/ward3.687732821e3a4b683517.png";function CC(){const e=Ke(),{setFilters:t}=(0,r.useContext)(vC);return(0,gC.jsxs)("div",{className:"block3",children:[(0,gC.jsx)("h2",{children:"Wardrobes"}),(0,gC.jsxs)("div",{className:"box",children:[(0,gC.jsx)("img",{src:IC,alt:"Wardrobe",className:"big_img"}),(0,gC.jsx)("img",{src:TC,alt:"Wardrobe2",className:"big_img"}),(0,gC.jsxs)("div",{className:"box2",children:[(0,gC.jsx)("img",{src:kC,alt:"Wardrobe3",className:"lil_img"}),(0,gC.jsx)("p",{className:"block_text",children:"Range of our wardrobes impresses with its elegance and quality. Each wardrobe is crafted with attention to detail, using only the finest materials. We offer wardrobes in various configurations and styles to help you organize your space efficiently while adding charm and style to your interior."}),(0,gC.jsx)("button",{className:"see_more",onClick:()=>{t({type:["Wardrobe"]}),e("/catalog")},children:"Search"})]})]})]})}const xC=n.p+"static/media/bed1.fc16d8b7fd130e3a61d9.png",NC=n.p+"static/media/bed2.278f4da01f4711332878.png",AC=n.p+"static/media/bed3.af7b548cb5f9e2951815.png";function RC(){return(0,gC.jsxs)("div",{className:"block4",children:[(0,gC.jsx)("h2",{children:"Beds"}),(0,gC.jsxs)("div",{className:"box",children:[(0,gC.jsxs)("div",{className:"box2",children:[(0,gC.jsx)("img",{src:xC,alt:"Bed1",className:"lil_img"}),(0,gC.jsx)("p",{className:"block_text",children:"Our beds are designed to provide you with a comfortable and restful sleep. Each bed is crafted using the finest materials to ensure reliability and longevity. With a wide selection of models and designs, you can find the perfect bed to fit your bedroom and create an atmosphere of tranquility and comfort."}),(0,gC.jsx)("button",{className:"see_more",children:"Search"})]}),(0,gC.jsx)("img",{src:NC,alt:"Bed2",className:"big_img"}),(0,gC.jsx)("img",{src:AC,alt:"Bed3",className:"big_img"})]})]})}const DC=n.p+"static/media/kit1.9b9447302805830923f4.png",PC=n.p+"static/media/kit2.fe7c6e6b0fe8e60f74ea.png",OC=n.p+"static/media/kit3.fb0235a2ad6d2e28e4f8.png";function LC(){return(0,gC.jsxs)("div",{className:"block5",children:[(0,gC.jsx)("h2",{children:"Kitchens"}),(0,gC.jsxs)("div",{className:"box",children:[(0,gC.jsx)("img",{src:DC,alt:"Kitchen",className:"big_img"}),(0,gC.jsxs)("div",{className:"box2",children:[(0,gC.jsx)("img",{src:PC,alt:"Kitchen2",className:"lil_img"}),(0,gC.jsx)("p",{className:"block_text",children:"Step into a world of culinary elegance with our meticulously crafted kitchens. We offer a range of designs tailored to meet your needs, all constructed from premium materials sourced for their durability and aesthetic appeal. Explore our collection and find the perfect kitchen to transform your home."}),(0,gC.jsx)("button",{className:"see_more",children:"Search"})]}),(0,gC.jsx)("img",{src:OC,alt:"Kitchen3",className:"big_img"})]})]})}const MC=n.p+"static/media/dec1.25e29be6eaa98df1721e.png",FC=n.p+"static/media/dec2.97e46fbef189c7d9da1a.png",UC=n.p+"static/media/dec3.0795a273917265f44cff.png";function jC(){return(0,gC.jsxs)("div",{className:"block6",children:[(0,gC.jsx)("h2",{children:"Decor and accessories"}),(0,gC.jsxs)("div",{className:"box",children:[(0,gC.jsx)("img",{src:MC,alt:"Decor",className:"big_img"}),(0,gC.jsx)("img",{src:FC,alt:"Decor2",className:"big_img"}),(0,gC.jsxs)("div",{className:"box2",children:[(0,gC.jsx)("img",{src:UC,alt:"Decor3",className:"lil_img"}),(0,gC.jsxs)("p",{className:"block_text",children:["Add the finishing touch to your interior with our decorative elements and accessories. Choose from our diverse range of decor items that match your style and add a touch of luxury ",(0,gC.jsx)("br",{}),"to your home. All our decorative elements are made from high-quality materials to ensure the durability of your interior."]}),(0,gC.jsx)("button",{className:"see_more",children:"Search"})]})]})]})}const VC=n.p+"static/media/aboutus.9af0aa32e78ea2a2149d.png";function BC(){return(0,gC.jsxs)("div",{className:"block7",children:[(0,gC.jsxs)("div",{className:"au_block",children:[(0,gC.jsx)("h2",{children:"About Us"}),(0,gC.jsxs)("div",{className:"au_block2",children:[(0,gC.jsx)("p",{className:"block_text",style:{width:"35.32vw"},children:"Welcome to C\xe8dre, your ultimate destination for premium furniture online. At C\xe8dre, we believe that furniture should not only be functional but also a reflection of your style and personality. With years of experience in the industry, we curate a carefully selected collection of high-quality furniture pieces that are designed to enhance your living space. From luxurious sofas to elegant dining sets, each item in our collection is crafted with precision and attention to detail."}),(0,gC.jsx)("p",{className:"block_text",style:{width:"35.32vw"},children:"Our commitment to excellence extends beyond our products. We pride ourselves on providing exceptional customer service and a seamless shopping experience. Whether you're furnishing your home or office, our knowledgeable team is here to assist you every step of the way."}),(0,gC.jsx)("p",{className:"block_text",style:{width:"35.32vw"},children:"Thank you for choosing C\xe8dre. We look forward to helping you create the perfect ambiance in your space."}),(0,gC.jsxs)("div",{className:"au_box",children:[(0,gC.jsxs)("div",{children:[(0,gC.jsx)("p",{className:"au_fact",children:"14 years"}),(0,gC.jsx)("p",{className:"block_text",style:{width:"11.67vw"},children:"Innovative experience in the furniture industry"})]}),(0,gC.jsxs)("div",{children:[(0,gC.jsx)("p",{className:"au_fact",children:"36 000+"}),(0,gC.jsx)("p",{className:"block_text",style:{width:"11.67vw"},children:"Satisfied customers who chose us for their interior"})]}),(0,gC.jsxs)("div",{children:[(0,gC.jsx)("p",{className:"au_fact",children:"12"}),(0,gC.jsx)("p",{className:"block_text",style:{width:"11.67vw"},children:"\u0421ountries from Europe cooperate with us"})]})]})]})]}),(0,gC.jsx)("img",{src:VC,alt:"Team",className:"big_img_au"})]})}function zC(){return window.scrollTo(0,0),(0,gC.jsxs)(gC.Fragment,{children:[(0,gC.jsx)(wC,{}),(0,gC.jsx)(SC,{}),(0,gC.jsx)(CC,{}),(0,gC.jsx)(RC,{}),(0,gC.jsx)(LC,{}),(0,gC.jsx)(jC,{}),(0,gC.jsx)(BC,{})]})}var qC=function(e,t){if("string"!==typeof e)throw new TypeError("argument str must be a string");var n={},r=(t||{}).decode||KC,i=0;for(;i<e.length;){var s=e.indexOf("=",i);if(-1===s)break;var o=e.indexOf(";",i);if(-1===o)o=e.length;else if(o<s){i=e.lastIndexOf(";",s-1)+1;continue}var a=e.slice(i,s).trim();if(void 0===n[a]){var l=e.slice(s+1,o).trim();34===l.charCodeAt(0)&&(l=l.slice(1,-1)),n[a]=YC(l,r)}i=o+1}return n},GC=function(e,t,n){var r=n||{},i=r.encode||QC;if("function"!==typeof i)throw new TypeError("option encode is invalid");if(!WC.test(e))throw new TypeError("argument name is invalid");var s=i(t);if(s&&!WC.test(s))throw new TypeError("argument val is invalid");var o=e+"="+s;if(null!=r.maxAge){var a=r.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(r.domain){if(!WC.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!WC.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){var l=r.expires;if(!function(e){return"[object Date]"===HC.call(e)||e instanceof Date}(l)||isNaN(l.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+l.toUTCString()}r.httpOnly&&(o+="; HttpOnly");r.secure&&(o+="; Secure");r.partitioned&&(o+="; Partitioned");if(r.priority){switch("string"===typeof r.priority?r.priority.toLowerCase():r.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(r.sameSite){switch("string"===typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},HC=Object.prototype.toString,WC=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function KC(e){return-1!==e.indexOf("%")?decodeURIComponent(e):e}function QC(e){return encodeURIComponent(e)}function YC(e,t){try{return t(e)}catch(Rx){return e}}function JC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e){if(e&&"j"===e[0]&&":"===e[1])return e.substr(2);return e}(e);if(!t.doNotParse)try{return JSON.parse(n)}catch(Rx){}return e}class XC{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.update=()=>{if(!this.HAS_DOCUMENT_COOKIE)return;const e=this.cookies;this.cookies=qC(document.cookie),this._checkChanges(e)};const n="undefined"===typeof document?"":document.cookie;this.cookies=function(e){return"string"===typeof e?qC(e):"object"===typeof e&&null!==e?e:{}}(e||n),this.defaultSetOptions=t,this.HAS_DOCUMENT_COOKIE=function(){const e="undefined"===typeof global?void 0:global.TEST_HAS_DOCUMENT_COOKIE;return"boolean"===typeof e?e:"object"===typeof document&&"string"===typeof document.cookie}()}_emitChange(e){for(let t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)}_checkChanges(e){new Set(Object.keys(e).concat(Object.keys(this.cookies))).forEach((t=>{e[t]!==this.cookies[t]&&this._emitChange({name:t,value:JC(this.cookies[t])})}))}_startPolling(){this.pollingInterval=setInterval(this.update,300)}_stopPolling(){this.pollingInterval&&clearInterval(this.pollingInterval)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.doNotUpdate||this.update(),JC(this.cookies[e],t)}getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.doNotUpdate||this.update();const t={};for(let n in this.cookies)t[n]=JC(this.cookies[n],e);return t}set(e,t,n){n=n?Object.assign(Object.assign({},this.defaultSetOptions),n):this.defaultSetOptions;const r="string"===typeof t?t:JSON.stringify(t);this.cookies=Object.assign(Object.assign({},this.cookies),{[e]:r}),this.HAS_DOCUMENT_COOKIE&&(document.cookie=GC(e,r,n)),this._emitChange({name:e,value:t,options:n})}remove(e,t){const n=t=Object.assign(Object.assign(Object.assign({},this.defaultSetOptions),t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=Object.assign({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=GC(e,"",n)),this._emitChange({name:e,value:void 0,options:t})}addChangeListener(e){this.changeListeners.push(e),this.HAS_DOCUMENT_COOKIE&&1===this.changeListeners.length&&("object"===typeof window&&"cookieStore"in window?window.cookieStore.addEventListener("change",this.update):this._startPolling())}removeChangeListener(e){const t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1),this.HAS_DOCUMENT_COOKIE&&0===this.changeListeners.length&&("object"===typeof window&&"cookieStore"in window?window.cookieStore.removeEventListener("change",this.update):this._stopPolling())}}const $C=r.createContext(new XC),{Provider:ZC,Consumer:ex}=$C;r.Component;"function"===typeof SuppressedError&&SuppressedError;var tx,nx={exports:{}},rx={};nx.exports=function(){if(tx)return rx;tx=1;var e="function"===typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,d=e?Symbol.for("react.suspense_list"):60120,f=e?Symbol.for("react.memo"):60115,p=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,g=e?Symbol.for("react.fundamental"):60117,v=e?Symbol.for("react.responder"):60118,y=e?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var d=e.$$typeof;switch(d){case t:switch(e=e.type){case l:case c:case r:case s:case i:case h:return e;default:switch(e=e&&e.$$typeof){case a:case u:case p:case f:case o:return e;default:return d}}case n:return d}}}function b(e){return w(e)===c}return rx.AsyncMode=l,rx.ConcurrentMode=c,rx.ContextConsumer=a,rx.ContextProvider=o,rx.Element=t,rx.ForwardRef=u,rx.Fragment=r,rx.Lazy=p,rx.Memo=f,rx.Portal=n,rx.Profiler=s,rx.StrictMode=i,rx.Suspense=h,rx.isAsyncMode=function(e){return b(e)||w(e)===l},rx.isConcurrentMode=b,rx.isContextConsumer=function(e){return w(e)===a},rx.isContextProvider=function(e){return w(e)===o},rx.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===t},rx.isForwardRef=function(e){return w(e)===u},rx.isFragment=function(e){return w(e)===r},rx.isLazy=function(e){return w(e)===p},rx.isMemo=function(e){return w(e)===f},rx.isPortal=function(e){return w(e)===n},rx.isProfiler=function(e){return w(e)===s},rx.isStrictMode=function(e){return w(e)===i},rx.isSuspense=function(e){return w(e)===h},rx.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===r||e===c||e===s||e===i||e===h||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===f||e.$$typeof===o||e.$$typeof===a||e.$$typeof===u||e.$$typeof===g||e.$$typeof===v||e.$$typeof===y||e.$$typeof===m)},rx.typeOf=w,rx}();var ix=nx.exports,sx={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ox={};ox[ix.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ox[ix.Memo]=sx;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;function ax(e){const t=(0,r.useContext)($C);if(!t)throw new Error("Missing <CookiesProvider>");const[n,i]=(0,r.useState)((()=>t.getAll({doNotUpdate:!0})));"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement&&(0,r.useLayoutEffect)((()=>{function r(){const r=t.getAll({doNotUpdate:!0});(function(e,t,n){if(!e)return!0;for(let r of e)if(t[r]!==n[r])return!0;return!1})(e||null,r,n)&&i(r)}return t.addChangeListener(r),()=>{t.removeChangeListener(r)}}),[t,n]);const s=(0,r.useMemo)((()=>t.set.bind(t)),[t]),o=(0,r.useMemo)((()=>t.remove.bind(t)),[t]),a=(0,r.useMemo)((()=>t.update.bind(t)),[t]);return[n,s,o,a]}function lx(e){let{onClose:t}=e;const[n,i]=ax(["sessionID"]),s=n.sessionID,[o,a]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0);(0,r.useEffect)((()=>{s&&pC.collection("ShoppingBag").doc(s).get().then((e=>{if(e.exists){const t=e.data();a(t.items||[])}else c(!1)})).catch((e=>{console.error("Error fetching document:",e)}))}),[s]);function u(e){const t=parseFloat(e);if(isNaN(t))return e;{const e=t.toLocaleString("en-US",{minimumFractionDigits:2});return"$".concat(e)}}return(0,gC.jsx)("div",{className:"overlay",onClick:t,children:(0,gC.jsxs)("div",{className:"shop_bag",onClick:e=>e.stopPropagation(),children:[(0,gC.jsxs)("p",{className:"bag_title",children:["Shopping bag (",o.length,")"]}),l&&o.length>0?(0,gC.jsxs)("div",{children:[o.map(((e,t)=>(0,gC.jsxs)("div",{className:"bag_item",children:[(0,gC.jsx)("img",{alt:e.name,src:e.img,className:"bag_item_img"}),(0,gC.jsxs)("div",{className:"bag_item_info",children:[(0,gC.jsxs)("p",{className:"bag_item_title",children:[e.collection_name,(0,gC.jsxs)("span",{style:{fontWeight:"700"},children:[" ",e.product_name]})]}),(0,gC.jsxs)("p",{className:"bag_item_text",children:["Material: ",e.material.join(", ")]}),(0,gC.jsxs)("p",{className:"bag_item_text",children:["Color: ",e.color]}),(0,gC.jsxs)("p",{className:"bag_item_text",children:["Quantity: ",e.quantity]}),(0,gC.jsx)("p",{className:"bag_item_price",children:u(e.price)}),(0,gC.jsx)("button",{className:"remove_item_button",onClick:()=>(e=>{const t=o.filter(((t,n)=>n!==e));a(t),pC.collection("ShoppingBag").doc(s).set({items:t}).then((()=>{console.log("Item removed from shopping bag in Firestore")})).catch((e=>{console.error("Error updating shopping bag:",e)}))})(t),children:"Remove"})]})]},t))),(0,gC.jsxs)("div",{className:"subt_box",children:[(0,gC.jsx)("p",{className:"subt",children:"Subtotal:"}),(0,gC.jsx)("p",{className:"bag_item_price",children:u(o.reduce(((e,t)=>{const n=parseFloat(t.price.replace("$",""));return isNaN(n)?e:e+n*t.quantity}),0))})]}),(0,gC.jsx)("button",{className:"checkout",children:"Checkout"}),(0,gC.jsx)("button",{className:"empty_bag_button",onClick:()=>{i("sessionID","",{path:"/"}),a([]),alert("Your shopping bag has been emptied.")},children:"Empty the bag"})]}):(0,gC.jsx)("div",{className:"bag_title",children:"Your shopping bag is empty."})]})})}function cx(){const[e,t]=(0,r.useState)(!1);return(0,gC.jsxs)(gC.Fragment,{children:[(0,gC.jsx)("header",{children:(0,gC.jsxs)("div",{className:"header",children:[(0,gC.jsx)("span",{className:"logo",children:"C\xe8dre"}),(0,gC.jsxs)("ul",{className:"navigation",children:[(0,gC.jsx)("li",{children:(0,gC.jsx)(xt,{exact:!0,to:"/Cedre",className:"link",activeClassName:"active",children:"Home"})}),(0,gC.jsx)("li",{children:(0,gC.jsx)(xt,{to:"/catalog",className:"link",activeClassName:"active",children:"Catalog"})}),(0,gC.jsx)("li",{children:(0,gC.jsx)(xt,{to:"/delivery",className:"link",activeClassName:"active",children:"Delivery"})}),(0,gC.jsx)("li",{children:(0,gC.jsx)(xt,{to:"/contacts",className:"link",activeClassName:"active",children:"Contacts"})})]}),(0,gC.jsxs)("ul",{className:"menu",children:[(0,gC.jsx)(xt,{to:"/Cedre",children:(0,gC.jsx)("button",{className:"search"})}),(0,gC.jsx)("button",{className:"account"}),(0,gC.jsx)("button",{onClick:()=>{t(!0)},className:"basket"})]})]})}),e&&(0,gC.jsx)(lx,{onClose:()=>{t(!1)}})]})}const ux=n.p+"static/media/inst.16e6222f64a3d153bc524544ac631cd2.svg";const hx=n.p+"static/media/tg.ff4bce1a3bd5b9fe7b922b69a0576fb7.svg";const dx=n.p+"static/media/behance.ad615140e313b469db362e5895e60d4e.svg";function fx(){const e=Ke(),{setFilters:t}=(0,r.useContext)(vC);return(0,gC.jsxs)("footer",{children:[(0,gC.jsx)("p",{className:"footer_text",children:"We will create the home of your dreams"}),(0,gC.jsxs)("div",{className:"foot_box",children:[(0,gC.jsx)("span",{className:"foot_logo",children:"C\xe8dre"}),(0,gC.jsxs)("div",{className:"nav_box",children:[(0,gC.jsxs)("div",{className:"nav_box3",children:[(0,gC.jsx)("a",{href:"mailto:ultradesign@gmail.com",className:"footer_link",children:"ultradesign@gmail.com"}),(0,gC.jsx)("a",{href:"tel:+38 (096) 875 49 57",className:"tel",children:"+38 (096) 875 49 57"}),(0,gC.jsx)("a",{href:"https://maps.app.goo.gl/7UNNHzttEpRxTgGJ8",className:"footer_link",children:"Address: 37, Beresteyskyi Prospect, Kyiv"}),(0,gC.jsxs)("div",{className:"sites",children:[(0,gC.jsx)("a",{href:"https://www.instagram.com/alyona_shunevych/",children:(0,gC.jsx)("img",{src:ux,style:{height:"1.5vw"},alt:"inst"})}),(0,gC.jsx)("a",{href:"https://t.me/alona_shunevych",children:(0,gC.jsx)("img",{src:hx,style:{height:"1.5vw"},alt:"tg"})}),(0,gC.jsx)("a",{href:"https://www.behance.net/alyona_shunevych",children:(0,gC.jsx)("img",{src:dx,style:{height:"1.5vw"},alt:"behance"})})]})]}),(0,gC.jsxs)("div",{className:"nav_box2",children:[(0,gC.jsx)(xt,{to:"/catalog",className:"footer_link",children:"Catalog"}),(0,gC.jsx)(xt,{to:"/delivery",className:"footer_link",children:"Delivery"}),(0,gC.jsx)(xt,{to:"/news",className:"footer_link",children:"News"}),(0,gC.jsx)(xt,{to:"/reviews",className:"footer_link",children:"Reviews"}),(0,gC.jsx)(xt,{to:"/about us",className:"footer_link",children:"About us"})]}),(0,gC.jsxs)("div",{className:"nav_box2",children:[(0,gC.jsx)("div",{onClick:()=>{t({type:["Sofa"]}),e("/catalog"),window.scrollTo(0,0)},className:"footer_link",children:"Sofas"}),(0,gC.jsx)("div",{onClick:()=>{t({type:["Armchair"]}),e("/catalog"),window.scrollTo(0,0)},className:"footer_link",children:"Armchairs"}),(0,gC.jsx)("div",{onClick:()=>{t({type:["Wardrobe"]}),e("/catalog"),window.scrollTo(0,0)},className:"footer_link",children:"Wardrobes"}),(0,gC.jsx)("div",{onClick:()=>{t({type:["Bed"]}),e("/catalog"),window.scrollTo(0,0)},className:"footer_link",children:"Beds"}),(0,gC.jsx)(xt,{to:"/kitchens",className:"footer_link",children:"Kitchens"}),(0,gC.jsx)(xt,{to:"/decor and accessories",className:"footer_link",children:"Decor and accessories"})]})]}),(0,gC.jsxs)("div",{className:"small_text_box",children:[(0,gC.jsx)("p",{className:"foot_small_text",children:"\xa9 2010-2024 \xabC\xe8dre\xbb"}),(0,gC.jsx)("p",{className:"foot_small_text",children:"Privacy policy"})]})]})]})}function px(){return(0,gC.jsxs)(gC.Fragment,{children:[(0,gC.jsx)(cx,{}),(0,gC.jsx)("main",{children:(0,gC.jsx)(lt,{})}),(0,gC.jsx)(fx,{})]})}function mx(e){let{priceRanges:t}=e;const{filters:n,setFilters:i}=(0,r.useContext)(vC),[s,o]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),h={Sofa:"Sofa",Armchair:"Armchair",Wardrobe:"Wardrobe",Bed:"Bed"};(0,r.useEffect)((()=>{u(Object.keys(h))}),[]),(0,r.useEffect)((()=>{(async()=>{if(n.type&&n.type.length>0){const t=n.type[0];try{let e=new Set,n=[];(await pC.collection(h[t]).get()).forEach((t=>{const r=t.data();r.material.forEach((t=>{e.add(t)})),n.push(r.color)})),o(Array.from(e)),l(Array.from(new Set(n)))}catch(e){console.error("Error fetching data: ",e)}}})()}),[n.type]);const d=(e,t)=>{i("type"===e?n=>({...n,[e]:[t]}):"price"===e?n=>n.price&&n.price.includes(t)?{...n,[e]:[]}:{...n,[e]:[t]}:n=>{var r;return{...n,[e]:null!==(r=n[e])&&void 0!==r&&r.includes(t)?n[e].filter((e=>e!==t)):[...n[e]||[],t]}})};return(0,r.useEffect)((()=>{console.log("Current Filters:",n)}),[n]),(0,gC.jsxs)("div",{className:"filter",children:[(0,gC.jsx)("h1",{className:"cat_h1",children:"Catalog"}),(0,gC.jsxs)("div",{className:"filter-category",children:[(0,gC.jsx)("h2",{className:"cat_h2",children:"Type"}),(0,gC.jsx)("ul",{className:"param_box",children:c.map((e=>{var t;return(0,gC.jsx)("li",{onClick:()=>d("type",e),children:(0,gC.jsx)("span",{className:"param",style:{fontWeight:null!==n&&void 0!==n&&null!==(t=n.type)&&void 0!==t&&t.includes(e)?"700":"500"},children:e})},e)}))})]}),(0,gC.jsxs)("div",{className:"filter-category",children:[(0,gC.jsx)("h2",{className:"cat_h2",children:"Material"}),(0,gC.jsx)("ul",{className:"param_box",children:s.map((e=>{var t;return(0,gC.jsx)("li",{onClick:()=>d("material",e),children:(0,gC.jsx)("span",{className:"param",style:{fontWeight:null!==n&&void 0!==n&&null!==(t=n.material)&&void 0!==t&&t.includes(e)?"700":"500"},children:e})},e)}))})]}),(0,gC.jsxs)("div",{className:"filter-category",children:[(0,gC.jsx)("h2",{className:"cat_h2",children:"Color"}),(0,gC.jsx)("ul",{className:"param_box",children:a.map((e=>{var t;return(0,gC.jsx)("li",{onClick:()=>d("color",e),children:(0,gC.jsx)("span",{className:"param",style:{fontWeight:null!==n&&void 0!==n&&null!==(t=n.color)&&void 0!==t&&t.includes(e)?"700":"500"},children:e})},e)}))})]}),(0,gC.jsxs)("div",{className:"filter-category",children:[(0,gC.jsx)("h2",{className:"cat_h2",children:"Price"}),(0,gC.jsx)("ul",{className:"param_box",children:t.map((e=>{var t;return(0,gC.jsx)("li",{onClick:()=>d("price",e),children:(0,gC.jsx)("span",{className:"param",style:{fontWeight:null!==n&&void 0!==n&&null!==(t=n.price)&&void 0!==t&&t.includes(e)?"700":"500"},children:e})},e)}))})]})]})}var gx,vx=new Uint8Array(16);function yx(){if(!gx&&!(gx="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gx(vx)}const wx=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const bx=function(e){return"string"===typeof e&&wx.test(e)};for(var _x=[],Ex=0;Ex<256;++Ex)_x.push((Ex+256).toString(16).substr(1));const Sx=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(_x[e[t+0]]+_x[e[t+1]]+_x[e[t+2]]+_x[e[t+3]]+"-"+_x[e[t+4]]+_x[e[t+5]]+"-"+_x[e[t+6]]+_x[e[t+7]]+"-"+_x[e[t+8]]+_x[e[t+9]]+"-"+_x[e[t+10]]+_x[e[t+11]]+_x[e[t+12]]+_x[e[t+13]]+_x[e[t+14]]+_x[e[t+15]]).toLowerCase();if(!bx(n))throw TypeError("Stringified UUID is invalid");return n};const Ix=function(e,t,n){var r=(e=e||{}).random||(e.rng||yx)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Sx(r)},Tx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAhAAAABcCAYAAAA/BYy3AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABX3SURBVHgB7Z1fjBTHncerm2V2Nw+wfonu4WDXD8mdZDBYkXWSyS1LzokOIuMlEme/2EuUAHk4DMiwTxAcAy9hUSD4JdhSFnwPYFtmsSVj2Q4sRHDSnZMsBKSLncgD5OFkRWIWKdndGXY6/e2lZmtq++9Mz/RM9/cj9c6/2uqu6vrz7V/9qsoQCWJZVs/sbHGgXLZ6hTBW29/0WZbow2+GMfdKCCGEZJyC3Svm7T7SebWs8m3TFOMdHV0ThmEUREIYookogmHAFgrPUiQQQgghdZG3u/JxW1CcX7QoN95MQdEUAVEqTdmiwdhpC4YB+2OPIIQQQkgDMEYhJjo6OsdEg2mYgIC14cGD4k77dZegaCCEEEKaSd40zVdKpdnL3d3dedEAYhcQFA6EEEJIy5C3hzVGFy/u/ImImVgFxNTU1BbTNA7Qt4EQQghpKRyLREdH7pSIiVgEhC0c+hYtMn5pvx0QhBBCCGlJLMsYK5fLu+MY1jBFnRSL0ztt8fA7QfFACCGEtDSGYQ2iz37woDgk6qRmC8Scr8PMAcsSuwQhhBBC2o1juVzXblEjNQmIuSEL85wtI1YLQgghhLQpxsTsbHlTLUMakQUExINpGpfoKEkIIYSkgvzsrLUuqoiIJCAoHgghhJBUEllEhBYQFA+EEEJIqokkIkIJCIoHQgghJBOEFhGhpnHCYZLigRBCCEk9ziQJzLQMChgoIEql6Z9xtgUhhBCSFazVpdLMgaBQvkMYWJr64QqThBBCCMkQ5bLY3dXVdczrd08B8XB5aqwwyQ2xCCGEkOxRmJ21nvDyh/AcwjBNwx66oHgghBBCMkqP3yiEq4DA0IVhiEFBCCGEkCwz4LVvhusQxszM9BecdUEIIYQQm/zixZ1PGIZRUL9cYIGA5yXFAyGEEEIe0lcsTi/YOLPKAsEFowghhBDiQsG2QjyqWiF0C8QAxQMhhBCSLNevXxcnTrwmfvCDreKrX/0H8bWv/ZNImB7dClFlgaDvAyGEENJ8IBiuXPm1uHz5svNaKBQWhPnssz+Ivr5ekSCFXK7rEfmhYoGYmfnrIMUDIYQQ0jwOHjzkWBiefPJfxMsv7xHvvfe+Ix4gFPr7+6vCvv/+eyJheqampgbkh475701O2ySEEEKaCCwPqmCQBz7LYYuenh4nzMTEDZE0pmnutF/G8d4ZwrCsez2lUvc9QQghhJCmAnEAkaACywSO3t5eMTIyIjZv3uy8//zzP4iEqThTOgJibvhi0TlBCCGEkES5fft2xfrw9ttviWef3egMc0BotIAfBFaqHuzo6Dz/0AeCwxeEEEJI0kAkPP30d5z3O3b8pyMeQH//vzqvV65cEUlTLlvr8PpQQBhrBSGEEEISZc+evY4FAsMVR4+OVL5fu3aum758OXkBYfMs/pjwf+DsC0IIISRZ4PNw+vSbjj/Exx9/VPVbK1kgbPosy+oxSqWpAcsyLglCCCGEJML58++JzZv/w3kv/R50pB/El1/+/wKny2bj+EGUy87qk4QQQghJAAxZbN26zXm/f/8+V/EA4BNx48aNxMUDePDAetSYmZkaNQxjSLQgV69eq7xfvnyZWLZsmSDtyeTkfXHz5s3K5zVrnhL1ose5cuUKsWTJEtFqsBxHA/cU9xa0e35l+d7fvXtX3Llzt/I5jjqfRiAe4DSJVwgE1e+htTFGjWJxGsMXA6IFgblGsnfvHucg7cmZM2fFSy/trHyGCa5e0Dhv2vS9yuff/OZ/W7KBZjmOBu6p7HjbPb/Ue//znx8Xzz//nMgKqO+o9wD1EvWTVKOKh40bN4p33nlLtBHjWIkyeVtInUDlXrs2r/SzVElJtpicnBQXLnxY+bxhw/qWtLpI2u16CWkWqnh4/PHHxRtvnBRtRh8ERJ9oc2AqU59uKSBIWrl//35VWceTXSubhtvteglpBrp4+OSTj1rCryEqWAei7S0QhBBCSDuAdRywcVa7iwebPlMQQgghpOGcOPGa+Pa3v+NMxXzxxRfEp5/+T7uKBwcKCEIIIaSBQDC8/PJeZ7tugKmab7zxumh3OgRx0KccSVasWCGWLq3N6QtT0e7evVOZkga8xn/dzt/IseK406tPqQSIB/HVilv+NSLOeuL1iq+ectNovO59vXnbDNQpniDu+9asPIizvjQiLW5lpJXLdCuDIYsf/nCrM2QBa8PIyBHH+pAG2lZAHDky4hxuqFOnwFNPPSXGxt5dEA4V5OTJ18WZM2ccZy8v8P9wzPRyzlSnKMrpSr/4xUnn+vR48TvikVPT0Ijs2/fjqlkkEnirb9++LbZpbHGlVwUe9kir2/UDpDfq9WMKH/IuKM4oUzaD4pQ899xzYng4OO4weYm4Dh8+KOpFn66qon/vNV0OncvJkyede+V37/H/69f/u1Puap0SG8f16njVJxmHWqeCri3OchAVlBu0FX5lO860oA1Zv359qLSEKSMyX3BeOUUT14spqqQaWB0OHjxsD1uccD7D3+Gdd95OfCfNOMmsBQId9+Dg93wbUwkqKA6o8jAV20/cIA78BiWPjtrvGvA9wqLROXGivgqKONB44/xBhE2vXzolcoZM2CehKHGio4srTsnZs2fFhx9eEOfOvet5zWHLDuIK6qiaQZR7jzAQRhCGEN2tsK4G8tovH2WdQofq9qAgibscRAV5um/fft9yI9Mi899rymvYtOBcshz63c+wZUTGxcXQ/FGtDgALRGHYop39HdzIpIBAZRka+n5VRX7ssceclQxVUJnUleRkx79t2zbPuO/fn6xUbFR+NU6cV1ZQhFmyZGnlGlAhsVKdW1hUWgxn1DM9VW8c3NKrz9nHNULkuA2luDVgiLOnZ2nVdzL/dHOtG3iiiRKneq1R4kSa1LwG6r3Gkxjy6+LFXy1oKN3Kjn6fZTjEGabTbjT6vXe7XqCWObyi47506VeJrtugPg375TNAx4Z77SZ64y4HtXDhwoXKe72+A7WtQX158cUtroJITwvyBSLHLT79fnpZp8KUEbVMt0K5bkUgHLAhltzwClYHrCy5dm2/SCXF4rTVqoet1irH4cOHPMNdunSxKmxQvNu3bw8d95/+9Lm1cuXKStje3uXWX/7yZVWY06dPVcWHA+fQwyGu5cuXLwjrdn79vBs2bKg5H8fGztWcXrfz/vGPn1fFh/C4B2Hi87tHajjkk1+ca9asWRAnvveLE+9/+9tPPdP+2msnquIbHh6uq+zgtzD3OsqBNKrxeeWRV9lEmvRy6XfNzb5eHN/97oYF+eZ13XpZQP0MKlt+5dWtHOCe15p+PR0o1+fPj4Uu127XqeYP0uJW7r3uJ9qCMOXeq4wgrN6G/ehH7vmD79XrrDUP2+H4+OOPrP7+fsvuUp0DaT569EhbpaGWI5OzMNQngaDxRjwpqON7UOu//73/0zT+B0MO+pMbvsfYsorX+RF227atlc/1mMJv3bpVeY8n+qD0Bp1X/w5PSV4On4jPzxQr+eCDC1VPNYcOHfSN8/Tp0cA41ScwgHT7maORbjVvzp49syAMrEGSoLKD35JeNEm9XuTboUOv+uabfs1ynDtJYPHzuu65NM37mbg5J7qVA7/7opcDDGXEBa7Va+jNrVy7WdlU58bt27f6WkeQDtR5ybVr/70gDKw8EtQPvzKCvBke3ivInI8DpmViQShMzYTVAUMUGKr47LP/s4ctdoi0kzkBcfPmrSrzM5yCgkBjo1aoW7f8BURQB63id349bK1mQ1wP9p7AAZN0EHonq59XbdRgBg4y7+J3LGHshypKpCNZUJy6GPOLE0NPYYaAkB7JnHf7fNpVEzMIU3b27El2Hwf1mtHZhEFNF9Ifxk+oUczdZ//r1sUA6nj15/n6Gkc5qBXpnOzH3Eqdayqfr169uiAMhiFkffYbTpWoQxEYYlXBsKWaNvXhwQuEyfJy5BimwHTMr3/9n51XXTik0dfBi8z5QKDCqOjjhl4sXTrvr6BPl9IJ6ixV/J6EcM5WRG2EwjqYofH0e5pVO6mw483qk1Vw2HDXqZcHPO3J69E7kTDWhSQtEHpZD5sHev4jnqQ6DORfvf4H1b5O9ZeDWtmwIZzT77Jl/1h532jxpoutFSvC1SmIEl1QpxVYGiAaIBTefPO/nM8S+Da88MILYuPGZzIjGlQyvw7Ejh07Q4WL8gTSquocFR7WAwzh6OmRjlhRHTUbMS88iqgLC6xGcCILIsmn7bhJQ1ri9vZPshzAaToMYcs1BDkOWFj060VdhsCOXp9b86GlmeTzt8X169cdwXD9+o2KQ6QE0zAhGnCkaUpmLWReQLTCNLtmEDTtCw2QnL6ZRvMkrEZZudfEmzSUg6C1JABEBQ74wHD3U3cgFCYnC45IgGDAlMsrV35dZWEAsCysWvW4s932M888k3nRoMKVKDNA2OmRcA6FkEjTUzghaWP//v1V4sFtymWhMFlxnk57fYYQUJFrL6ivEAXIE7zHgWE5XShIpGDo7+93DrzP4vBEGDIvIOCQlPZFUVQvazkrwivNmA2xf/+PUzfP22s1UpIt2r0cwGdBdWKGg7SX0zbqsNvDQ7NQt26Pq43N5bpEXEAU9Pb2OgJh1apV9tDp3HtaGMJDC0QGUKdxBi0BDQdQjIN6LUWsE+RQKmmEIGkHkaM7MiZJK11LUiSZB/oMCC/Ua9SHH/QZJUEzvvC7FBJu1OrzEDSVHcS1BH8QeocPUaC/QiwgrXg/93kprQox0GFZIm8Yok9khForDMYc5fzrsPtEtCJhngSCOmbVGQyb+IQhynoCYRonEGYlSklYsYHGGytNSrCeh8wzvTFHnEH5GeUa40a/tj//OVwe6HmVJse6sOZ8v3JQKx988GGoaZeq4PfL+7BOmX5lX53xAeBoHdS2IUxSwyLF4rQgLUMhletARKkwYTo2CAeES4OTYdATGCwKQSZPNQ+RH0GNCYZQgjpwdUomGtCgKWJyNon/dc43+Pqy5H7xyvuMQ23A9XHmoLKDctNo83HQ/VSnkaIDC4O++FSc5T0JC4C6pkMc5aBWEE/QuVFm1DB+06TDWDRQRv3OiXSp9QT7oPiB9kFuHBgG5HeYZexJW5I3betDXrQ5+txldFhepnVUGLVRRQOPHei8QDxbtny/6ju3fQRambANhNua+G5gdz/1fzAtzut/cC/gUxGE/tSDRsorTjSIO3a8JILAin9q5+cXp4xX7fDR8aj/r47pApQbLxGBjgDlJu5hFr1DHxk56nsOtfOUe0V4gXuJzZ5qWXwqruttBPpCcPWWg3rAub06dFlmVPT8V+sy7pefOMBvuJ9BqHUPnf3Q0BbX/JG7rIa9f8jDb3zjSfGtbz3tHHTOTh0FewjDum3YKqKdkaJAViZ0kjhkZcNv6nLUBw++6hRoCbbTPnPmrQVCBE9Lurku6jbSrQAaCNkgohNBpdY7bDQKcKBEWpE+v0YC+anmNxqddev+bcGGPuoSwmiA/RoQ3EOscCcFDv4P16lveAQnMvlEEyZOLLsrG1GvOAEab31anNsYLlaWvHp1zj9EPo1BROgboekra8bZaeLeyXxCXiBNskxKJ1kJ8hTXp27ihs8o6+pTtVtZn1sR9HlRL1Gut1HEXQ5qAeUV50YnrJ/bLf8x3KG3NXJhLXk/EReEsmqpkMt5y3QE1ROUEdR9OXQyZ92rb+gN6VFFGK4H52jXoV/ihpGHgJiwBcSQaHMgCvQtlmUlU9eOB6hsEBSqKU7Om/YDS/w2yzEoTvQGQm4Z7AYam1OnflklsNwYHZ0LI/N4fh2JhWGlM1eQ6RP7BCA+tfHyixP3MMjZE2m/c+dOleXFK87qa3nVdRVJfIe0qPnnFx/Cyq3R4wJLeCOP1Di94odIQAetWonC7KYYdg+TuK+3UaAc6J1aPeWgFoaH99gWudedtAedGwID4d1A/VTbOr8OX+6m62d5QhnBHhx+lkQVWab9rB9ugoXrUaQLyyrftocwrLxIARAF2OcBCjfMEscIhymcYdfFR2cFR6p2BA0E8ibIeoJ0IlyY5akRJ/IvKE48RSHOsFabU6dGnbwOuk50bmFXrIQwQZxhygXiPnfuXV9nN6QZYfziQx4iTCMEp+zc0TGHSZMMj7IedB/QyOOao9yzKOePsvx43CBdcZaDqGAZbeSDOgSoI/PfT7zJts5P2KjxhAH3CPUZ+aMP+cj4ZJ6EKdP6cB8+t9vQL/GnXBbjhmXd6ymVuu+JjOOlplHo06acYWnRfUTqTWe7xIknI7dZHpgSt3z58shx44lNt3AhrrB7hCSBW74CCLK0r4kiibscRMWt3NSS/27paEYaYPmTbSaEoTpErCKHMTE9nBaIdLF4cecjjvPDzMz0F1maykkIIaR24EMihzv8FrMiqSWfy3U96kzjNIzyeUEIISRzwCIF/wd5BM2WgOVE9ZVIcliKJIUxjr+OgLAsa1wQQgjJHBg2Ude8+OlPj3iGhXhQHZfxv9/85hpBsoVpijG8OkMYD/0gvrDfcm1PQgjJGKpPA9CdICVyqreEwxfZxPF/MIxCZQGIUmnmnG2JGBSEEEIyBaa4qtOyw4Bp7e06M43UgzGay3U6K55VlrJ+8KDMkkAIIRkE07IvXvzEmVERNFsCv2N9DIqHbCKHL0DVEpTF4jSmc3IYgxBCMozXtPYsTfUlrjizL+SHKgExMzP1ij2ucUAQQgghhCiYprmloyN3qvJZ/TGXmz5mvxQEIYQQQsg8+VJp9rL6RZWAMIxHCpZlcWCLEEIIIRVsbXCqu7s7r35nLAx0r6dY7P4dV6YkhBBCiNB8HySm/gWsEOWy9RNBCCGEkMxjmuYrbt8bXv9QLE5fsl8GBCGEEEIyiWUZY52dnZvcfjO9/ml21sJCEXSoJIQQQrKJPSJR3u31o6eAgLNEuSw4lEEIIYRkEHvoYpfuOFn1u98/d3V1HROCK1QSQgghGeO4uuaDG4YI4OFGW/CHWC0IIYQQknKMiVyu84mgUGZgNMYjhdlZa5NlibwghBBCSJrJz86WN4UJGGiBkExNTfWZpnGJ60MQQgghqcQWD9Y6P78HldACAlBEEEIIIakkkngAkQQEoIgghBBCUkVk8QACfSB05qZ3WuvstxOCEEIIIW2MMVGLeACRBQTAiXK5ric4xZMQQghpW44vXpyrSTyAmgSEJJf7yi6uWEkIIYS0FYVyWey2DQG7DMOouf+O7APhBvwiOjrMn1mWNSgIIYQQ0qqM48G/VquDSiwCQmILiS2maRyggyUhhBDSUuSxq2bQ6pJRiFVASGZmpl6xox6ikCCEEEISpWCPDhy3hyuO1TNc4UZDBATAsIb9MkCLBCGEENJ0GiYcJA0TECozM38dFMIctBMxJAghhBDSCGzRYIyXy+Xj3d3d46LBNEVASGw11FMs/m0AYsI+9VpaJgghhJDawT5Vdl963rJmx3O5r4w3ytrgRlMFhA4ExfT09GrTFAOGYfba3/TZX/fYh3wlhBBCMo3czNIWCvarYR/WhC0YbjdbMOj8HS9yUvvA9OYtAAAAAElFTkSuQmCC";function kx(e){let{filters:t}=e;const[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(!0),[a,l]=ax(["sessionID"]),[c]=(0,r.useState)((()=>{const e=a.sessionID;if(e)return e;{const e=Ix();return l("sessionID",e,{path:"/"}),e}})),[u,h]=(0,r.useState)(!1);if((0,r.useEffect)((()=>{console.log("Current Filters:",t);(async()=>{try{if(!t)return;const e={Sofa:"Sofa",Armchair:"Armchair",Wardrobe:"Wardrobe",Bed:"Bed"};let n=[];for(const t of Object.values(e)){const e=(await pC.collection(t).get()).docs.map((async e=>{const n=e.data();if(!n.price)return console.error("Error: Price is undefined for document with ID ".concat(e.id)),null;const r=await mC.refFromURL(n.img).getDownloadURL();return{id:e.id,product_name:n.product_name,color:n.color,price:parseFloat(n.price).toFixed(2),img:r,collection_name:t,material:n.material}})),r=(await Promise.all(e)).filter((e=>null!==e));n.push(...r)}const r=n.filter((e=>{const n=parseFloat(e.price),r=t.type?t.type[0]:null,i=t.material?t.material[0]:null,s=t.color?t.color[0]:null,o=t.price?t.price[0]:null,a=!r||e.collection_name===r,l=!i||e.material.includes(i),c=!s||e.color.includes(s);return a&&l&&c&&(!o||"<$50"===o&&n<50||"50-100"===o&&n>=50&&n<=100||"100-200"===o&&n>=100&&n<=200||"200-300"===o&&n>=200&&n<=300||">$300"===o&&n>300)}));i(r),o(!1)}catch(e){console.error("Error fetching items: ",e),o(!1)}})()}),[t]),(0,r.useEffect)((()=>{console.log("Filtered Items:",n)}),[n]),s)return(0,gC.jsx)("div",{className:"item_message",children:"Loading..."});if(0===n.length)return(0,gC.jsx)("div",{className:"item_message",children:"No items found"});function d(e){const t=parseFloat(e);if(isNaN(t))return e;{const e=t.toLocaleString("en-US",{minimumFractionDigits:2});return"$".concat(e)}}return(0,gC.jsxs)("main",{className:"items",children:[n.map((e=>(0,gC.jsxs)("div",{className:"item",style:{backgroundImage:"url(".concat(e.img,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:[(0,gC.jsxs)("p",{className:"item_title",children:[e.collection_name,(0,gC.jsxs)("span",{style:{fontWeight:"700"},children:[" ",e.product_name]})]}),(0,gC.jsxs)("div",{className:"i_box",children:[(0,gC.jsx)("p",{className:"item_price",children:d(e.price)}),(0,gC.jsx)("button",{className:"item_basket",onClick:()=>(e=>{if(e){const t={id:e.id,quantity:1,product_name:e.product_name,color:e.color,price:e.price,img:e.img,collection_name:e.collection_name,material:e.material};pC.collection("ShoppingBag").doc(c).get().then((e=>{if(e.exists){const n=[...e.data().items||[],t];pC.collection("ShoppingBag").doc(c).set({items:n}).then((()=>{console.log("Item added to shopping bag in Firestore")}))}else pC.collection("ShoppingBag").doc(c).set({items:[t]}).then((()=>{console.log("New shopping bag created in Firestore")}))})).catch((e=>{console.error("Error accessing shopping bag:",e)})),h(!0),setTimeout((()=>{h(!1)}),2e3)}})(e)})]})]},e.id))),u&&(0,gC.jsx)("div",{className:"bag_overlay",children:(0,gC.jsx)("img",{src:Tx})})]})}function Cx(){const{filters:e}=(0,r.useContext)(vC);return(0,gC.jsxs)("div",{className:"catalog",children:[(0,gC.jsx)(mx,{priceRanges:["<$50","50-100","100-200","200-300",">$300"]}),(0,gC.jsx)(kx,{filters:e})]})}const xx=function(e,t){return re({basename:null==t?void 0:t.basename,future:ht({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:(n={window:null==t?void 0:t.window},void 0===n&&(n={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,n)),hydrationData:(null==t?void 0:t.hydrationData)||mt(),routes:e,mapRouteProperties:ut,window:null==t?void 0:t.window}).initialize();var n}([{path:"/",element:(0,gC.jsx)(px,{}),children:[{element:(0,gC.jsx)(zC,{}),path:"/Cedre"},{element:(0,gC.jsx)(Cx,{}),path:"/catalog"}]}]);class Nx extends r.Component{render(){return(0,gC.jsx)(yC,{children:(0,gC.jsx)(St,{router:xx})})}}const Ax=Nx;s.createRoot(document.getElementById("root")).render((0,gC.jsx)(r.StrictMode,{children:(0,gC.jsx)(Ax,{})}))})()})();
//# sourceMappingURL=main.ae6ad6b4.js.map